function nf(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function af(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),s}var ru={exports:{}},ri={},nu={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var On=Symbol.for("react.element"),of=Symbol.for("react.portal"),cf=Symbol.for("react.fragment"),df=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),hf=Symbol.for("react.provider"),mf=Symbol.for("react.context"),ff=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),gf=Symbol.for("react.memo"),xf=Symbol.for("react.lazy"),vc=Symbol.iterator;function yf(e){return e===null||typeof e!="object"?null:(e=vc&&e[vc]||e["@@iterator"],typeof e=="function"?e:null)}var au={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iu=Object.assign,lu={};function Cr(e,t,s){this.props=e,this.context=t,this.refs=lu,this.updater=s||au}Cr.prototype.isReactComponent={};Cr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ou(){}ou.prototype=Cr.prototype;function po(e,t,s){this.props=e,this.context=t,this.refs=lu,this.updater=s||au}var go=po.prototype=new ou;go.constructor=po;iu(go,Cr.prototype);go.isPureReactComponent=!0;var wc=Array.isArray,cu=Object.prototype.hasOwnProperty,xo={current:null},du={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,s){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)cu.call(t,n)&&!du.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=s;else if(1<c){for(var o=Array(c),u=0;u<c;u++)o[u]=arguments[u+2];a.children=o}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:On,type:e,key:i,ref:l,props:a,_owner:xo.current}}function vf(e,t){return{$$typeof:On,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yo(e){return typeof e=="object"&&e!==null&&e.$$typeof===On}function wf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var jc=/\/+/g;function Ci(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wf(""+e.key):t.toString(36)}function fa(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case On:case of:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+Ci(l,0):n,wc(a)?(s="",e!=null&&(s=e.replace(jc,"$&/")+"/"),fa(a,t,s,"",function(u){return u})):a!=null&&(yo(a)&&(a=vf(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(jc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",wc(e))for(var c=0;c<e.length;c++){i=e[c];var o=n+Ci(i,c);l+=fa(i,t,s,o,a)}else if(o=yf(e),typeof o=="function")for(e=o.call(e),c=0;!(i=e.next()).done;)i=i.value,o=n+Ci(i,c++),l+=fa(i,t,s,o,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Hn(e,t,s){if(e==null)return e;var n=[],a=0;return fa(e,n,"","",function(i){return t.call(s,i,a++)}),n}function jf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},pa={transition:null},bf={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:pa,ReactCurrentOwner:xo};function hu(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Hn,forEach:function(e,t,s){Hn(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Hn(e,function(){t++}),t},toArray:function(e){return Hn(e,function(t){return t})||[]},only:function(e){if(!yo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Cr;re.Fragment=cf;re.Profiler=uf;re.PureComponent=po;re.StrictMode=df;re.Suspense=pf;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bf;re.act=hu;re.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=iu({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=xo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)cu.call(t,o)&&!du.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){c=Array(o);for(var u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:On,type:e.type,key:a,ref:i,props:n,_owner:l}};re.createContext=function(e){return e={$$typeof:mf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hf,_context:e},e.Consumer=e};re.createElement=uu;re.createFactory=function(e){var t=uu.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:ff,render:e}};re.isValidElement=yo;re.lazy=function(e){return{$$typeof:xf,_payload:{_status:-1,_result:e},_init:jf}};re.memo=function(e,t){return{$$typeof:gf,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=pa.transition;pa.transition={};try{e()}finally{pa.transition=t}};re.unstable_act=hu;re.useCallback=function(e,t){return Ke.current.useCallback(e,t)};re.useContext=function(e){return Ke.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};re.useEffect=function(e,t){return Ke.current.useEffect(e,t)};re.useId=function(){return Ke.current.useId()};re.useImperativeHandle=function(e,t,s){return Ke.current.useImperativeHandle(e,t,s)};re.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return Ke.current.useMemo(e,t)};re.useReducer=function(e,t,s){return Ke.current.useReducer(e,t,s)};re.useRef=function(e){return Ke.current.useRef(e)};re.useState=function(e){return Ke.current.useState(e)};re.useSyncExternalStore=function(e,t,s){return Ke.current.useSyncExternalStore(e,t,s)};re.useTransition=function(){return Ke.current.useTransition()};re.version="18.3.1";nu.exports=re;var j=nu.exports;const Nf=af(j),_f=nf({__proto__:null,default:Nf},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=j,Sf=Symbol.for("react.element"),Ef=Symbol.for("react.fragment"),Cf=Object.prototype.hasOwnProperty,Pf=kf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tf={key:!0,ref:!0,__self:!0,__source:!0};function mu(e,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Cf.call(t,n)&&!Tf.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Sf,type:e,key:i,ref:l,props:a,_owner:Pf.current}}ri.Fragment=Ef;ri.jsx=mu;ri.jsxs=mu;ru.exports=ri;var r=ru.exports,fu={exports:{}},dt={},pu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,P){var B=N.length;N.push(P);e:for(;0<B;){var T=B-1>>>1,H=N[T];if(0<a(H,P))N[T]=P,N[B]=H,B=T;else break e}}function s(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var P=N[0],B=N.pop();if(B!==P){N[0]=B;e:for(var T=0,H=N.length,Q=H>>>1;T<Q;){var ee=2*(T+1)-1,be=N[ee],me=ee+1,I=N[me];if(0>a(be,B))me<H&&0>a(I,be)?(N[T]=I,N[me]=B,T=me):(N[T]=be,N[ee]=B,T=ee);else if(me<H&&0>a(I,B))N[T]=I,N[me]=B,T=me;else break e}}return P}function a(N,P){var B=N.sortIndex-P.sortIndex;return B!==0?B:N.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var o=[],u=[],d=1,h=null,f=3,g=!1,v=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var P=s(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=N)n(u),P.sortIndex=P.expirationTime,t(o,P);else break;P=s(u)}}function y(N){if(b=!1,m(N),!v)if(s(o)!==null)v=!0,W(_);else{var P=s(u);P!==null&&A(y,P.startTime-N)}}function _(N,P){v=!1,b&&(b=!1,x(E),E=-1),g=!0;var B=f;try{for(m(P),h=s(o);h!==null&&(!(h.expirationTime>P)||N&&!O());){var T=h.callback;if(typeof T=="function"){h.callback=null,f=h.priorityLevel;var H=T(h.expirationTime<=P);P=e.unstable_now(),typeof H=="function"?h.callback=H:h===s(o)&&n(o),m(P)}else n(o);h=s(o)}if(h!==null)var Q=!0;else{var ee=s(u);ee!==null&&A(y,ee.startTime-P),Q=!1}return Q}finally{h=null,f=B,g=!1}}var S=!1,w=null,E=-1,F=5,C=-1;function O(){return!(e.unstable_now()-C<F)}function q(){if(w!==null){var N=e.unstable_now();C=N;var P=!0;try{P=w(!0,N)}finally{P?$():(S=!1,w=null)}}else S=!1}var $;if(typeof p=="function")$=function(){p(q)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,R=J.port2;J.port1.onmessage=q,$=function(){R.postMessage(null)}}else $=function(){k(q,0)};function W(N){w=N,S||(S=!0,$())}function A(N,P){E=k(function(){N(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,W(_))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(o)},e.unstable_next=function(N){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var B=f;f=P;try{return N()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,P){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var B=f;f=N;try{return P()}finally{f=B}},e.unstable_scheduleCallback=function(N,P,B){var T=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?T+B:T):B=T,N){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,N={id:d++,callback:P,priorityLevel:N,startTime:B,expirationTime:H,sortIndex:-1},B>T?(N.sortIndex=B,t(u,N),s(o)===null&&N===s(u)&&(b?(x(E),E=-1):b=!0,A(y,B-T))):(N.sortIndex=H,t(o,N),v||g||(v=!0,W(_))),N},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(N){var P=f;return function(){var B=f;f=P;try{return N.apply(this,arguments)}finally{f=B}}}})(gu);pu.exports=gu;var Rf=pu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=j,ct=Rf;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,fn={};function Vs(e,t){vr(e,t),vr(e+"Capture",t)}function vr(e,t){for(fn[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ol=Object.prototype.hasOwnProperty,Mf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bc={},Nc={};function Of(e){return ol.call(Nc,e)?!0:ol.call(bc,e)?!1:Mf.test(e)?Nc[e]=!0:(bc[e]=!0,!1)}function Lf(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $f(e,t,s,n){if(t===null||typeof t>"u"||Lf(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Je(e,t,s,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new Je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new Je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new Je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new Je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new Je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new Je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new Je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new Je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new Je(e,5,!1,e.toLowerCase(),null,!1,!1)});var vo=/[\-:]([a-z])/g;function wo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vo,wo);Ue[t]=new Je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vo,wo);Ue[t]=new Je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vo,wo);Ue[t]=new Je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new Je(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new Je(e,1,!1,e.toLowerCase(),null,!0,!0)});function jo(e,t,s,n){var a=Ue.hasOwnProperty(t)?Ue[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($f(t,s,a,n)&&(s=null),n||a===null?Of(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Kt=Af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vn=Symbol.for("react.element"),tr=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),bo=Symbol.for("react.strict_mode"),cl=Symbol.for("react.profiler"),yu=Symbol.for("react.provider"),vu=Symbol.for("react.context"),No=Symbol.for("react.forward_ref"),dl=Symbol.for("react.suspense"),ul=Symbol.for("react.suspense_list"),_o=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),wu=Symbol.for("react.offscreen"),_c=Symbol.iterator;function Fr(e){return e===null||typeof e!="object"?null:(e=_c&&e[_c]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,Pi;function Jr(e){if(Pi===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Pi=t&&t[1]||""}return`
`+Pi+e}var Ti=!1;function Ri(e,t){if(!e||Ti)return"";Ti=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,c=i.length-1;1<=l&&0<=c&&a[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==i[c]){var o=`
`+a[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=c);break}}}finally{Ti=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Jr(e):""}function If(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=Ri(e.type,!1),e;case 11:return e=Ri(e.type.render,!1),e;case 1:return e=Ri(e.type,!0),e;default:return""}}function hl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sr:return"Fragment";case tr:return"Portal";case cl:return"Profiler";case bo:return"StrictMode";case dl:return"Suspense";case ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vu:return(e.displayName||"Context")+".Consumer";case yu:return(e._context.displayName||"Context")+".Provider";case No:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _o:return t=e.displayName||null,t!==null?t:hl(e.type)||"Memo";case es:t=e._payload,e=e._init;try{return hl(e(t))}catch{}}return null}function Df(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hl(t);case 8:return t===bo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ju(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uf(e){var t=ju(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gn(e){e._valueTracker||(e._valueTracker=Uf(e))}function bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=ju(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ml(e,t){var s=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function kc(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=vs(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nu(e,t){t=t.checked,t!=null&&jo(e,"checked",t,!1)}function fl(e,t){Nu(e,t);var s=vs(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pl(e,t.type,s):t.hasOwnProperty("defaultValue")&&pl(e,t.type,vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function pl(e,t,s){(t!=="number"||Ea(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Qr=Array.isArray;function mr(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+vs(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ec(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(D(92));if(Qr(s)){if(1<s.length)throw Error(D(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:vs(s)}}function _u(e,t){var s=vs(t.value),n=vs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ku(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ku(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kn,Su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ff=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(e){Ff.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]})});function Eu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function Cu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Eu(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var zf=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,t){if(t){if(zf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=null;function ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jl=null,fr=null,pr=null;function Pc(e){if(e=In(e)){if(typeof jl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=oi(t),jl(e.stateNode,e.type,t))}}function Pu(e){fr?pr?pr.push(e):pr=[e]:fr=e}function Tu(){if(fr){var e=fr,t=pr;if(pr=fr=null,Pc(e),t)for(e=0;e<t.length;e++)Pc(t[e])}}function Ru(e,t){return e(t)}function Au(){}var Ai=!1;function Mu(e,t,s){if(Ai)return e(t,s);Ai=!0;try{return Ru(e,t,s)}finally{Ai=!1,(fr!==null||pr!==null)&&(Au(),Tu())}}function gn(e,t){var s=e.stateNode;if(s===null)return null;var n=oi(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(D(231,t,typeof s));return s}var bl=!1;if(qt)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){bl=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{bl=!1}function Bf(e,t,s,n,a,i,l,c,o){var u=Array.prototype.slice.call(arguments,3);try{t.apply(s,u)}catch(d){this.onError(d)}}var tn=!1,Ca=null,Pa=!1,Nl=null,Wf={onError:function(e){tn=!0,Ca=e}};function qf(e,t,s,n,a,i,l,c,o){tn=!1,Ca=null,Bf.apply(Wf,arguments)}function Hf(e,t,s,n,a,i,l,c,o){if(qf.apply(this,arguments),tn){if(tn){var u=Ca;tn=!1,Ca=null}else throw Error(D(198));Pa||(Pa=!0,Nl=u)}}function Gs(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Ou(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tc(e){if(Gs(e)!==e)throw Error(D(188))}function Vf(e){var t=e.alternate;if(!t){if(t=Gs(e),t===null)throw Error(D(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Tc(a),e;if(i===n)return Tc(a),t;i=i.sibling}throw Error(D(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,c=a.child;c;){if(c===s){l=!0,s=a,n=i;break}if(c===n){l=!0,n=a,s=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===s){l=!0,s=i,n=a;break}if(c===n){l=!0,n=i,s=a;break}c=c.sibling}if(!l)throw Error(D(189))}}if(s.alternate!==n)throw Error(D(190))}if(s.tag!==3)throw Error(D(188));return s.stateNode.current===s?e:t}function Lu(e){return e=Vf(e),e!==null?$u(e):null}function $u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$u(e);if(t!==null)return t;e=e.sibling}return null}var Iu=ct.unstable_scheduleCallback,Rc=ct.unstable_cancelCallback,Gf=ct.unstable_shouldYield,Kf=ct.unstable_requestPaint,ke=ct.unstable_now,Jf=ct.unstable_getCurrentPriorityLevel,So=ct.unstable_ImmediatePriority,Du=ct.unstable_UserBlockingPriority,Ta=ct.unstable_NormalPriority,Qf=ct.unstable_LowPriority,Uu=ct.unstable_IdlePriority,ni=null,At=null;function Yf(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(ni,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:ep,Xf=Math.log,Zf=Math.LN2;function ep(e){return e>>>=0,e===0?32:31-(Xf(e)/Zf|0)|0}var Jn=64,Qn=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ra(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var c=l&~a;c!==0?n=Yr(c):(i&=l,i!==0&&(n=Yr(i)))}else l=s&~a,l!==0?n=Yr(l):i!==0&&(n=Yr(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-kt(t),a=1<<s,n|=e[s],t&=~a;return n}function tp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sp(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-kt(i),c=1<<l,o=a[l];o===-1?(!(c&s)||c&n)&&(a[l]=tp(c,t)):o<=t&&(e.expiredLanes|=c),i&=~c}}function _l(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fu(){var e=Jn;return Jn<<=1,!(Jn&4194240)&&(Jn=64),e}function Mi(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ln(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=s}function rp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-kt(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Eo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-kt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var ce=0;function zu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bu,Co,Wu,qu,Hu,kl=!1,Yn=[],cs=null,ds=null,us=null,xn=new Map,yn=new Map,rs=[],np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(e,t){switch(e){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":xn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(t.pointerId)}}function Br(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=In(t),t!==null&&Co(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ap(e,t,s,n,a){switch(t){case"focusin":return cs=Br(cs,e,t,s,n,a),!0;case"dragenter":return ds=Br(ds,e,t,s,n,a),!0;case"mouseover":return us=Br(us,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return xn.set(i,Br(xn.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,yn.set(i,Br(yn.get(i)||null,e,t,s,n,a)),!0}return!1}function Vu(e){var t=Os(e.target);if(t!==null){var s=Gs(t);if(s!==null){if(t=s.tag,t===13){if(t=Ou(s),t!==null){e.blockedOn=t,Hu(e.priority,function(){Wu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Sl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);wl=n,s.target.dispatchEvent(n),wl=null}else return t=In(s),t!==null&&Co(t),e.blockedOn=s,!1;t.shift()}return!0}function Mc(e,t,s){ga(e)&&s.delete(t)}function ip(){kl=!1,cs!==null&&ga(cs)&&(cs=null),ds!==null&&ga(ds)&&(ds=null),us!==null&&ga(us)&&(us=null),xn.forEach(Mc),yn.forEach(Mc)}function Wr(e,t){e.blockedOn===t&&(e.blockedOn=null,kl||(kl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,ip)))}function vn(e){function t(a){return Wr(a,e)}if(0<Yn.length){Wr(Yn[0],e);for(var s=1;s<Yn.length;s++){var n=Yn[s];n.blockedOn===e&&(n.blockedOn=null)}}for(cs!==null&&Wr(cs,e),ds!==null&&Wr(ds,e),us!==null&&Wr(us,e),xn.forEach(t),yn.forEach(t),s=0;s<rs.length;s++)n=rs[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<rs.length&&(s=rs[0],s.blockedOn===null);)Vu(s),s.blockedOn===null&&rs.shift()}var gr=Kt.ReactCurrentBatchConfig,Aa=!0;function lp(e,t,s,n){var a=ce,i=gr.transition;gr.transition=null;try{ce=1,Po(e,t,s,n)}finally{ce=a,gr.transition=i}}function op(e,t,s,n){var a=ce,i=gr.transition;gr.transition=null;try{ce=4,Po(e,t,s,n)}finally{ce=a,gr.transition=i}}function Po(e,t,s,n){if(Aa){var a=Sl(e,t,s,n);if(a===null)Wi(e,t,n,Ma,s),Ac(e,n);else if(ap(a,e,t,s,n))n.stopPropagation();else if(Ac(e,n),t&4&&-1<np.indexOf(e)){for(;a!==null;){var i=In(a);if(i!==null&&Bu(i),i=Sl(e,t,s,n),i===null&&Wi(e,t,n,Ma,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else Wi(e,t,n,null,s)}}var Ma=null;function Sl(e,t,s,n){if(Ma=null,e=ko(n),e=Os(e),e!==null)if(t=Gs(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Ou(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ma=e,null}function Gu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jf()){case So:return 1;case Du:return 4;case Ta:case Qf:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var is=null,To=null,xa=null;function Ku(){if(xa)return xa;var e,t=To,s=t.length,n,a="value"in is?is.value:is.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(n=1;n<=l&&t[s-n]===a[i-n];n++);return xa=a.slice(e,1<n?1-n:void 0)}function ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xn(){return!0}function Oc(){return!1}function ut(e){function t(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xn:Oc,this.isPropagationStopped=Oc,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),t}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=ut(Pr),$n=ve({},Pr,{view:0,detail:0}),cp=ut($n),Oi,Li,qr,ai=ve({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Oi=e.screenX-qr.screenX,Li=e.screenY-qr.screenY):Li=Oi=0,qr=e),Oi)},movementY:function(e){return"movementY"in e?e.movementY:Li}}),Lc=ut(ai),dp=ve({},ai,{dataTransfer:0}),up=ut(dp),hp=ve({},$n,{relatedTarget:0}),$i=ut(hp),mp=ve({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),fp=ut(mp),pp=ve({},Pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gp=ut(pp),xp=ve({},Pr,{data:0}),$c=ut(xp),yp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wp[e])?!!t[e]:!1}function Ao(){return jp}var bp=ve({},$n,{key:function(e){if(e.key){var t=yp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(e){return e.type==="keypress"?ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Np=ut(bp),_p=ve({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ic=ut(_p),kp=ve({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),Sp=ut(kp),Ep=ve({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cp=ut(Ep),Pp=ve({},ai,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tp=ut(Pp),Rp=[9,13,27,32],Mo=qt&&"CompositionEvent"in window,sn=null;qt&&"documentMode"in document&&(sn=document.documentMode);var Ap=qt&&"TextEvent"in window&&!sn,Ju=qt&&(!Mo||sn&&8<sn&&11>=sn),Dc=" ",Uc=!1;function Qu(e,t){switch(e){case"keyup":return Rp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rr=!1;function Mp(e,t){switch(e){case"compositionend":return Yu(t);case"keypress":return t.which!==32?null:(Uc=!0,Dc);case"textInput":return e=t.data,e===Dc&&Uc?null:e;default:return null}}function Op(e,t){if(rr)return e==="compositionend"||!Mo&&Qu(e,t)?(e=Ku(),xa=To=is=null,rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ju&&t.locale!=="ko"?null:t.data;default:return null}}var Lp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lp[e.type]:t==="textarea"}function Xu(e,t,s,n){Pu(n),t=Oa(t,"onChange"),0<t.length&&(s=new Ro("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var rn=null,wn=null;function $p(e){ch(e,0)}function ii(e){var t=ir(e);if(bu(t))return e}function Ip(e,t){if(e==="change")return t}var Zu=!1;if(qt){var Ii;if(qt){var Di="oninput"in document;if(!Di){var zc=document.createElement("div");zc.setAttribute("oninput","return;"),Di=typeof zc.oninput=="function"}Ii=Di}else Ii=!1;Zu=Ii&&(!document.documentMode||9<document.documentMode)}function Bc(){rn&&(rn.detachEvent("onpropertychange",eh),wn=rn=null)}function eh(e){if(e.propertyName==="value"&&ii(wn)){var t=[];Xu(t,wn,e,ko(e)),Mu($p,t)}}function Dp(e,t,s){e==="focusin"?(Bc(),rn=t,wn=s,rn.attachEvent("onpropertychange",eh)):e==="focusout"&&Bc()}function Up(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(wn)}function Fp(e,t){if(e==="click")return ii(t)}function zp(e,t){if(e==="input"||e==="change")return ii(t)}function Bp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:Bp;function jn(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!ol.call(t,a)||!Et(e[a],t[a]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qc(e,t){var s=Wc(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Wc(s)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sh(){for(var e=window,t=Ea();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ea(e.document)}return t}function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wp(e){var t=sh(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&th(s.ownerDocument.documentElement,s)){if(n!==null&&Oo(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=qc(s,i);var l=qc(s,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qp=qt&&"documentMode"in document&&11>=document.documentMode,nr=null,El=null,nn=null,Cl=!1;function Hc(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cl||nr==null||nr!==Ea(n)||(n=nr,"selectionStart"in n&&Oo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nn&&jn(nn,n)||(nn=n,n=Oa(El,"onSelect"),0<n.length&&(t=new Ro("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=nr)))}function Zn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ar={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionend:Zn("Transition","TransitionEnd")},Ui={},rh={};qt&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function li(e){if(Ui[e])return Ui[e];if(!ar[e])return e;var t=ar[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in rh)return Ui[e]=t[s];return e}var nh=li("animationend"),ah=li("animationiteration"),ih=li("animationstart"),lh=li("transitionend"),oh=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(e,t){oh.set(e,t),Vs(t,[e])}for(var Fi=0;Fi<Vc.length;Fi++){var zi=Vc[Fi],Hp=zi.toLowerCase(),Vp=zi[0].toUpperCase()+zi.slice(1);bs(Hp,"on"+Vp)}bs(nh,"onAnimationEnd");bs(ah,"onAnimationIteration");bs(ih,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(lh,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Gc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Hf(n,t,void 0,e),e.currentTarget=null}function ch(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var c=n[l],o=c.instance,u=c.currentTarget;if(c=c.listener,o!==i&&a.isPropagationStopped())break e;Gc(a,c,u),i=o}else for(l=0;l<n.length;l++){if(c=n[l],o=c.instance,u=c.currentTarget,c=c.listener,o!==i&&a.isPropagationStopped())break e;Gc(a,c,u),i=o}}}if(Pa)throw e=Nl,Pa=!1,Nl=null,e}function fe(e,t){var s=t[Ml];s===void 0&&(s=t[Ml]=new Set);var n=e+"__bubble";s.has(n)||(dh(t,e,2,!1),s.add(n))}function Bi(e,t,s){var n=0;t&&(n|=4),dh(s,e,n,t)}var ea="_reactListening"+Math.random().toString(36).slice(2);function bn(e){if(!e[ea]){e[ea]=!0,xu.forEach(function(s){s!=="selectionchange"&&(Gp.has(s)||Bi(s,!1,e),Bi(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ea]||(t[ea]=!0,Bi("selectionchange",!1,t))}}function dh(e,t,s,n){switch(Gu(t)){case 1:var a=lp;break;case 4:a=op;break;default:a=Po}s=a.bind(null,t,s,e),a=void 0,!bl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Wi(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;l=l.return}for(;c!==null;){if(l=Os(c),l===null)return;if(o=l.tag,o===5||o===6){n=i=l;continue e}c=c.parentNode}}n=n.return}Mu(function(){var u=i,d=ko(s),h=[];e:{var f=oh.get(e);if(f!==void 0){var g=Ro,v=e;switch(e){case"keypress":if(ya(s)===0)break e;case"keydown":case"keyup":g=Np;break;case"focusin":v="focus",g=$i;break;case"focusout":v="blur",g=$i;break;case"beforeblur":case"afterblur":g=$i;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Sp;break;case nh:case ah:case ih:g=fp;break;case lh:g=Cp;break;case"scroll":g=cp;break;case"wheel":g=Tp;break;case"copy":case"cut":case"paste":g=gp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ic}var b=(t&4)!==0,k=!b&&e==="scroll",x=b?f!==null?f+"Capture":null:f;b=[];for(var p=u,m;p!==null;){m=p;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,x!==null&&(y=gn(p,x),y!=null&&b.push(Nn(p,y,m)))),k)break;p=p.return}0<b.length&&(f=new g(f,v,null,s,d),h.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&s!==wl&&(v=s.relatedTarget||s.fromElement)&&(Os(v)||v[Ht]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=s.relatedTarget||s.toElement,g=u,v=v?Os(v):null,v!==null&&(k=Gs(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=Lc,y="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(b=Ic,y="onPointerLeave",x="onPointerEnter",p="pointer"),k=g==null?f:ir(g),m=v==null?f:ir(v),f=new b(y,p+"leave",g,s,d),f.target=k,f.relatedTarget=m,y=null,Os(d)===u&&(b=new b(x,p+"enter",v,s,d),b.target=m,b.relatedTarget=k,y=b),k=y,g&&v)t:{for(b=g,x=v,p=0,m=b;m;m=Js(m))p++;for(m=0,y=x;y;y=Js(y))m++;for(;0<p-m;)b=Js(b),p--;for(;0<m-p;)x=Js(x),m--;for(;p--;){if(b===x||x!==null&&b===x.alternate)break t;b=Js(b),x=Js(x)}b=null}else b=null;g!==null&&Kc(h,f,g,b,!1),v!==null&&k!==null&&Kc(h,k,v,b,!0)}}e:{if(f=u?ir(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var _=Ip;else if(Fc(f))if(Zu)_=zp;else{_=Up;var S=Dp}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Fp);if(_&&(_=_(e,u))){Xu(h,_,s,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&pl(f,"number",f.value)}switch(S=u?ir(u):window,e){case"focusin":(Fc(S)||S.contentEditable==="true")&&(nr=S,El=u,nn=null);break;case"focusout":nn=El=nr=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,Hc(h,s,d);break;case"selectionchange":if(qp)break;case"keydown":case"keyup":Hc(h,s,d)}var w;if(Mo)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else rr?Qu(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Ju&&s.locale!=="ko"&&(rr||E!=="onCompositionStart"?E==="onCompositionEnd"&&rr&&(w=Ku()):(is=d,To="value"in is?is.value:is.textContent,rr=!0)),S=Oa(u,E),0<S.length&&(E=new $c(E,e,null,s,d),h.push({event:E,listeners:S}),w?E.data=w:(w=Yu(s),w!==null&&(E.data=w)))),(w=Ap?Mp(e,s):Op(e,s))&&(u=Oa(u,"onBeforeInput"),0<u.length&&(d=new $c("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=w))}ch(h,t)})}function Nn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Oa(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gn(e,s),i!=null&&n.unshift(Nn(e,i,a)),i=gn(e,t),i!=null&&n.push(Nn(e,i,a))),e=e.return}return n}function Js(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kc(e,t,s,n,a){for(var i=t._reactName,l=[];s!==null&&s!==n;){var c=s,o=c.alternate,u=c.stateNode;if(o!==null&&o===n)break;c.tag===5&&u!==null&&(c=u,a?(o=gn(s,i),o!=null&&l.unshift(Nn(s,o,c))):a||(o=gn(s,i),o!=null&&l.push(Nn(s,o,c)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var Kp=/\r\n?/g,Jp=/\u0000|\uFFFD/g;function Jc(e){return(typeof e=="string"?e:""+e).replace(Kp,`
`).replace(Jp,"")}function ta(e,t,s){if(t=Jc(t),Jc(e)!==t&&s)throw Error(D(425))}function La(){}var Pl=null,Tl=null;function Rl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Al=typeof setTimeout=="function"?setTimeout:void 0,Qp=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,Yp=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(e){return Qc.resolve(null).then(e).catch(Xp)}:Al;function Xp(e){setTimeout(function(){throw e})}function qi(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),vn(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);vn(t)}function hs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Tr,_n="__reactProps$"+Tr,Ht="__reactContainer$"+Tr,Ml="__reactEvents$"+Tr,Zp="__reactListeners$"+Tr,e0="__reactHandles$"+Tr;function Os(e){var t=e[Rt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ht]||s[Rt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Yc(e);e!==null;){if(s=e[Rt])return s;e=Yc(e)}return t}e=s,s=e.parentNode}return null}function In(e){return e=e[Rt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function oi(e){return e[_n]||null}var Ol=[],lr=-1;function Ns(e){return{current:e}}function pe(e){0>lr||(e.current=Ol[lr],Ol[lr]=null,lr--)}function he(e,t){lr++,Ol[lr]=e.current,e.current=t}var ws={},qe=Ns(ws),tt=Ns(!1),Fs=ws;function wr(e,t){var s=e.type.contextTypes;if(!s)return ws;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function st(e){return e=e.childContextTypes,e!=null}function $a(){pe(tt),pe(qe)}function Xc(e,t,s){if(qe.current!==ws)throw Error(D(168));he(qe,t),he(tt,s)}function uh(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(D(108,Df(e)||"Unknown",a));return ve({},s,n)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ws,Fs=qe.current,he(qe,e),he(tt,tt.current),!0}function Zc(e,t,s){var n=e.stateNode;if(!n)throw Error(D(169));s?(e=uh(e,t,Fs),n.__reactInternalMemoizedMergedChildContext=e,pe(tt),pe(qe),he(qe,e)):pe(tt),he(tt,s)}var Ut=null,ci=!1,Hi=!1;function hh(e){Ut===null?Ut=[e]:Ut.push(e)}function t0(e){ci=!0,hh(e)}function _s(){if(!Hi&&Ut!==null){Hi=!0;var e=0,t=ce;try{var s=Ut;for(ce=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Ut=null,ci=!1}catch(a){throw Ut!==null&&(Ut=Ut.slice(e+1)),Iu(So,_s),a}finally{ce=t,Hi=!1}}return null}var or=[],cr=0,Da=null,Ua=0,ht=[],mt=0,zs=null,Ft=1,zt="";function Ts(e,t){or[cr++]=Ua,or[cr++]=Da,Da=e,Ua=t}function mh(e,t,s){ht[mt++]=Ft,ht[mt++]=zt,ht[mt++]=zs,zs=e;var n=Ft;e=zt;var a=32-kt(n)-1;n&=~(1<<a),s+=1;var i=32-kt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Ft=1<<32-kt(t)+a|s<<a|n,zt=i+e}else Ft=1<<i|s<<a|n,zt=e}function Lo(e){e.return!==null&&(Ts(e,1),mh(e,1,0))}function $o(e){for(;e===Da;)Da=or[--cr],or[cr]=null,Ua=or[--cr],or[cr]=null;for(;e===zs;)zs=ht[--mt],ht[mt]=null,zt=ht[--mt],ht[mt]=null,Ft=ht[--mt],ht[mt]=null}var ot=null,it=null,ge=!1,_t=null;function fh(e,t){var s=ft(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ed(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,it=hs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=zs!==null?{id:Ft,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ft(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ot=e,it=null,!0):!1;default:return!1}}function Ll(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(ge){var t=it;if(t){var s=t;if(!ed(e,t)){if(Ll(e))throw Error(D(418));t=hs(s.nextSibling);var n=ot;t&&ed(e,t)?fh(n,s):(e.flags=e.flags&-4097|2,ge=!1,ot=e)}}else{if(Ll(e))throw Error(D(418));e.flags=e.flags&-4097|2,ge=!1,ot=e}}}function td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function sa(e){if(e!==ot)return!1;if(!ge)return td(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rl(e.type,e.memoizedProps)),t&&(t=it)){if(Ll(e))throw ph(),Error(D(418));for(;t;)fh(e,t),t=hs(t.nextSibling)}if(td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){it=hs(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}it=null}}else it=ot?hs(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=it;e;)e=hs(e.nextSibling)}function jr(){it=ot=null,ge=!1}function Io(e){_t===null?_t=[e]:_t.push(e)}var s0=Kt.ReactCurrentBatchConfig;function Hr(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(D(309));var n=s.stateNode}if(!n)throw Error(D(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=a.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!s._owner)throw Error(D(290,e))}return e}function ra(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sd(e){var t=e._init;return t(e._payload)}function gh(e){function t(x,p){if(e){var m=x.deletions;m===null?(x.deletions=[p],x.flags|=16):m.push(p)}}function s(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function n(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=gs(x,p),x.index=0,x.sibling=null,x}function i(x,p,m){return x.index=m,e?(m=x.alternate,m!==null?(m=m.index,m<p?(x.flags|=2,p):m):(x.flags|=2,p)):(x.flags|=1048576,p)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,p,m,y){return p===null||p.tag!==6?(p=Xi(m,x.mode,y),p.return=x,p):(p=a(p,m),p.return=x,p)}function o(x,p,m,y){var _=m.type;return _===sr?d(x,p,m.props.children,y,m.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===es&&sd(_)===p.type)?(y=a(p,m.props),y.ref=Hr(x,p,m),y.return=x,y):(y=ka(m.type,m.key,m.props,null,x.mode,y),y.ref=Hr(x,p,m),y.return=x,y)}function u(x,p,m,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Zi(m,x.mode,y),p.return=x,p):(p=a(p,m.children||[]),p.return=x,p)}function d(x,p,m,y,_){return p===null||p.tag!==7?(p=Us(m,x.mode,y,_),p.return=x,p):(p=a(p,m),p.return=x,p)}function h(x,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Xi(""+p,x.mode,m),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vn:return m=ka(p.type,p.key,p.props,null,x.mode,m),m.ref=Hr(x,null,p),m.return=x,m;case tr:return p=Zi(p,x.mode,m),p.return=x,p;case es:var y=p._init;return h(x,y(p._payload),m)}if(Qr(p)||Fr(p))return p=Us(p,x.mode,m,null),p.return=x,p;ra(x,p)}return null}function f(x,p,m,y){var _=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return _!==null?null:c(x,p,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vn:return m.key===_?o(x,p,m,y):null;case tr:return m.key===_?u(x,p,m,y):null;case es:return _=m._init,f(x,p,_(m._payload),y)}if(Qr(m)||Fr(m))return _!==null?null:d(x,p,m,y,null);ra(x,m)}return null}function g(x,p,m,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return x=x.get(m)||null,c(p,x,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vn:return x=x.get(y.key===null?m:y.key)||null,o(p,x,y,_);case tr:return x=x.get(y.key===null?m:y.key)||null,u(p,x,y,_);case es:var S=y._init;return g(x,p,m,S(y._payload),_)}if(Qr(y)||Fr(y))return x=x.get(m)||null,d(p,x,y,_,null);ra(p,y)}return null}function v(x,p,m,y){for(var _=null,S=null,w=p,E=p=0,F=null;w!==null&&E<m.length;E++){w.index>E?(F=w,w=null):F=w.sibling;var C=f(x,w,m[E],y);if(C===null){w===null&&(w=F);break}e&&w&&C.alternate===null&&t(x,w),p=i(C,p,E),S===null?_=C:S.sibling=C,S=C,w=F}if(E===m.length)return s(x,w),ge&&Ts(x,E),_;if(w===null){for(;E<m.length;E++)w=h(x,m[E],y),w!==null&&(p=i(w,p,E),S===null?_=w:S.sibling=w,S=w);return ge&&Ts(x,E),_}for(w=n(x,w);E<m.length;E++)F=g(w,x,E,m[E],y),F!==null&&(e&&F.alternate!==null&&w.delete(F.key===null?E:F.key),p=i(F,p,E),S===null?_=F:S.sibling=F,S=F);return e&&w.forEach(function(O){return t(x,O)}),ge&&Ts(x,E),_}function b(x,p,m,y){var _=Fr(m);if(typeof _!="function")throw Error(D(150));if(m=_.call(m),m==null)throw Error(D(151));for(var S=_=null,w=p,E=p=0,F=null,C=m.next();w!==null&&!C.done;E++,C=m.next()){w.index>E?(F=w,w=null):F=w.sibling;var O=f(x,w,C.value,y);if(O===null){w===null&&(w=F);break}e&&w&&O.alternate===null&&t(x,w),p=i(O,p,E),S===null?_=O:S.sibling=O,S=O,w=F}if(C.done)return s(x,w),ge&&Ts(x,E),_;if(w===null){for(;!C.done;E++,C=m.next())C=h(x,C.value,y),C!==null&&(p=i(C,p,E),S===null?_=C:S.sibling=C,S=C);return ge&&Ts(x,E),_}for(w=n(x,w);!C.done;E++,C=m.next())C=g(w,x,E,C.value,y),C!==null&&(e&&C.alternate!==null&&w.delete(C.key===null?E:C.key),p=i(C,p,E),S===null?_=C:S.sibling=C,S=C);return e&&w.forEach(function(q){return t(x,q)}),ge&&Ts(x,E),_}function k(x,p,m,y){if(typeof m=="object"&&m!==null&&m.type===sr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Vn:e:{for(var _=m.key,S=p;S!==null;){if(S.key===_){if(_=m.type,_===sr){if(S.tag===7){s(x,S.sibling),p=a(S,m.props.children),p.return=x,x=p;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===es&&sd(_)===S.type){s(x,S.sibling),p=a(S,m.props),p.ref=Hr(x,S,m),p.return=x,x=p;break e}s(x,S);break}else t(x,S);S=S.sibling}m.type===sr?(p=Us(m.props.children,x.mode,y,m.key),p.return=x,x=p):(y=ka(m.type,m.key,m.props,null,x.mode,y),y.ref=Hr(x,p,m),y.return=x,x=y)}return l(x);case tr:e:{for(S=m.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){s(x,p.sibling),p=a(p,m.children||[]),p.return=x,x=p;break e}else{s(x,p);break}else t(x,p);p=p.sibling}p=Zi(m,x.mode,y),p.return=x,x=p}return l(x);case es:return S=m._init,k(x,p,S(m._payload),y)}if(Qr(m))return v(x,p,m,y);if(Fr(m))return b(x,p,m,y);ra(x,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(s(x,p.sibling),p=a(p,m),p.return=x,x=p):(s(x,p),p=Xi(m,x.mode,y),p.return=x,x=p),l(x)):s(x,p)}return k}var br=gh(!0),xh=gh(!1),Fa=Ns(null),za=null,dr=null,Do=null;function Uo(){Do=dr=za=null}function Fo(e){var t=Fa.current;pe(Fa),e._currentValue=t}function Il(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function xr(e,t){za=e,Do=dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(Do!==e)if(e={context:e,memoizedValue:t,next:null},dr===null){if(za===null)throw Error(D(308));dr=e,za.dependencies={lanes:0,firstContext:e}}else dr=dr.next=e;return t}var Ls=null;function zo(e){Ls===null?Ls=[e]:Ls.push(e)}function yh(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,zo(t)):(s.next=a.next,a.next=s),t.interleaved=s,Vt(e,n)}function Vt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ts=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ms(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Vt(e,s)}return a=n.interleaved,a===null?(t.next=t,zo(n)):(t.next=a.next,a.next=t),n.interleaved=t,Vt(e,s)}function va(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Eo(e,s)}}function rd(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ba(e,t,s,n){var a=e.updateQueue;ts=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,u=o.next;o.next=null,l===null?i=u:l.next=u,l=o;var d=e.alternate;d!==null&&(d=d.updateQueue,c=d.lastBaseUpdate,c!==l&&(c===null?d.firstBaseUpdate=u:c.next=u,d.lastBaseUpdate=o))}if(i!==null){var h=a.baseState;l=0,d=u=o=null,c=i;do{var f=c.lane,g=c.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=e,b=c;switch(f=t,g=s,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(g,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,f=typeof v=="function"?v.call(g,h,f):v,f==null)break e;h=ve({},h,f);break e;case 2:ts=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[c]:f.push(c))}else g={eventTime:g,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},d===null?(u=d=g,o=h):d=d.next=g,l|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;f=c,c=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(o=h),a.baseState=o,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ws|=l,e.lanes=l,e.memoizedState=h}}function nd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(D(191,a));a.call(n)}}}var Dn={},Mt=Ns(Dn),kn=Ns(Dn),Sn=Ns(Dn);function $s(e){if(e===Dn)throw Error(D(174));return e}function Wo(e,t){switch(he(Sn,t),he(kn,e),he(Mt,Dn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xl(t,e)}pe(Mt),he(Mt,t)}function Nr(){pe(Mt),pe(kn),pe(Sn)}function wh(e){$s(Sn.current);var t=$s(Mt.current),s=xl(t,e.type);t!==s&&(he(kn,e),he(Mt,s))}function qo(e){kn.current===e&&(pe(Mt),pe(kn))}var xe=Ns(0);function Wa(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vi=[];function Ho(){for(var e=0;e<Vi.length;e++)Vi[e]._workInProgressVersionPrimary=null;Vi.length=0}var wa=Kt.ReactCurrentDispatcher,Gi=Kt.ReactCurrentBatchConfig,Bs=0,ye=null,Pe=null,Le=null,qa=!1,an=!1,En=0,r0=0;function Fe(){throw Error(D(321))}function Vo(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Et(e[s],t[s]))return!1;return!0}function Go(e,t,s,n,a,i){if(Bs=i,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=e===null||e.memoizedState===null?l0:o0,e=s(n,a),an){i=0;do{if(an=!1,En=0,25<=i)throw Error(D(301));i+=1,Le=Pe=null,t.updateQueue=null,wa.current=c0,e=s(n,a)}while(an)}if(wa.current=Ha,t=Pe!==null&&Pe.next!==null,Bs=0,Le=Pe=ye=null,qa=!1,t)throw Error(D(300));return e}function Ko(){var e=En!==0;return En=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ye.memoizedState=Le=e:Le=Le.next=e,Le}function yt(){if(Pe===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Le===null?ye.memoizedState:Le.next;if(t!==null)Le=t,Pe=e;else{if(e===null)throw Error(D(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Le===null?ye.memoizedState=Le=e:Le=Le.next=e}return Le}function Cn(e,t){return typeof t=="function"?t(e):t}function Ki(e){var t=yt(),s=t.queue;if(s===null)throw Error(D(311));s.lastRenderedReducer=e;var n=Pe,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=l=null,o=null,u=i;do{var d=u.lane;if((Bs&d)===d)o!==null&&(o=o.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};o===null?(c=o=h,l=n):o=o.next=h,ye.lanes|=d,Ws|=d}u=u.next}while(u!==null&&u!==i);o===null?l=n:o.next=c,Et(n,t.memoizedState)||(et=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=o,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,ye.lanes|=i,Ws|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ji(e){var t=yt(),s=t.queue;if(s===null)throw Error(D(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Et(i,t.memoizedState)||(et=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function jh(){}function bh(e,t){var s=ye,n=yt(),a=t(),i=!Et(n.memoizedState,a);if(i&&(n.memoizedState=a,et=!0),n=n.queue,Jo(kh.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||Le!==null&&Le.memoizedState.tag&1){if(s.flags|=2048,Pn(9,_h.bind(null,s,n,a,t),void 0,null),$e===null)throw Error(D(349));Bs&30||Nh(s,t,a)}return a}function Nh(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function _h(e,t,s,n){t.value=s,t.getSnapshot=n,Sh(t)&&Eh(e)}function kh(e,t,s){return s(function(){Sh(t)&&Eh(e)})}function Sh(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Et(e,s)}catch{return!0}}function Eh(e){var t=Vt(e,1);t!==null&&St(t,e,1,-1)}function ad(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:e},t.queue=e,e=e.dispatch=i0.bind(null,ye,e),[t.memoizedState,e]}function Pn(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Ch(){return yt().memoizedState}function ja(e,t,s,n){var a=Tt();ye.flags|=e,a.memoizedState=Pn(1|t,s,void 0,n===void 0?null:n)}function di(e,t,s,n){var a=yt();n=n===void 0?null:n;var i=void 0;if(Pe!==null){var l=Pe.memoizedState;if(i=l.destroy,n!==null&&Vo(n,l.deps)){a.memoizedState=Pn(t,s,i,n);return}}ye.flags|=e,a.memoizedState=Pn(1|t,s,i,n)}function id(e,t){return ja(8390656,8,e,t)}function Jo(e,t){return di(2048,8,e,t)}function Ph(e,t){return di(4,2,e,t)}function Th(e,t){return di(4,4,e,t)}function Rh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ah(e,t,s){return s=s!=null?s.concat([e]):null,di(4,4,Rh.bind(null,t,e),s)}function Qo(){}function Mh(e,t){var s=yt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Vo(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Oh(e,t){var s=yt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Vo(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Lh(e,t,s){return Bs&21?(Et(s,t)||(s=Fu(),ye.lanes|=s,Ws|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=s)}function n0(e,t){var s=ce;ce=s!==0&&4>s?s:4,e(!0);var n=Gi.transition;Gi.transition={};try{e(!1),t()}finally{ce=s,Gi.transition=n}}function $h(){return yt().memoizedState}function a0(e,t,s){var n=ps(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Ih(e))Dh(t,s);else if(s=yh(e,t,s,n),s!==null){var a=Ve();St(s,e,n,a),Uh(s,t,n)}}function i0(e,t,s){var n=ps(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ih(e))Dh(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,s);if(a.hasEagerState=!0,a.eagerState=c,Et(c,l)){var o=t.interleaved;o===null?(a.next=a,zo(t)):(a.next=o.next,o.next=a),t.interleaved=a;return}}catch{}finally{}s=yh(e,t,a,n),s!==null&&(a=Ve(),St(s,e,n,a),Uh(s,t,n))}}function Ih(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Dh(e,t){an=qa=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Uh(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Eo(e,s)}}var Ha={readContext:xt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},l0={readContext:xt,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:id,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ja(4194308,4,Rh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var s=Tt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Tt();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=a0.bind(null,ye,e),[n.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:ad,useDebugValue:Qo,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=ad(!1),t=e[0];return e=n0.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=ye,a=Tt();if(ge){if(s===void 0)throw Error(D(407));s=s()}else{if(s=t(),$e===null)throw Error(D(349));Bs&30||Nh(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,id(kh.bind(null,n,i,e),[e]),n.flags|=2048,Pn(9,_h.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Tt(),t=$e.identifierPrefix;if(ge){var s=zt,n=Ft;s=(n&~(1<<32-kt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=En++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=r0++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},o0={readContext:xt,useCallback:Mh,useContext:xt,useEffect:Jo,useImperativeHandle:Ah,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Oh,useReducer:Ki,useRef:Ch,useState:function(){return Ki(Cn)},useDebugValue:Qo,useDeferredValue:function(e){var t=yt();return Lh(t,Pe.memoizedState,e)},useTransition:function(){var e=Ki(Cn)[0],t=yt().memoizedState;return[e,t]},useMutableSource:jh,useSyncExternalStore:bh,useId:$h,unstable_isNewReconciler:!1},c0={readContext:xt,useCallback:Mh,useContext:xt,useEffect:Jo,useImperativeHandle:Ah,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Oh,useReducer:Ji,useRef:Ch,useState:function(){return Ji(Cn)},useDebugValue:Qo,useDeferredValue:function(e){var t=yt();return Pe===null?t.memoizedState=e:Lh(t,Pe.memoizedState,e)},useTransition:function(){var e=Ji(Cn)[0],t=yt().memoizedState;return[e,t]},useMutableSource:jh,useSyncExternalStore:bh,useId:$h,unstable_isNewReconciler:!1};function jt(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Dl(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:ve({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ui={isMounted:function(e){return(e=e._reactInternals)?Gs(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Ve(),a=ps(e),i=Wt(n,a);i.payload=t,s!=null&&(i.callback=s),t=ms(e,i,a),t!==null&&(St(t,e,a,n),va(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Ve(),a=ps(e),i=Wt(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=ms(e,i,a),t!==null&&(St(t,e,a,n),va(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ve(),n=ps(e),a=Wt(s,n);a.tag=2,t!=null&&(a.callback=t),t=ms(e,a,n),t!==null&&(St(t,e,n,s),va(t,e,n))}};function ld(e,t,s,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!jn(s,n)||!jn(a,i):!0}function Fh(e,t,s){var n=!1,a=ws,i=t.contextType;return typeof i=="object"&&i!==null?i=xt(i):(a=st(t)?Fs:qe.current,n=t.contextTypes,i=(n=n!=null)?wr(e,a):ws),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ui,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function od(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&ui.enqueueReplaceState(t,t.state,null)}function Ul(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Bo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=xt(i):(i=st(t)?Fs:qe.current,a.context=wr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dl(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ui.enqueueReplaceState(a,a.state,null),Ba(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function _r(e,t){try{var s="",n=t;do s+=If(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Qi(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Fl(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var d0=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,s){s=Wt(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Ga||(Ga=!0,Ql=n),Fl(e,t)},s}function Bh(e,t,s){s=Wt(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Fl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Fl(e,t),typeof n!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function cd(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new d0;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=_0.bind(null,e,t,s),t.then(e,e))}function dd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ud(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Wt(-1,1),t.tag=2,ms(s,t,1))),s.lanes|=1),e)}var u0=Kt.ReactCurrentOwner,et=!1;function He(e,t,s,n){t.child=e===null?xh(t,null,s,n):br(t,e.child,s,n)}function hd(e,t,s,n,a){s=s.render;var i=t.ref;return xr(t,a),n=Go(e,t,s,n,i,a),s=Ko(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gt(e,t,a)):(ge&&s&&Lo(t),t.flags|=1,He(e,t,n,a),t.child)}function md(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!nc(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,Wh(e,t,i,n,a)):(e=ka(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:jn,s(l,n)&&e.ref===t.ref)return Gt(e,t,a)}return t.flags|=1,e=gs(i,n),e.ref=t.ref,e.return=t,t.child=e}function Wh(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(jn(i,n)&&e.ref===t.ref)if(et=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Gt(e,t,a)}return zl(e,t,s,n,a)}function qh(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(hr,nt),nt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(hr,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,he(hr,nt),nt|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,he(hr,nt),nt|=n;return He(e,t,a,s),t.child}function Hh(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function zl(e,t,s,n,a){var i=st(s)?Fs:qe.current;return i=wr(t,i),xr(t,a),s=Go(e,t,s,n,i,a),n=Ko(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gt(e,t,a)):(ge&&n&&Lo(t),t.flags|=1,He(e,t,s,a),t.child)}function fd(e,t,s,n,a){if(st(s)){var i=!0;Ia(t)}else i=!1;if(xr(t,a),t.stateNode===null)ba(e,t),Fh(t,s,n),Ul(t,s,n,a),n=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var o=l.context,u=s.contextType;typeof u=="object"&&u!==null?u=xt(u):(u=st(s)?Fs:qe.current,u=wr(t,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==n||o!==u)&&od(t,l,n,u),ts=!1;var f=t.memoizedState;l.state=f,Ba(t,n,l,a),o=t.memoizedState,c!==n||f!==o||tt.current||ts?(typeof d=="function"&&(Dl(t,s,d,n),o=t.memoizedState),(c=ts||ld(t,s,c,n,f,o,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),l.props=n,l.state=o,l.context=u,n=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,vh(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:jt(t.type,c),l.props=u,h=t.pendingProps,f=l.context,o=s.contextType,typeof o=="object"&&o!==null?o=xt(o):(o=st(s)?Fs:qe.current,o=wr(t,o));var g=s.getDerivedStateFromProps;(d=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||f!==o)&&od(t,l,n,o),ts=!1,f=t.memoizedState,l.state=f,Ba(t,n,l,a);var v=t.memoizedState;c!==h||f!==v||tt.current||ts?(typeof g=="function"&&(Dl(t,s,g,n),v=t.memoizedState),(u=ts||ld(t,s,u,n,f,v,o)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,v,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,v,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),l.props=n,l.state=v,l.context=o,n=u):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Bl(e,t,s,n,i,a)}function Bl(e,t,s,n,a,i){Hh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&Zc(t,s,!1),Gt(e,t,i);n=t.stateNode,u0.current=t;var c=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=br(t,e.child,null,i),t.child=br(t,null,c,i)):He(e,t,c,i),t.memoizedState=n.state,a&&Zc(t,s,!0),t.child}function Vh(e){var t=e.stateNode;t.pendingContext?Xc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xc(e,t.context,!1),Wo(e,t.containerInfo)}function pd(e,t,s,n,a){return jr(),Io(a),t.flags|=256,He(e,t,s,n),t.child}var Wl={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gh(e,t,s){var n=t.pendingProps,a=xe.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),he(xe,a&1),e===null)return $l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=fi(l,n,0,null),e=Us(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ql(s),t.memoizedState=Wl,e):Yo(t,l));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return h0(e,t,l,n,c,a,s);if(i){i=n.fallback,l=t.mode,a=e.child,c=a.sibling;var o={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=gs(a,o),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=gs(c,i):(i=Us(i,l,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?ql(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=Wl,n}return i=e.child,e=i.sibling,n=gs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Yo(e,t){return t=fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,s,n){return n!==null&&Io(n),br(t,e.child,null,s),e=Yo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h0(e,t,s,n,a,i,l){if(s)return t.flags&256?(t.flags&=-257,n=Qi(Error(D(422))),na(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=fi({mode:"visible",children:n.children},a,0,null),i=Us(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&br(t,e.child,null,l),t.child.memoizedState=ql(l),t.memoizedState=Wl,i);if(!(t.mode&1))return na(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(D(419)),n=Qi(i,n,void 0),na(e,t,l,n)}if(c=(l&e.childLanes)!==0,et||c){if(n=$e,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Vt(e,a),St(n,e,a,-1))}return rc(),n=Qi(Error(D(421))),na(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=k0.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,it=hs(a.nextSibling),ot=t,ge=!0,_t=null,e!==null&&(ht[mt++]=Ft,ht[mt++]=zt,ht[mt++]=zs,Ft=e.id,zt=e.overflow,zs=t),t=Yo(t,n.children),t.flags|=4096,t)}function gd(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Il(e.return,t,s)}function Yi(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Kh(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(He(e,t,n.children,s),n=xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gd(e,s,t);else if(e.tag===19)gd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(he(xe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Wa(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Yi(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wa(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Yi(t,!0,s,null,i);break;case"together":Yi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ws|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,s=gs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=gs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function m0(e,t,s){switch(t.tag){case 3:Vh(t),jr();break;case 5:wh(t);break;case 1:st(t.type)&&Ia(t);break;case 4:Wo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;he(Fa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(he(xe,xe.current&1),t.flags|=128,null):s&t.child.childLanes?Gh(e,t,s):(he(xe,xe.current&1),e=Gt(e,t,s),e!==null?e.sibling:null);he(xe,xe.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Kh(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),he(xe,xe.current),n)break;return null;case 22:case 23:return t.lanes=0,qh(e,t,s)}return Gt(e,t,s)}var Jh,Hl,Qh,Yh;Jh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Hl=function(){};Qh=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,$s(Mt.current);var i=null;switch(s){case"input":a=ml(e,a),n=ml(e,n),i=[];break;case"select":a=ve({},a,{value:void 0}),n=ve({},n,{value:void 0}),i=[];break;case"textarea":a=gl(e,a),n=gl(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=La)}yl(s,n);var l;s=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var o=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&o!==c&&(o!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(s||(s={}),s[l]=o[l])}else s||(i||(i=[]),i.push(u,s)),s=o;else u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(i=i||[]).push(u,o)):u==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(u,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fn.hasOwnProperty(u)?(o!=null&&u==="onScroll"&&fe("scroll",e),i||c===o||(i=[])):(i=i||[]).push(u,o))}s&&(i=i||[]).push("style",s);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Yh=function(e,t,s,n){s!==n&&(t.flags|=4)};function Vr(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function f0(e,t,s){var n=t.pendingProps;switch($o(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return st(t.type)&&$a(),ze(t),null;case 3:return n=t.stateNode,Nr(),pe(tt),pe(qe),Ho(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(Zl(_t),_t=null))),Hl(e,t),ze(t),null;case 5:qo(t);var a=$s(Sn.current);if(s=t.type,e!==null&&t.stateNode!=null)Qh(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return ze(t),null}if(e=$s(Mt.current),sa(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Rt]=t,n[_n]=i,e=(t.mode&1)!==0,s){case"dialog":fe("cancel",n),fe("close",n);break;case"iframe":case"object":case"embed":fe("load",n);break;case"video":case"audio":for(a=0;a<Xr.length;a++)fe(Xr[a],n);break;case"source":fe("error",n);break;case"img":case"image":case"link":fe("error",n),fe("load",n);break;case"details":fe("toggle",n);break;case"input":kc(n,i),fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},fe("invalid",n);break;case"textarea":Ec(n,i),fe("invalid",n)}yl(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&ta(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&ta(n.textContent,c,e),a=["children",""+c]):fn.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&fe("scroll",n)}switch(s){case"input":Gn(n),Sc(n,i,!0);break;case"textarea":Gn(n),Cc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=La)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ku(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),s==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[Rt]=t,e[_n]=n,Jh(e,t,!1,!1),t.stateNode=e;e:{switch(l=vl(s,n),s){case"dialog":fe("cancel",e),fe("close",e),a=n;break;case"iframe":case"object":case"embed":fe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Xr.length;a++)fe(Xr[a],e);a=n;break;case"source":fe("error",e),a=n;break;case"img":case"image":case"link":fe("error",e),fe("load",e),a=n;break;case"details":fe("toggle",e),a=n;break;case"input":kc(e,n),a=ml(e,n),fe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ve({},n,{value:void 0}),fe("invalid",e);break;case"textarea":Ec(e,n),a=gl(e,n),fe("invalid",e);break;default:a=n}yl(s,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var o=c[i];i==="style"?Cu(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Su(e,o)):i==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&pn(e,o):typeof o=="number"&&pn(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fn.hasOwnProperty(i)?o!=null&&i==="onScroll"&&fe("scroll",e):o!=null&&jo(e,i,o,l))}switch(s){case"input":Gn(e),Sc(e,n,!1);break;case"textarea":Gn(e),Cc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+vs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?mr(e,!!n.multiple,i,!1):n.defaultValue!=null&&mr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=La)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)Yh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(s=$s(Sn.current),$s(Mt.current),sa(t)){if(n=t.stateNode,s=t.memoizedProps,n[Rt]=t,(i=n.nodeValue!==s)&&(e=ot,e!==null))switch(e.tag){case 3:ta(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ta(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Rt]=t,t.stateNode=n}return ze(t),null;case 13:if(pe(xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&it!==null&&t.mode&1&&!(t.flags&128))ph(),jr(),t.flags|=98560,i=!1;else if(i=sa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Rt]=t}else jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),i=!1}else _t!==null&&(Zl(_t),_t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Te===0&&(Te=3):rc())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Nr(),Hl(e,t),e===null&&bn(t.stateNode.containerInfo),ze(t),null;case 10:return Fo(t.type._context),ze(t),null;case 17:return st(t.type)&&$a(),ze(t),null;case 19:if(pe(xe),i=t.memoizedState,i===null)return ze(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Vr(i,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Wa(e),l!==null){for(t.flags|=128,Vr(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return he(xe,xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&ke()>kr&&(t.flags|=128,n=!0,Vr(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wa(l),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Vr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ge)return ze(t),null}else 2*ke()-i.renderingStartTime>kr&&s!==1073741824&&(t.flags|=128,n=!0,Vr(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ke(),t.sibling=null,s=xe.current,he(xe,n?s&1|2:s&1),t):(ze(t),null);case 22:case 23:return sc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nt&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function p0(e,t){switch($o(t),t.tag){case 1:return st(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nr(),pe(tt),pe(qe),Ho(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qo(t),null;case 13:if(pe(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(xe),null;case 4:return Nr(),null;case 10:return Fo(t.type._context),null;case 22:case 23:return sc(),null;case 24:return null;default:return null}}var aa=!1,We=!1,g0=typeof WeakSet=="function"?WeakSet:Set,V=null;function ur(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){je(e,t,n)}else s.current=null}function Vl(e,t,s){try{s()}catch(n){je(e,t,n)}}var xd=!1;function x0(e,t){if(Pl=Aa,e=sh(),Oo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,c=-1,o=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==s||a!==0&&h.nodeType!==3||(c=l+a),h!==i||n!==0&&h.nodeType!==3||(o=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===e)break t;if(f===s&&++u===a&&(c=l),f===i&&++d===n&&(o=l),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}s=c===-1||o===-1?null:{start:c,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(Tl={focusedElem:e,selectionRange:s},Aa=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,k=v.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:jt(t.type,b),k);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(y){je(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return v=xd,xd=!1,v}function ln(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Vl(t,s,i)}a=a.next}while(a!==n)}}function hi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Gl(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Xh(e){var t=e.alternate;t!==null&&(e.alternate=null,Xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[_n],delete t[Ml],delete t[Zp],delete t[e0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zh(e){return e.tag===5||e.tag===3||e.tag===4}function yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kl(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=La));else if(n!==4&&(e=e.child,e!==null))for(Kl(e,t,s),e=e.sibling;e!==null;)Kl(e,t,s),e=e.sibling}function Jl(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Jl(e,t,s),e=e.sibling;e!==null;)Jl(e,t,s),e=e.sibling}var Ie=null,bt=!1;function Xt(e,t,s){for(s=s.child;s!==null;)em(e,t,s),s=s.sibling}function em(e,t,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(ni,s)}catch{}switch(s.tag){case 5:We||ur(s,t);case 6:var n=Ie,a=bt;Ie=null,Xt(e,t,s),Ie=n,bt=a,Ie!==null&&(bt?(e=Ie,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ie.removeChild(s.stateNode));break;case 18:Ie!==null&&(bt?(e=Ie,s=s.stateNode,e.nodeType===8?qi(e.parentNode,s):e.nodeType===1&&qi(e,s),vn(e)):qi(Ie,s.stateNode));break;case 4:n=Ie,a=bt,Ie=s.stateNode.containerInfo,bt=!0,Xt(e,t,s),Ie=n,bt=a;break;case 0:case 11:case 14:case 15:if(!We&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Vl(s,t,l),a=a.next}while(a!==n)}Xt(e,t,s);break;case 1:if(!We&&(ur(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(c){je(s,t,c)}Xt(e,t,s);break;case 21:Xt(e,t,s);break;case 22:s.mode&1?(We=(n=We)||s.memoizedState!==null,Xt(e,t,s),We=n):Xt(e,t,s);break;default:Xt(e,t,s)}}function vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new g0),t.forEach(function(n){var a=S0.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function vt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Ie=c.stateNode,bt=!1;break e;case 3:Ie=c.stateNode.containerInfo,bt=!0;break e;case 4:Ie=c.stateNode.containerInfo,bt=!0;break e}c=c.return}if(Ie===null)throw Error(D(160));em(i,l,a),Ie=null,bt=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(u){je(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tm(t,e),t=t.sibling}function tm(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),Pt(e),n&4){try{ln(3,e,e.return),hi(3,e)}catch(b){je(e,e.return,b)}try{ln(5,e,e.return)}catch(b){je(e,e.return,b)}}break;case 1:vt(t,e),Pt(e),n&512&&s!==null&&ur(s,s.return);break;case 5:if(vt(t,e),Pt(e),n&512&&s!==null&&ur(s,s.return),e.flags&32){var a=e.stateNode;try{pn(a,"")}catch(b){je(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Nu(a,i),vl(c,l);var u=vl(c,i);for(l=0;l<o.length;l+=2){var d=o[l],h=o[l+1];d==="style"?Cu(a,h):d==="dangerouslySetInnerHTML"?Su(a,h):d==="children"?pn(a,h):jo(a,d,h,u)}switch(c){case"input":fl(a,i);break;case"textarea":_u(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?mr(a,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?mr(a,!!i.multiple,i.defaultValue,!0):mr(a,!!i.multiple,i.multiple?[]:"",!1))}a[_n]=i}catch(b){je(e,e.return,b)}}break;case 6:if(vt(t,e),Pt(e),n&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){je(e,e.return,b)}}break;case 3:if(vt(t,e),Pt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{vn(t.containerInfo)}catch(b){je(e,e.return,b)}break;case 4:vt(t,e),Pt(e);break;case 13:vt(t,e),Pt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ec=ke())),n&4&&vd(e);break;case 22:if(d=s!==null&&s.memoizedState!==null,e.mode&1?(We=(u=We)||d,vt(t,e),We=u):vt(t,e),Pt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(V=e,d=e.child;d!==null;){for(h=V=d;V!==null;){switch(f=V,g=f.child,f.tag){case 0:case 11:case 14:case 15:ln(4,f,f.return);break;case 1:ur(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,s=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){je(n,s,b)}}break;case 5:ur(f,f.return);break;case 22:if(f.memoizedState!==null){jd(h);continue}}g!==null?(g.return=f,V=g):jd(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=h.stateNode,o=h.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Eu("display",l))}catch(b){je(e,e.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){je(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vt(t,e),Pt(e),n&4&&vd(e);break;case 21:break;default:vt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Zh(s)){var n=s;break e}s=s.return}throw Error(D(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(pn(a,""),n.flags&=-33);var i=yd(e);Jl(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=yd(e);Kl(e,c,l);break;default:throw Error(D(161))}}catch(o){je(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y0(e,t,s){V=e,sm(e)}function sm(e,t,s){for(var n=(e.mode&1)!==0;V!==null;){var a=V,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||aa;if(!l){var c=a.alternate,o=c!==null&&c.memoizedState!==null||We;c=aa;var u=We;if(aa=l,(We=o)&&!u)for(V=a;V!==null;)l=V,o=l.child,l.tag===22&&l.memoizedState!==null?bd(a):o!==null?(o.return=l,V=o):bd(a);for(;i!==null;)V=i,sm(i),i=i.sibling;V=a,aa=c,We=u}wd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,V=i):wd(e)}}function wd(e){for(;V!==null;){var t=V;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||hi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!We)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:jt(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&nd(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}nd(t,l,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}We||t.flags&512&&Gl(t)}catch(f){je(t,t.return,f)}}if(t===e){V=null;break}if(s=t.sibling,s!==null){s.return=t.return,V=s;break}V=t.return}}function jd(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var s=t.sibling;if(s!==null){s.return=t.return,V=s;break}V=t.return}}function bd(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{hi(4,t)}catch(o){je(t,s,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(o){je(t,a,o)}}var i=t.return;try{Gl(t)}catch(o){je(t,i,o)}break;case 5:var l=t.return;try{Gl(t)}catch(o){je(t,l,o)}}}catch(o){je(t,t.return,o)}if(t===e){V=null;break}var c=t.sibling;if(c!==null){c.return=t.return,V=c;break}V=t.return}}var v0=Math.ceil,Va=Kt.ReactCurrentDispatcher,Xo=Kt.ReactCurrentOwner,pt=Kt.ReactCurrentBatchConfig,ae=0,$e=null,Ce=null,De=0,nt=0,hr=Ns(0),Te=0,Tn=null,Ws=0,mi=0,Zo=0,on=null,Xe=null,ec=0,kr=1/0,It=null,Ga=!1,Ql=null,fs=null,ia=!1,ls=null,Ka=0,cn=0,Yl=null,Na=-1,_a=0;function Ve(){return ae&6?ke():Na!==-1?Na:Na=ke()}function ps(e){return e.mode&1?ae&2&&De!==0?De&-De:s0.transition!==null?(_a===0&&(_a=Fu()),_a):(e=ce,e!==0||(e=window.event,e=e===void 0?16:Gu(e.type)),e):1}function St(e,t,s,n){if(50<cn)throw cn=0,Yl=null,Error(D(185));Ln(e,s,n),(!(ae&2)||e!==$e)&&(e===$e&&(!(ae&2)&&(mi|=s),Te===4&&ns(e,De)),rt(e,n),s===1&&ae===0&&!(t.mode&1)&&(kr=ke()+500,ci&&_s()))}function rt(e,t){var s=e.callbackNode;sp(e,t);var n=Ra(e,e===$e?De:0);if(n===0)s!==null&&Rc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&Rc(s),t===1)e.tag===0?t0(Nd.bind(null,e)):hh(Nd.bind(null,e)),Yp(function(){!(ae&6)&&_s()}),s=null;else{switch(zu(n)){case 1:s=So;break;case 4:s=Du;break;case 16:s=Ta;break;case 536870912:s=Uu;break;default:s=Ta}s=dm(s,rm.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function rm(e,t){if(Na=-1,_a=0,ae&6)throw Error(D(327));var s=e.callbackNode;if(yr()&&e.callbackNode!==s)return null;var n=Ra(e,e===$e?De:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ja(e,n);else{t=n;var a=ae;ae|=2;var i=am();($e!==e||De!==t)&&(It=null,kr=ke()+500,Ds(e,t));do try{b0();break}catch(c){nm(e,c)}while(!0);Uo(),Va.current=i,ae=a,Ce!==null?t=0:($e=null,De=0,t=Te)}if(t!==0){if(t===2&&(a=_l(e),a!==0&&(n=a,t=Xl(e,a))),t===1)throw s=Tn,Ds(e,0),ns(e,n),rt(e,ke()),s;if(t===6)ns(e,n);else{if(a=e.current.alternate,!(n&30)&&!w0(a)&&(t=Ja(e,n),t===2&&(i=_l(e),i!==0&&(n=i,t=Xl(e,i))),t===1))throw s=Tn,Ds(e,0),ns(e,n),rt(e,ke()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:Rs(e,Xe,It);break;case 3:if(ns(e,n),(n&130023424)===n&&(t=ec+500-ke(),10<t)){if(Ra(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ve(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Al(Rs.bind(null,e,Xe,It),t);break}Rs(e,Xe,It);break;case 4:if(ns(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-kt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*v0(n/1960))-n,10<n){e.timeoutHandle=Al(Rs.bind(null,e,Xe,It),n);break}Rs(e,Xe,It);break;case 5:Rs(e,Xe,It);break;default:throw Error(D(329))}}}return rt(e,ke()),e.callbackNode===s?rm.bind(null,e):null}function Xl(e,t){var s=on;return e.current.memoizedState.isDehydrated&&(Ds(e,t).flags|=256),e=Ja(e,t),e!==2&&(t=Xe,Xe=s,t!==null&&Zl(t)),e}function Zl(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function w0(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Et(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ns(e,t){for(t&=~Zo,t&=~mi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-kt(t),n=1<<s;e[s]=-1,t&=~n}}function Nd(e){if(ae&6)throw Error(D(327));yr();var t=Ra(e,0);if(!(t&1))return rt(e,ke()),null;var s=Ja(e,t);if(e.tag!==0&&s===2){var n=_l(e);n!==0&&(t=n,s=Xl(e,n))}if(s===1)throw s=Tn,Ds(e,0),ns(e,t),rt(e,ke()),s;if(s===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rs(e,Xe,It),rt(e,ke()),null}function tc(e,t){var s=ae;ae|=1;try{return e(t)}finally{ae=s,ae===0&&(kr=ke()+500,ci&&_s())}}function qs(e){ls!==null&&ls.tag===0&&!(ae&6)&&yr();var t=ae;ae|=1;var s=pt.transition,n=ce;try{if(pt.transition=null,ce=1,e)return e()}finally{ce=n,pt.transition=s,ae=t,!(ae&6)&&_s()}}function sc(){nt=hr.current,pe(hr)}function Ds(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Qp(s)),Ce!==null)for(s=Ce.return;s!==null;){var n=s;switch($o(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$a();break;case 3:Nr(),pe(tt),pe(qe),Ho();break;case 5:qo(n);break;case 4:Nr();break;case 13:pe(xe);break;case 19:pe(xe);break;case 10:Fo(n.type._context);break;case 22:case 23:sc()}s=s.return}if($e=e,Ce=e=gs(e.current,null),De=nt=t,Te=0,Tn=null,Zo=mi=Ws=0,Xe=on=null,Ls!==null){for(t=0;t<Ls.length;t++)if(s=Ls[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}Ls=null}return e}function nm(e,t){do{var s=Ce;try{if(Uo(),wa.current=Ha,qa){for(var n=ye.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}qa=!1}if(Bs=0,Le=Pe=ye=null,an=!1,En=0,Xo.current=null,s===null||s.return===null){Te=1,Tn=t,Ce=null;break}e:{var i=e,l=s.return,c=s,o=t;if(t=De,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=o,d=c,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=dd(l);if(g!==null){g.flags&=-257,ud(g,l,c,i,t),g.mode&1&&cd(i,u,t),t=g,o=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(o),t.updateQueue=b}else v.add(o);break e}else{if(!(t&1)){cd(i,u,t),rc();break e}o=Error(D(426))}}else if(ge&&c.mode&1){var k=dd(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ud(k,l,c,i,t),Io(_r(o,c));break e}}i=o=_r(o,c),Te!==4&&(Te=2),on===null?on=[i]:on.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=zh(i,o,t);rd(i,x);break e;case 1:c=o;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(fs===null||!fs.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=Bh(i,c,t);rd(i,y);break e}}i=i.return}while(i!==null)}lm(s)}catch(_){t=_,Ce===s&&s!==null&&(Ce=s=s.return);continue}break}while(!0)}function am(){var e=Va.current;return Va.current=Ha,e===null?Ha:e}function rc(){(Te===0||Te===3||Te===2)&&(Te=4),$e===null||!(Ws&268435455)&&!(mi&268435455)||ns($e,De)}function Ja(e,t){var s=ae;ae|=2;var n=am();($e!==e||De!==t)&&(It=null,Ds(e,t));do try{j0();break}catch(a){nm(e,a)}while(!0);if(Uo(),ae=s,Va.current=n,Ce!==null)throw Error(D(261));return $e=null,De=0,Te}function j0(){for(;Ce!==null;)im(Ce)}function b0(){for(;Ce!==null&&!Gf();)im(Ce)}function im(e){var t=cm(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?lm(e):Ce=t,Xo.current=null}function lm(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=p0(s,t),s!==null){s.flags&=32767,Ce=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Ce=null;return}}else if(s=f0(s,t,nt),s!==null){Ce=s;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Te===0&&(Te=5)}function Rs(e,t,s){var n=ce,a=pt.transition;try{pt.transition=null,ce=1,N0(e,t,s,n)}finally{pt.transition=a,ce=n}return null}function N0(e,t,s,n){do yr();while(ls!==null);if(ae&6)throw Error(D(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(rp(e,i),e===$e&&(Ce=$e=null,De=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ia||(ia=!0,dm(Ta,function(){return yr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=pt.transition,pt.transition=null;var l=ce;ce=1;var c=ae;ae|=4,Xo.current=null,x0(e,s),tm(s,e),Wp(Tl),Aa=!!Pl,Tl=Pl=null,e.current=s,y0(s),Kf(),ae=c,ce=l,pt.transition=i}else e.current=s;if(ia&&(ia=!1,ls=e,Ka=a),i=e.pendingLanes,i===0&&(fs=null),Yf(s.stateNode),rt(e,ke()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ga)throw Ga=!1,e=Ql,Ql=null,e;return Ka&1&&e.tag!==0&&yr(),i=e.pendingLanes,i&1?e===Yl?cn++:(cn=0,Yl=e):cn=0,_s(),null}function yr(){if(ls!==null){var e=zu(Ka),t=pt.transition,s=ce;try{if(pt.transition=null,ce=16>e?16:e,ls===null)var n=!1;else{if(e=ls,ls=null,Ka=0,ae&6)throw Error(D(331));var a=ae;for(ae|=4,V=e.current;V!==null;){var i=V,l=i.child;if(V.flags&16){var c=i.deletions;if(c!==null){for(var o=0;o<c.length;o++){var u=c[o];for(V=u;V!==null;){var d=V;switch(d.tag){case 0:case 11:case 15:ln(8,d,i)}var h=d.child;if(h!==null)h.return=d,V=h;else for(;V!==null;){d=V;var f=d.sibling,g=d.return;if(Xh(d),d===u){V=null;break}if(f!==null){f.return=g,V=f;break}V=g}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}V=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,V=l;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ln(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,V=x;break e}V=i.return}}var p=e.current;for(V=p;V!==null;){l=V;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,V=m;else e:for(l=p;V!==null;){if(c=V,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:hi(9,c)}}catch(_){je(c,c.return,_)}if(c===l){V=null;break e}var y=c.sibling;if(y!==null){y.return=c.return,V=y;break e}V=c.return}}if(ae=a,_s(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(ni,e)}catch{}n=!0}return n}finally{ce=s,pt.transition=t}}return!1}function _d(e,t,s){t=_r(s,t),t=zh(e,t,1),e=ms(e,t,1),t=Ve(),e!==null&&(Ln(e,1,t),rt(e,t))}function je(e,t,s){if(e.tag===3)_d(e,e,s);else for(;t!==null;){if(t.tag===3){_d(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fs===null||!fs.has(n))){e=_r(s,e),e=Bh(t,e,1),t=ms(t,e,1),e=Ve(),t!==null&&(Ln(t,1,e),rt(t,e));break}}t=t.return}}function _0(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&s,$e===e&&(De&s)===s&&(Te===4||Te===3&&(De&130023424)===De&&500>ke()-ec?Ds(e,0):Zo|=s),rt(e,t)}function om(e,t){t===0&&(e.mode&1?(t=Qn,Qn<<=1,!(Qn&130023424)&&(Qn=4194304)):t=1);var s=Ve();e=Vt(e,t),e!==null&&(Ln(e,t,s),rt(e,s))}function k0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),om(e,s)}function S0(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),om(e,s)}var cm;cm=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return et=!1,m0(e,t,s);et=!!(e.flags&131072)}else et=!1,ge&&t.flags&1048576&&mh(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ba(e,t),e=t.pendingProps;var a=wr(t,qe.current);xr(t,s),a=Go(null,t,n,e,a,s);var i=Ko();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(n)?(i=!0,Ia(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Bo(t),a.updater=ui,t.stateNode=a,a._reactInternals=t,Ul(t,n,e,s),t=Bl(null,t,n,!0,i,s)):(t.tag=0,ge&&i&&Lo(t),He(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(ba(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=C0(n),e=jt(n,e),a){case 0:t=zl(null,t,n,e,s);break e;case 1:t=fd(null,t,n,e,s);break e;case 11:t=hd(null,t,n,e,s);break e;case 14:t=md(null,t,n,jt(n.type,e),s);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jt(n,a),zl(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jt(n,a),fd(e,t,n,a,s);case 3:e:{if(Vh(t),e===null)throw Error(D(387));n=t.pendingProps,i=t.memoizedState,a=i.element,vh(e,t),Ba(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=_r(Error(D(423)),t),t=pd(e,t,n,s,a);break e}else if(n!==a){a=_r(Error(D(424)),t),t=pd(e,t,n,s,a);break e}else for(it=hs(t.stateNode.containerInfo.firstChild),ot=t,ge=!0,_t=null,s=xh(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(jr(),n===a){t=Gt(e,t,s);break e}He(e,t,n,s)}t=t.child}return t;case 5:return wh(t),e===null&&$l(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Rl(n,a)?l=null:i!==null&&Rl(n,i)&&(t.flags|=32),Hh(e,t),He(e,t,l,s),t.child;case 6:return e===null&&$l(t),null;case 13:return Gh(e,t,s);case 4:return Wo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=br(t,null,n,s):He(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jt(n,a),hd(e,t,n,a,s);case 7:return He(e,t,t.pendingProps,s),t.child;case 8:return He(e,t,t.pendingProps.children,s),t.child;case 12:return He(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,he(Fa,n._currentValue),n._currentValue=l,i!==null)if(Et(i.value,l)){if(i.children===a.children&&!tt.current){t=Gt(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var o=c.firstContext;o!==null;){if(o.context===n){if(i.tag===1){o=Wt(-1,s&-s),o.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?o.next=o:(o.next=d.next,d.next=o),u.pending=o}}i.lanes|=s,o=i.alternate,o!==null&&(o.lanes|=s),Il(i.return,s,t),c.lanes|=s;break}o=o.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Il(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}He(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,xr(t,s),a=xt(a),n=n(a),t.flags|=1,He(e,t,n,s),t.child;case 14:return n=t.type,a=jt(n,t.pendingProps),a=jt(n.type,a),md(e,t,n,a,s);case 15:return Wh(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jt(n,a),ba(e,t),t.tag=1,st(n)?(e=!0,Ia(t)):e=!1,xr(t,s),Fh(t,n,a),Ul(t,n,a,s),Bl(null,t,n,!0,e,s);case 19:return Kh(e,t,s);case 22:return qh(e,t,s)}throw Error(D(156,t.tag))};function dm(e,t){return Iu(e,t)}function E0(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,s,n){return new E0(e,t,s,n)}function nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function C0(e){if(typeof e=="function")return nc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===No)return 11;if(e===_o)return 14}return 2}function gs(e,t){var s=e.alternate;return s===null?(s=ft(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ka(e,t,s,n,a,i){var l=2;if(n=e,typeof e=="function")nc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case sr:return Us(s.children,a,i,t);case bo:l=8,a|=8;break;case cl:return e=ft(12,s,t,a|2),e.elementType=cl,e.lanes=i,e;case dl:return e=ft(13,s,t,a),e.elementType=dl,e.lanes=i,e;case ul:return e=ft(19,s,t,a),e.elementType=ul,e.lanes=i,e;case wu:return fi(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yu:l=10;break e;case vu:l=9;break e;case No:l=11;break e;case _o:l=14;break e;case es:l=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=ft(l,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Us(e,t,s,n){return e=ft(7,e,n,t),e.lanes=s,e}function fi(e,t,s,n){return e=ft(22,e,n,t),e.elementType=wu,e.lanes=s,e.stateNode={isHidden:!1},e}function Xi(e,t,s){return e=ft(6,e,null,t),e.lanes=s,e}function Zi(e,t,s){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P0(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ac(e,t,s,n,a,i,l,c,o){return e=new P0(e,t,s,c,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ft(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(i),e}function T0(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function um(e){if(!e)return ws;e=e._reactInternals;e:{if(Gs(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var s=e.type;if(st(s))return uh(e,s,t)}return t}function hm(e,t,s,n,a,i,l,c,o){return e=ac(s,n,!0,e,a,i,l,c,o),e.context=um(null),s=e.current,n=Ve(),a=ps(s),i=Wt(n,a),i.callback=t??null,ms(s,i,a),e.current.lanes=a,Ln(e,a,n),rt(e,n),e}function pi(e,t,s,n){var a=t.current,i=Ve(),l=ps(a);return s=um(s),t.context===null?t.context=s:t.pendingContext=s,t=Wt(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ms(a,t,l),e!==null&&(St(e,a,l,i),va(e,a,l)),l}function Qa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ic(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function R0(){return null}var mm=typeof reportError=="function"?reportError:function(e){console.error(e)};function lc(e){this._internalRoot=e}gi.prototype.render=lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));pi(e,t,null,null)};gi.prototype.unmount=lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qs(function(){pi(null,e,null,null)}),t[Ht]=null}};function gi(e){this._internalRoot=e}gi.prototype.unstable_scheduleHydration=function(e){if(e){var t=qu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<rs.length&&t!==0&&t<rs[s].priority;s++);rs.splice(s,0,e),s===0&&Vu(e)}};function oc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sd(){}function A0(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Qa(l);i.call(u)}}var l=hm(t,n,e,0,null,!1,!1,"",Sd);return e._reactRootContainer=l,e[Ht]=l.current,bn(e.nodeType===8?e.parentNode:e),qs(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=Qa(o);c.call(u)}}var o=ac(e,0,!1,null,null,!1,!1,"",Sd);return e._reactRootContainer=o,e[Ht]=o.current,bn(e.nodeType===8?e.parentNode:e),qs(function(){pi(t,o,s,n)}),o}function yi(e,t,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var c=a;a=function(){var o=Qa(l);c.call(o)}}pi(t,l,e,a)}else l=A0(s,t,e,a,n);return Qa(l)}Bu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Yr(t.pendingLanes);s!==0&&(Eo(t,s|1),rt(t,ke()),!(ae&6)&&(kr=ke()+500,_s()))}break;case 13:qs(function(){var n=Vt(e,1);if(n!==null){var a=Ve();St(n,e,1,a)}}),ic(e,1)}};Co=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var s=Ve();St(t,e,134217728,s)}ic(e,134217728)}};Wu=function(e){if(e.tag===13){var t=ps(e),s=Vt(e,t);if(s!==null){var n=Ve();St(s,e,t,n)}ic(e,t)}};qu=function(){return ce};Hu=function(e,t){var s=ce;try{return ce=e,t()}finally{ce=s}};jl=function(e,t,s){switch(t){case"input":if(fl(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=oi(n);if(!a)throw Error(D(90));bu(n),fl(n,a)}}}break;case"textarea":_u(e,s);break;case"select":t=s.value,t!=null&&mr(e,!!s.multiple,t,!1)}};Ru=tc;Au=qs;var M0={usingClientEntryPoint:!1,Events:[In,ir,oi,Pu,Tu,tc]},Gr={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lu(e),e===null?null:e.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||R0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{ni=la.inject(O0),At=la}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M0;dt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oc(t))throw Error(D(200));return T0(e,t,null,s)};dt.createRoot=function(e,t){if(!oc(e))throw Error(D(299));var s=!1,n="",a=mm;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ac(e,1,!1,null,null,s,!1,n,a),e[Ht]=t.current,bn(e.nodeType===8?e.parentNode:e),new lc(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Lu(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return qs(e)};dt.hydrate=function(e,t,s){if(!xi(t))throw Error(D(200));return yi(null,e,t,!0,s)};dt.hydrateRoot=function(e,t,s){if(!oc(e))throw Error(D(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=mm;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=hm(t,null,e,1,s??null,a,!1,i,l),e[Ht]=t.current,bn(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new gi(t)};dt.render=function(e,t,s){if(!xi(t))throw Error(D(200));return yi(null,e,t,!1,s)};dt.unmountComponentAtNode=function(e){if(!xi(e))throw Error(D(40));return e._reactRootContainer?(qs(function(){yi(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};dt.unstable_batchedUpdates=tc;dt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!xi(s))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return yi(e,t,s,!1,n)};dt.version="18.3.1-next-f1338f8080-20240426";function fm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fm)}catch(e){console.error(e)}}fm(),fu.exports=dt;var L0=fu.exports,pm,Ed=L0;pm=Ed.createRoot,Ed.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Rn.apply(this,arguments)}var os;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(os||(os={}));const Cd="popstate";function $0(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:l,hash:c}=n.location;return eo("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Ya(a)}return D0(t,s,null,e)}function Se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I0(){return Math.random().toString(36).substr(2,8)}function Pd(e,t){return{usr:e.state,key:e.key,idx:t}}function eo(e,t,s,n){return s===void 0&&(s=null),Rn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rr(t):t,{state:s,key:t&&t.key||n||I0()})}function Ya(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function D0(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,c=os.Pop,o=null,u=d();u==null&&(u=0,l.replaceState(Rn({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function h(){c=os.Pop;let k=d(),x=k==null?null:k-u;u=k,o&&o({action:c,location:b.location,delta:x})}function f(k,x){c=os.Push;let p=eo(b.location,k,x);u=d()+1;let m=Pd(p,u),y=b.createHref(p);try{l.pushState(m,"",y)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(y)}i&&o&&o({action:c,location:b.location,delta:1})}function g(k,x){c=os.Replace;let p=eo(b.location,k,x);u=d();let m=Pd(p,u),y=b.createHref(p);l.replaceState(m,"",y),i&&o&&o({action:c,location:b.location,delta:0})}function v(k){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof k=="string"?k:Ya(k);return p=p.replace(/ $/,"%20"),Se(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let b={get action(){return c},get location(){return e(a,l)},listen(k){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(Cd,h),o=k,()=>{a.removeEventListener(Cd,h),o=null}},createHref(k){return t(a,k)},createURL:v,encodeLocation(k){let x=v(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(k){return l.go(k)}};return b}var Td;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Td||(Td={}));function U0(e,t,s){return s===void 0&&(s="/"),F0(e,t,s,!1)}function F0(e,t,s,n){let a=typeof t=="string"?Rr(t):t,i=cc(a.pathname||"/",s);if(i==null)return null;let l=xm(e);z0(l);let c=null;for(let o=0;c==null&&o<l.length;++o){let u=X0(i);c=Q0(l[o],u,n)}return c}function xm(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,l,c)=>{let o={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};o.relativePath.startsWith("/")&&(Se(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let u=xs([n,o.relativePath]),d=s.concat(o);i.children&&i.children.length>0&&(Se(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xm(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:K0(u,i.index),routesMeta:d})};return e.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,l);else for(let o of ym(i.path))a(i,l,o)}),t}function ym(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=ym(n.join("/")),c=[];return c.push(...l.map(o=>o===""?i:[i,o].join("/"))),a&&c.push(...l),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function z0(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:J0(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const B0=/^:[\w-]+$/,W0=3,q0=2,H0=1,V0=10,G0=-2,Rd=e=>e==="*";function K0(e,t){let s=e.split("/"),n=s.length;return s.some(Rd)&&(n+=G0),t&&(n+=q0),s.filter(a=>!Rd(a)).reduce((a,i)=>a+(B0.test(i)?W0:i===""?H0:V0),n)}function J0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Q0(e,t,s){let{routesMeta:n}=e,a={},i="/",l=[];for(let c=0;c<n.length;++c){let o=n[c],u=c===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Ad({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},d),f=o.route;if(!h&&u&&s&&!n[n.length-1].route.index&&(h=Ad({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:xs([i,h.pathname]),pathnameBase:sg(xs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xs([i,h.pathnameBase]))}return l}function Ad(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Y0(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let b=c[h]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=c[h];return g&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function Y0(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),gm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,o)=>(n.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function X0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function Z0(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Rr(e):e;return{pathname:s?s.startsWith("/")?s:eg(s,t):t,search:rg(n),hash:ng(a)}}function eg(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function el(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tg(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function dc(e,t){let s=tg(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function uc(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Rr(e):(a=Rn({},e),Se(!a.pathname||!a.pathname.includes("?"),el("?","pathname","search",a)),Se(!a.pathname||!a.pathname.includes("#"),el("#","pathname","hash",a)),Se(!a.search||!a.search.includes("#"),el("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,c;if(l==null)c=s;else{let h=t.length-1;if(!n&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}c=h>=0?t[h]:"/"}let o=Z0(a,c),u=l&&l!=="/"&&l.endsWith("/"),d=(i||l===".")&&s.endsWith("/");return!o.pathname.endsWith("/")&&(u||d)&&(o.pathname+="/"),o}const xs=e=>e.join("/").replace(/\/\/+/g,"/"),sg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ng=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ag(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vm=["post","put","patch","delete"];new Set(vm);const ig=["get",...vm];new Set(ig);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},An.apply(this,arguments)}const hc=j.createContext(null),lg=j.createContext(null),ks=j.createContext(null),vi=j.createContext(null),Ss=j.createContext({outlet:null,matches:[],isDataRoute:!1}),wm=j.createContext(null);function og(e,t){let{relative:s}=t===void 0?{}:t;Ar()||Se(!1);let{basename:n,navigator:a}=j.useContext(ks),{hash:i,pathname:l,search:c}=Nm(e,{relative:s}),o=l;return n!=="/"&&(o=l==="/"?n:xs([n,l])),a.createHref({pathname:o,search:c,hash:i})}function Ar(){return j.useContext(vi)!=null}function Mr(){return Ar()||Se(!1),j.useContext(vi).location}function jm(e){j.useContext(ks).static||j.useLayoutEffect(e)}function bm(){let{isDataRoute:e}=j.useContext(Ss);return e?jg():cg()}function cg(){Ar()||Se(!1);let e=j.useContext(hc),{basename:t,future:s,navigator:n}=j.useContext(ks),{matches:a}=j.useContext(Ss),{pathname:i}=Mr(),l=JSON.stringify(dc(a,s.v7_relativeSplatPath)),c=j.useRef(!1);return jm(()=>{c.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!c.current)return;if(typeof u=="number"){n.go(u);return}let h=uc(u,JSON.parse(l),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:xs([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,l,i,e])}function Nm(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=j.useContext(ks),{matches:a}=j.useContext(Ss),{pathname:i}=Mr(),l=JSON.stringify(dc(a,n.v7_relativeSplatPath));return j.useMemo(()=>uc(e,JSON.parse(l),i,s==="path"),[e,l,i,s])}function dg(e,t){return ug(e,t)}function ug(e,t,s,n){Ar()||Se(!1);let{navigator:a}=j.useContext(ks),{matches:i}=j.useContext(Ss),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let u=Mr(),d;if(t){var h;let k=typeof t=="string"?Rr(t):t;o==="/"||(h=k.pathname)!=null&&h.startsWith(o)||Se(!1),d=k}else d=u;let f=d.pathname||"/",g=f;if(o!=="/"){let k=o.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=U0(e,{pathname:g}),b=gg(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:xs([o,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?o:xs([o,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,s,n);return t&&b?j.createElement(vi.Provider,{value:{location:An({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:os.Pop}},b):b}function hg(){let e=wg(),t=ag(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),s?j.createElement("pre",{style:a},s):null,null)}const mg=j.createElement(hg,null);class fg extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?j.createElement(Ss.Provider,{value:this.props.routeContext},j.createElement(wm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pg(e){let{routeContext:t,match:s,children:n}=e,a=j.useContext(hc);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(Ss.Provider,{value:t},n)}function gg(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,c=(a=s)==null?void 0:a.errors;if(c!=null){let d=l.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);d>=0||Se(!1),l=l.slice(0,Math.min(l.length,d+1))}let o=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<l.length;d++){let h=l[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=s,v=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){o=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,h,f)=>{let g,v=!1,b=null,k=null;s&&(g=c&&h.route.id?c[h.route.id]:void 0,b=h.route.errorElement||mg,o&&(u<0&&f===0?(v=!0,k=null):u===f&&(v=!0,k=h.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,f+1)),p=()=>{let m;return g?m=b:v?m=k:h.route.Component?m=j.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,j.createElement(pg,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:s!=null},children:m})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?j.createElement(fg,{location:s.location,revalidation:s.revalidation,component:b,error:g,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var _m=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_m||{}),Xa=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xa||{});function xg(e){let t=j.useContext(hc);return t||Se(!1),t}function yg(e){let t=j.useContext(lg);return t||Se(!1),t}function vg(e){let t=j.useContext(Ss);return t||Se(!1),t}function km(e){let t=vg(),s=t.matches[t.matches.length-1];return s.route.id||Se(!1),s.route.id}function wg(){var e;let t=j.useContext(wm),s=yg(Xa.UseRouteError),n=km(Xa.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function jg(){let{router:e}=xg(_m.UseNavigateStable),t=km(Xa.UseNavigateStable),s=j.useRef(!1);return jm(()=>{s.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,An({fromRouteId:t},i)))},[e,t])}function bg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Za(e){let{to:t,replace:s,state:n,relative:a}=e;Ar()||Se(!1);let{future:i,static:l}=j.useContext(ks),{matches:c}=j.useContext(Ss),{pathname:o}=Mr(),u=bm(),d=uc(t,dc(c,i.v7_relativeSplatPath),o,a==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:a}),[u,h,a,s,n]),null}function _e(e){Se(!1)}function Ng(e){let{basename:t="/",children:s=null,location:n,navigationType:a=os.Pop,navigator:i,static:l=!1,future:c}=e;Ar()&&Se(!1);let o=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:o,navigator:i,static:l,future:An({v7_relativeSplatPath:!1},c)}),[o,c,i,l]);typeof n=="string"&&(n=Rr(n));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:v="default"}=n,b=j.useMemo(()=>{let k=cc(d,o);return k==null?null:{location:{pathname:k,search:h,hash:f,state:g,key:v},navigationType:a}},[o,d,h,f,g,v,a]);return b==null?null:j.createElement(ks.Provider,{value:u},j.createElement(vi.Provider,{children:s,value:b}))}function _g(e){let{children:t,location:s}=e;return dg(to(t),s)}new Promise(()=>{});function to(e,t){t===void 0&&(t=[]);let s=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let i=[...t,a];if(n.type===j.Fragment){s.push.apply(s,to(n.props.children,i));return}n.type!==_e&&Se(!1),!n.props.index||!n.props.children||Se(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=to(n.props.children,i)),s.push(l)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},so.apply(this,arguments)}function kg(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function Sg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Eg(e,t){return e.button===0&&(!t||t==="_self")&&!Sg(e)}const Cg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Pg="6";try{window.__reactRouterVersion=Pg}catch{}const Tg="startTransition",Md=_f[Tg];function Rg(e){let{basename:t,children:s,future:n,window:a}=e,i=j.useRef();i.current==null&&(i.current=$0({window:a,v5Compat:!0}));let l=i.current,[c,o]=j.useState({action:l.action,location:l.location}),{v7_startTransition:u}=n||{},d=j.useCallback(h=>{u&&Md?Md(()=>o(h)):o(h)},[o,u]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.useEffect(()=>bg(n),[n]),j.createElement(Ng,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:l,future:n})}const Ag=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sm=j.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:c,target:o,to:u,preventScrollReset:d,viewTransition:h}=t,f=kg(t,Cg),{basename:g}=j.useContext(ks),v,b=!1;if(typeof u=="string"&&Mg.test(u)&&(v=u,Ag))try{let m=new URL(window.location.href),y=u.startsWith("//")?new URL(m.protocol+u):new URL(u),_=cc(y.pathname,g);y.origin===m.origin&&_!=null?u=_+y.search+y.hash:b=!0}catch{}let k=og(u,{relative:a}),x=Og(u,{replace:l,state:c,target:o,preventScrollReset:d,relative:a,viewTransition:h});function p(m){n&&n(m),m.defaultPrevented||x(m)}return j.createElement("a",so({},f,{href:v||k,onClick:b||i?n:p,ref:s,target:o}))});var Od;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Od||(Od={}));var Ld;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ld||(Ld={}));function Og(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:c}=t===void 0?{}:t,o=bm(),u=Mr(),d=Nm(e,{relative:l});return j.useCallback(h=>{if(Eg(h,s)){h.preventDefault();let f=n!==void 0?n:Ya(u)===Ya(d);o(e,{replace:f,state:a,preventScrollReset:i,relative:l,viewTransition:c})}},[u,o,d,n,a,s,e,i,l,c])}const Lg="modulepreload",$g=function(e){return"/"+e},$d={},Bt=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(o=>{if(o=$g(o),o in $d)return;$d[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Lg,u||(h.as="script"),h.crossOrigin="",h.href=o,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},Ig=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Bt(async()=>{const{default:n}=await Promise.resolve().then(()=>Or);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class mc extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class Dg extends mc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ug extends mc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Fg extends mc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ro;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ro||(ro={}));var zg=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};class Bg{constructor(t,{headers:s={},customFetch:n,region:a=ro.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Ig(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return zg(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=s;let c={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(c["x-region"]=o);let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(c["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(c["Content-Type"]="application/json",u=JSON.stringify(l)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:u}).catch(v=>{throw new Dg(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ug(d);if(!d.ok)throw new Fg(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(a){return{data:null,error:a}}})}}var Ze={},fc={},wi={},Un={},ji={},bi={},Wg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sr=Wg();const qg=Sr.fetch,Em=Sr.fetch.bind(Sr),Cm=Sr.Headers,Hg=Sr.Request,Vg=Sr.Response,Or=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cm,Request:Hg,Response:Vg,default:Em,fetch:qg},Symbol.toStringTag,{value:"Module"})),Gg=lf(Or);var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});let Kg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ni.default=Kg;var Pm=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bi,"__esModule",{value:!0});const Jg=Pm(Gg),Qg=Pm(Ni);let Yg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Jg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,c,o;let u=null,d=null,h=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const b=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),k=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,g="OK")}catch{i.status===404&&b===""?(f=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((o=u==null?void 0:u.details)===null||o===void 0)&&o.includes("0 rows"))&&(u=null,f=200,g="OK"),u&&this.shouldThrowOnError)throw new Qg.default(u)}return{error:u,data:d,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,c,o;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(c=i==null?void 0:i.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}returns(){return this}overrideTypes(){return this}};bi.default=Yg;var Xg=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});const Zg=Xg(bi);let ex=class extends Zg.default{select(t){let s=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var c;const o=[t?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${u}"; options=${o};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ji.default=ex;var tx=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});const sx=tx(ji);let rx=class extends sx.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Un.default=rx;var nx=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wi,"__esModule",{value:!0});const Kr=nx(Un);let ax=class{constructor(t,{headers:s={},schema:n,fetch:a}){this.url=t,this.headers=s,this.schema=n,this.fetch=a}select(t,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Kr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((c,o)=>c.concat(Object.keys(o)),[]);if(l.length>0){const c=[...new Set(l)].map(o=>`"${o}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const l="POST",c=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const o=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Kr.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new Kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};wi.default=ax;var _i={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.version=void 0;ki.version="0.0.0-automated";Object.defineProperty(_i,"__esModule",{value:!0});_i.DEFAULT_HEADERS=void 0;const ix=ki;_i.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ix.version}`};var Tm=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fc,"__esModule",{value:!0});const lx=Tm(wi),ox=Tm(Un),cx=_i;let dx=class Rm{constructor(t,{headers:s={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},cx.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new lx.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Rm(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:a=!1,count:i}={}){let l;const c=new URL(`${this.url}/rpc/${t}`);let o;n||a?(l=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(l="POST",o=s);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ox.default({method:l,url:c,headers:u,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};fc.default=dx;var Lr=gt&&gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.PostgrestError=Ze.PostgrestBuilder=Ze.PostgrestTransformBuilder=Ze.PostgrestFilterBuilder=Ze.PostgrestQueryBuilder=Ze.PostgrestClient=void 0;const Am=Lr(fc);Ze.PostgrestClient=Am.default;const Mm=Lr(wi);Ze.PostgrestQueryBuilder=Mm.default;const Om=Lr(Un);Ze.PostgrestFilterBuilder=Om.default;const Lm=Lr(ji);Ze.PostgrestTransformBuilder=Lm.default;const $m=Lr(bi);Ze.PostgrestBuilder=$m.default;const Im=Lr(Ni);Ze.PostgrestError=Im.default;var ux=Ze.default={PostgrestClient:Am.default,PostgrestQueryBuilder:Mm.default,PostgrestFilterBuilder:Om.default,PostgrestTransformBuilder:Lm.default,PostgrestBuilder:$m.default,PostgrestError:Im.default};const{PostgrestClient:hx,PostgrestQueryBuilder:Yv,PostgrestFilterBuilder:Xv,PostgrestTransformBuilder:Zv,PostgrestBuilder:ew,PostgrestError:tw}=ux;function mx(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const fx=mx(),px="2.11.15",gx=`realtime-js/${px}`,xx="1.0.0",Dm=1e4,yx=1e3;var dn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(dn||(dn={}));var Be;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Be||(Be={}));var Nt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Nt||(Nt={}));var no;(function(e){e.websocket="websocket"})(no||(no={}));var Ms;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ms||(Ms={}));class vx{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const a=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const c=n.decode(t.slice(l,l+a));l=l+a;const o=n.decode(t.slice(l,l+i));l=l+i;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:c,event:o,payload:u}}}class Um{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const Id=(e,t,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=wx(l,e,t,a),i),{})},wx=(e,t,s,n)=>{const a=t.find(c=>c.name===e),i=a==null?void 0:a.type,l=s[e];return i&&!n.includes(i)?Fm(i,l):ao(l)},Fm=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return _x(t,s)}switch(e){case ue.bool:return jx(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return bx(t);case ue.json:case ue.jsonb:return Nx(t);case ue.timestamp:return kx(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return ao(t);default:return ao(t)}},ao=e=>e,jx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Nx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_x=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(c=>Fm(t,c))}return e},kx=e=>typeof e=="string"?e.replace(" ","T"):e,zm=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class tl{constructor(t,s,n={},a=Dm){this.channel=t,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dd||(Dd={}));class un{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=un.syncState(this.state,a,i,l),this.pendingDiffs.forEach(o=>{this.state=un.syncDiff(this.state,o,i,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=un.syncDiff(this.state,a,i,l),c())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,a){const i=this.cloneDeep(t),l=this.transformState(s),c={},o={};return this.map(i,(u,d)=>{l[u]||(o[u]=d)}),this.map(l,(u,d)=>{const h=i[u];if(h){const f=d.map(k=>k.presence_ref),g=h.map(k=>k.presence_ref),v=d.filter(k=>g.indexOf(k.presence_ref)<0),b=h.filter(k=>f.indexOf(k.presence_ref)<0);v.length>0&&(c[u]=v),b.length>0&&(o[u]=b)}else c[u]=d}),this.syncDiff(i,{joins:c,leaves:o},n,a)}static syncDiff(t,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(c,o)=>{var u;const d=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(o),d.length>0){const h=t[c].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);t[c].unshift(...f)}n(c,d,o)}),this.map(l,(c,o)=>{let u=t[c];if(!u)return;const d=o.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[c]=u,a(c,u,o),u.length===0&&delete t[c]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const a=t[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ud;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ud||(Ud={}));var Fd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fd||(Fd={}));var Dt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class pc{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new tl(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new Um(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new un(this),this.broadcastEndpointURL=zm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params;this._onError(d=>t==null?void 0:t(Dt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Dt.CLOSED));const o={},u={broadcast:i,presence:l,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},o)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(Dt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let b=0;b<g;b++){const k=f[b],{filter:{event:x,schema:p,table:m,filter:y}}=k,_=d&&d[b];if(_&&_.event===x&&_.schema===p&&_.table===m&&_.filter===y)v.push(Object.assign(Object.assign({},k),{id:_.id}));else{this.unsubscribe(),this.state=Be.errored,t==null||t(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Dt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Be.errored,t==null||t(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,c,o;const u=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Be.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new tl(this,Nt.leave,{},t),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new tl(this,t,s,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var a,i;const l=t.toLocaleLowerCase(),{close:c,error:o,leave:u,join:d}=Nt;if(n&&[c,o,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let f=this._onMessage(l,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var v,b,k;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(b=g.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(g=>g.callback(f,n)):(i=this.bindings[l])===null||i===void 0||i.filter(g=>{var v,b,k,x,p,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const y=g.id,_=(v=g.filter)===null||v===void 0?void 0:v.event;return y&&((b=s.ids)===null||b===void 0?void 0:b.includes(y))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((k=s.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const y=(p=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return y==="*"||y===((m=s==null?void 0:s.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:b,table:k,commit_timestamp:x,type:p,errors:m}=v;f=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:x,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(v))}g.callback(f,n)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&pc.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nt.close,{},t)}_onError(t){this._on(Nt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Id(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Id(t.columns,t.old_record)),s}}const zd=()=>{},Sx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ex{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dm,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zd,this.ref=0,this.logger=zd,this.conn=null,this.sendBuffer=[],this.serializer=new vx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...c)=>Bt(async()=>{const{default:o}=await Promise.resolve().then(()=>Or);return{default:o}},void 0).then(({default:o})=>o(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${t}/${no.websocket}`,this.httpEndpoint=zm(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,l)=>l(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Um(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=fx),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xx}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case dn.connecting:return Ms.Connecting;case dn.open:return Ms.Open;case dn.closing:return Ms.Closing;default:return Ms.Closed}}isConnected(){return this.connectionState()===Ms.Open}channel(t,s={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new pc(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,c=>{var o;(o=this.conn)===null||o===void 0||o.send(c)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:gx};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Nt.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(yx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:a,payload:i,ref:l}=s;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(c=>c._isMember(n)).forEach(c=>c._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(c=>c(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${n}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([Sx],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class gc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Oe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Cx extends gc{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class io extends gc{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Px=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};const Bm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Bt(async()=>{const{default:n}=await Promise.resolve().then(()=>Or);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},Tx=()=>Px(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bt(()=>Promise.resolve().then(()=>Or),void 0)).Response:Response}),lo=e=>{if(Array.isArray(e))return e.map(s=>lo(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=lo(n)}),t};var Ks=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};const sl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Rx=(e,t,s)=>Ks(void 0,void 0,void 0,function*(){const n=yield Tx();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(a=>{t(new Cx(sl(a),e.status||500))}).catch(a=>{t(new io(sl(a),a))}):t(new io(sl(e),e))}),Ax=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),s))};function Fn(e,t,s,n,a,i){return Ks(this,void 0,void 0,function*(){return new Promise((l,c)=>{e(s,Ax(t,n,a,i)).then(o=>{if(!o.ok)throw o;return n!=null&&n.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>Rx(o,c,n))})})}function ei(e,t,s,n){return Ks(this,void 0,void 0,function*(){return Fn(e,"GET",t,s,n)})}function ss(e,t,s,n,a){return Ks(this,void 0,void 0,function*(){return Fn(e,"POST",t,n,a,s)})}function Mx(e,t,s,n,a){return Ks(this,void 0,void 0,function*(){return Fn(e,"PUT",t,n,a,s)})}function Ox(e,t,s,n){return Ks(this,void 0,void 0,function*(){return Fn(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Wm(e,t,s,n,a){return Ks(this,void 0,void 0,function*(){return Fn(e,"DELETE",t,n,a,s)})}var Ye=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};const Lx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $x{constructor(t,s={},n,a){this.url=t,this.headers=s,this.bucketId=n,this.fetch=Bm(a)}uploadOrUpdate(t,s,n,a){return Ye(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Bd),a);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,o&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Oe(i))return{data:null,error:i};throw i}})}upload(t,s,n){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,a){return Ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",s);try{let o;const u=Object.assign({upsert:Bd.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",u.cacheControl)):(o=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(c.toString(),{method:"PUT",body:o,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Oe(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,s){return Ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield ss(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),c=l.searchParams.get("token");if(!c)throw new gc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(t,s,n){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return Ye(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}copy(t,s,n){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield ss(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,n){return Ye(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ss(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,n){return Ye(this,void 0,void 0,function*(){try{const a=yield ss(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}download(t,s){return Ye(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield ei(this.fetch,`${this.url}/${a}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Oe(c))return{data:null,error:c};throw c}})}info(t){return Ye(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield ei(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:lo(n),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}exists(t){return Ye(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Ox(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Oe(n)&&n instanceof io){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&a.push(o);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${u}`)}}}remove(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Wm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}list(t,s,n){return Ye(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Lx),s),{prefix:t||""});return{data:yield ss(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Ix="2.7.1",Dx={"X-Client-Info":`storage-js/${Ix}`};var Qs=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};class Ux{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Dx),s),this.fetch=Bm(n)}listBuckets(){return Qs(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}getBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Qs(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Qs(this,void 0,void 0,function*(){try{return{data:yield Mx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield Wm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}}class Fx extends Ux{constructor(t,s={},n){super(t,s,n)}from(t){return new $x(this.url,this.headers,t,this.fetch)}}const zx="2.50.2";let Zr="";typeof Deno<"u"?Zr="deno":typeof document<"u"?Zr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zr="react-native":Zr="node";const Bx={"X-Client-Info":`supabase-js-${Zr}/${zx}`},Wx={headers:Bx},qx={schema:"public"},Hx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vx={};var Gx=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};const Kx=e=>{let t;return e?t=e:typeof fetch>"u"?t=Em:t=fetch,(...s)=>t(...s)},Jx=()=>typeof Headers>"u"?Cm:Headers,Qx=(e,t,s)=>{const n=Kx(s),a=Jx();return(i,l)=>Gx(void 0,void 0,void 0,function*(){var c;const o=(c=yield t())!==null&&c!==void 0?c:e;let u=new a(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),n(i,Object.assign(Object.assign({},l),{headers:u}))})};var Yx=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};function Xx(e){return e.endsWith("/")?e:e+"/"}function Zx(e,t){var s,n;const{db:a,auth:i,realtime:l,global:c}=e,{db:o,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),l),global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Yx(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const qm="2.70.0",er=30*1e3,oo=3,rl=oo*er,ey="http://localhost:9999",ty="supabase.auth.token",sy={"X-Client-Info":`gotrue-js/${qm}`},co="X-Supabase-Api-Version",Hm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ry=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ny=6e5;class xc extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function Z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ay extends xc{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function iy(e){return Z(e)&&e.name==="AuthApiError"}class Vm extends xc{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Es extends xc{constructor(t,s,n,a){super(t,n,a),this.name=s,this.status=n}}class Zt extends Es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ly(e){return Z(e)&&e.name==="AuthSessionMissingError"}class oa extends Es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ca extends Es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class da extends Es{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oy(e){return Z(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wd extends Es{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uo extends Es{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function nl(e){return Z(e)&&e.name==="AuthRetryableFetchError"}class qd extends Es{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class hn extends Es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hd=` 	
\r=`.split(""),cy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hd.length;t+=1)e[Hd[t].charCodeAt(0)]=-2;for(let t=0;t<ti.length;t+=1)e[ti[t].charCodeAt(0)]=t;return e})();function Vd(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ti[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ti[n]),t.queuedBits-=6}}function Gm(e,t,s){const n=cy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Gd(e){const t=[],s=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{hy(l,n,s)};for(let l=0;l<e.length;l+=1)Gm(e.charCodeAt(l),a,i);return t.join("")}function dy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function uy(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}dy(n,t)}}function hy(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function my(e){const t=[],s={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Gm(e.charCodeAt(a),s,n);return new Uint8Array(t)}function fy(e){const t=[];return uy(e,s=>t.push(s)),new Uint8Array(t)}function py(e){const t=[],s={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Vd(a,s,n)),Vd(null,s,n),t.join("")}function gy(e){return Math.round(Date.now()/1e3)+e}function xy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const wt=()=>typeof window<"u"&&typeof document<"u",Ps={tested:!1,writable:!1},mn=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ps.tested)return Ps.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ps.tested=!0,Ps.writable=!0}catch{Ps.tested=!0,Ps.writable=!1}return Ps.writable};function yy(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{t[a]=n}),t}const Km=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Bt(async()=>{const{default:n}=await Promise.resolve().then(()=>Or);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},vy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Jm=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},ua=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ha=async(e,t)=>{await e.removeItem(t)};class Si{constructor(){this.promise=new Si.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Si.promiseConstructor=Promise;function al(e){const t=e.split(".");if(t.length!==3)throw new hn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ry.test(t[n]))throw new hn("JWT not in base64url format");return{header:JSON.parse(Gd(t[0])),payload:JSON.parse(Gd(t[1])),signature:my(t[2]),raw:{header:t[0],payload:t[1]}}}async function wy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function jy(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function by(e){return("0"+e.toString(16)).substr(-2)}function Ny(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,by).join("")}async function _y(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function ky(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await _y(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(e,t,s=!1){const n=Ny();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await Jm(e,`${t}-code-verifier`,a);const i=await ky(n);return[i,n===i?"plain":"s256"]}const Sy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ey(e){const t=e.headers.get(co);if(!t||!t.match(Sy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Cy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Py(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ty=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xs(e){if(!Ty.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Ry=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const As=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ay=[502,503,504];async function Kd(e){var t;if(!vy(e))throw new uo(As(e),0);if(Ay.includes(e.status))throw new uo(As(e),e.status);let s;try{s=await e.json()}catch(i){throw new Vm(As(i),i)}let n;const a=Ey(e);if(a&&a.getTime()>=Hm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new qd(As(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Zt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new qd(As(s),e.status,s.weak_password.reasons);throw new ay(As(s),e.status||500,n)}const My=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function se(e,t,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[co]||(i[co]=Hm["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await Oy(e,t,s+c,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(o):{data:Object.assign({},o),error:null}}async function Oy(e,t,s,n,a,i){const l=My(t,n,a,i);let c;try{c=await e(s,Object.assign({},l))}catch(o){throw console.error(o),new uo(As(o),0)}if(c.ok||await Kd(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(o){await Kd(o)}}function $t(e){var t;let s=null;Dy(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=gy(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Jd(e){const t=$t(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function as(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ly(e){return{data:e,error:null}}function $y(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=e,l=Ry(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},o=Object.assign({},l);return{data:{properties:c,user:o},error:null}}function Iy(e){return e}function Dy(e){return e.access_token&&e.refresh_token&&e.expires_in}const il=["global","local","others"];var Uy=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};class Fy{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=Km(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=il[0]){if(il.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${il.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:as})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Uy(t,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:$y,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Z(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:as})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,a,i,l,c,o;try{const u={nextPage:null,lastPage:0,total:0},d=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Iy});if(d.error)throw d.error;const h=await d.json(),f=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(o=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Xs(t);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:as})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Xs(t);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:as})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){Xs(t);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:as})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Xs(t.userId);try{const{data:s,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Xs(t.userId),Xs(t.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}}const zy={getItem:e=>mn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{mn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{mn()&&globalThis.localStorage.removeItem(e)}};function Qd(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function By(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zs={debug:!!(globalThis&&mn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Wy extends Qm{}async function qy(e,t,s){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}By();const Hy={url:ey,storageKey:ty,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yd(e,t,s){return await s()}class Mn{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mn.nextInstanceID,Mn.nextInstanceID+=1,this.instanceID>0&&wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Hy),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Fy({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Km(a.fetch),this.lock=a.lock||Yd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:wt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=qy:this.lock=Yd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:mn()?this.storage=zy:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qm}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=yy(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),wt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),oy(i)){const o=(t=i.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Z(s)?{error:s}:{error:new Vm("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,a;try{const i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:$t}),{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,n,a;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ys(this.storage,this.storageKey)),i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:v},xform:$t})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:$t})}else throw new ca("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:l,options:c}=t;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Jd})}else if("phone"in t){const{phone:i,password:l,options:c}=t;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Jd})}else throw new ca("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new oa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,n,a,i,l,c,o,u,d,h,f,g;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:k,wallet:x,statement:p,options:m}=t;let y;if(wt())if(typeof x=="object")y=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))y=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const _=new URL((s=m==null?void 0:m.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in y&&y.signIn){const S=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),p?{statement:p}:null));let w;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")w=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)w=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in w&&"signature"in w&&(typeof w.signedMessage=="string"||w.signedMessage instanceof Uint8Array)&&w.signature instanceof Uint8Array)v=typeof w.signedMessage=="string"?w.signedMessage:new TextDecoder().decode(w.signedMessage),b=w.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(w=>`- ${w}`)]:[]].join(`
`);const S=await y.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:k,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:py(b)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:$t});if(x)throw x;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new oa}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:x})}catch(k){if(Z(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const s=await ua(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:l}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:$t});if(await ha(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new oa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(Z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=t,c=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:$t}),{data:o,error:u}=c;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new oa}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,a,i,l;try{if("email"in t){const{email:c,options:o}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ys(this.storage,this.storageKey));const{error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(n=o==null?void 0:o.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:c,options:o}=t,{data:u,error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ca("You must provide either an email or phone number.")}catch(c){if(Z(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var s,n;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:$t});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,u=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ys(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Ly})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Zt;const{error:a}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await se(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:c}=await se(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new ca("You must provide either an email or phone number and a type")}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<rl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(o,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:as}):await this._useSession(async s=>{var n,a,i;const{data:l,error:c}=s;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:as})})}catch(s){if(Z(s))return ly(s)&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Zt;const l=a.session;let c=null,o=null;this.flowType==="pkce"&&t.email!=null&&([c,o]=await Ys(this.storage,this.storageKey));const{data:u,error:d}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:o}),jwt:l.access_token,xform:as});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Zt;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:l}=al(t.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{session:c,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(Z(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:l,error:c}=s;if(c)throw c;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Zt;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!wt())throw new da("No browser detected.");if(t.error||t.error_description||t.error_code)throw new da(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Wd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new da("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wd("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:c,expires_at:o,token_type:u}=t;if(!i||!c||!l||!u)throw new da("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(c);let f=d+h;o&&(f=parseInt(o));const g=f-d;g*1e3<=er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:b,error:k}=await this._getUser(i);if(k)throw k;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:l,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,t);if(c&&!(iy(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=xy(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ys(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,c,o,u,d;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return wt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Z(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await jy(async a=>(a>0&&await wy(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$t})),(a,i)=>{const l=200*Math.pow(2,a);return i&&nl(i)&&Date.now()+l-n<er})}catch(n){if(this._debug(s,"error",n),Z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),wt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await ua(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<rl;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${rl}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),nl(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Zt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Si;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Zt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),Z(i)){const l={session:null,error:i};return nl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,s)}catch(o){i.push(o)}});if(await Promise.all(l),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Jm(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ha(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${er}ms, refresh threshold is ${oo} ticks`),a<=oo&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ys(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(c.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:o,error:u}=await se(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(s){if(Z(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Z(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=al(a.access_token);let c=null;l.aal&&(c=l.aal);let o=c;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const d=l.amr||[];return{data:{currentLevel:c,nextLevel:o,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(l=>l.kid===t);if(n||(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+ny>Date.now()))return n;const{data:a,error:i}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new hn("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(l=>l.kid===t),!n)throw new hn("No matching signing key found in JWKS");return n}async getClaims(t,s={keys:[]}){try{let n=t;if(!n){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};n=g.session.access_token}const{header:a,payload:i,signature:l,raw:{header:c,payload:o}}=al(n);if(Cy(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:a,signature:l},error:null}}const u=Py(a.alg),d=await this.fetchJwk(a.kid,s),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,fy(`${c}.${o}`)))throw new hn("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}}Mn.nextInstanceID=0;const Vy=Mn;class Gy extends Vy{constructor(t){super(t)}}var Ky=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(d){try{u(n.next(d))}catch(h){l(h)}}function o(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):a(d.value).then(c,o)}u((n=n.apply(e,t||[])).next())})};class Jy{constructor(t,s,n){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=Xx(t),o=new URL(c);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:qx,realtime:Vx,auth:Object.assign(Object.assign({},Hx),{storageKey:u}),global:Wx},h=Zx(n??{},d);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Qx(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new hx(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Bg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fx(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Ky(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,storageKey:i,flowType:l,lock:c,debug:o},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gy({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,flowType:l,lock:c,debug:o,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ex(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qy=(e,t,s)=>new Jy(e,t,s),Ym="https://vanexioftwhmbfbpzuop.supabase.co",Sa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhbmV4aW9mdHdobWJmYnB6dW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExODgxNjAsImV4cCI6MjA2Njc2NDE2MH0.IvmHvnyYDraCobgy9L10x_bSAGiY_epQJXRB08L3E8o",U=Qy(Ym,Sa,{auth:{persistSession:!1,autoRefreshToken:!1},global:{headers:{"X-Client-Info":"scrsa-sports-app"}}}),Xm=async()=>{try{console.log(" Testing Supabase connection..."),console.log("URL:",Ym),console.log("Key (first 10 chars):",(Sa==null?void 0:Sa.substring(0,10))+"...");const{data:e,error:t,count:s}=await U.from("users").select("id",{count:"exact",head:!0});if(t)return console.error(" Supabase connection error:",t),console.error("Error details:",{message:t.message,details:t.details,hint:t.hint,code:t.code}),!1;{console.log(" Supabase connected successfully"),console.log("Users table accessible, count:",s);const{data:n,error:a}=await U.from("sports").select("id",{count:"exact",head:!0});return a?console.warn(" Sports table access issue:",a):console.log(" Sports table accessible, count:",n),!0}}catch(e){return console.error(" Connection test failed:",e),!1}};typeof window<"u"&&(window.supabase=U,window.testSupabaseConnection=Xm);const ma=Object.freeze(Object.defineProperty({__proto__:null,supabase:U,testConnection:Xm},Symbol.toStringTag,{value:"Module"})),Zm=j.createContext(void 0),Yy=({children:e})=>{const[t,s]=j.useState({user:null,isAuthenticated:!1,isLoading:!0});j.useEffect(()=>{U.auth.getSession().then(({data:{session:u}})=>{if(u)n(u);else{const d=localStorage.getItem("scrsa_user");if(d)try{const h=JSON.parse(d);s({user:h,isAuthenticated:!0,isLoading:!1})}catch(h){console.error("Error parsing stored user:",h),localStorage.removeItem("scrsa_user"),s(f=>({...f,isLoading:!1}))}else s({user:null,isAuthenticated:!1,isLoading:!1})}});const{data:{subscription:o}}=U.auth.onAuthStateChange(async(u,d)=>{var h;console.log(" Auth state changed:",u,(h=d==null?void 0:d.user)==null?void 0:h.email),d?await n(d):(s({user:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("scrsa_user"))});return()=>o.unsubscribe()},[]);const n=async o=>{try{console.log(" Fetching user profile for:",o.user.email);const{data:u,error:d}=await U.from("users").select("*").eq("email",o.user.email).eq("is_active",!0).single();if(d||!u){console.error(" User profile not found:",d),await U.auth.signOut();return}console.log(" User profile loaded:",u);const h={id:u.id,email:u.email,name:u.name,role:u.role,isActive:u.is_active,createdAt:u.created_at};localStorage.setItem("scrsa_user",JSON.stringify(h)),s({user:h,isAuthenticated:!0,isLoading:!1})}catch(u){console.error(" Error handling auth state change:",u),s({user:null,isAuthenticated:!1,isLoading:!1})}},a=async(o,u)=>{try{console.log(" Attempting login for:",o);const{data:d,error:h}=await U.from("users").select("*").eq("email",o.toLowerCase().trim()).eq("is_active",!0).single();if(h||!d)return console.error(" User not found in database:",h),!1;if(u!=="password")return console.log(" Invalid password"),!1;console.log(" Demo login successful for user:",d);const f={id:d.id,email:d.email,name:d.name,role:d.role,isActive:d.is_active,createdAt:d.created_at};return await U.auth.setSession({access_token:`demo-token-${d.id}`,refresh_token:`demo-refresh-${d.id}`}),localStorage.setItem("scrsa_user",JSON.stringify(f)),s({user:f,isAuthenticated:!0,isLoading:!1}),!0}catch(d){return console.error(" Login error:",d),!1}},i=async()=>{try{console.log(" Logging out...");const{error:o}=await U.auth.signOut();o&&console.error(" Supabase logout error:",o),localStorage.removeItem("scrsa_user"),s({user:null,isAuthenticated:!1,isLoading:!1}),console.log(" Logout successful")}catch(o){console.error(" Logout error:",o),localStorage.removeItem("scrsa_user"),s({user:null,isAuthenticated:!1,isLoading:!1})}},l=async o=>{try{if(console.log(" Attempting registration for:",o.email),!o.email||!o.name||!o.role)throw new Error("Email, name, and role are required");const{data:u,error:d}=await U.from("users").insert([{email:o.email.toLowerCase().trim(),name:o.name.trim(),role:o.role,is_active:!0}]).select().single();if(d)throw console.error(" Registration error:",d),d;console.log(" Registration successful:",u);const h={id:u.id,email:u.email,name:u.name,role:u.role,isActive:u.is_active,createdAt:u.created_at};return localStorage.setItem("scrsa_user",JSON.stringify(h)),s({user:h,isAuthenticated:!0,isLoading:!1}),!0}catch(u){return console.error(" Registration failed:",u),!1}},c=async o=>{try{console.log(" Attempting password reset for:",o);const{data:u,error:d}=await U.from("users").select("email, is_active").eq("email",o.toLowerCase().trim()).eq("is_active",!0).single();return d||!u?(console.log(" User not found in database"),{success:!1,message:"No account found with this email address."}):(console.log(" Demo password reset initiated for:",o),{success:!0,message:"Password reset instructions have been sent to your email address. Please check your inbox and follow the instructions to reset your password."})}catch(u){return console.error(" Password reset error:",u),{success:!1,message:"Failed to send password reset email. Please try again later."}}};return r.jsx(Zm.Provider,{value:{...t,login:a,logout:i,register:l,resetPassword:c},children:e})},Jt=()=>{const e=j.useContext(Zm);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(e,t)=>{const s=j.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:o,...u},d)=>j.createElement("svg",{ref:d,...Xy,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Zy(e)}`,c].join(" "),...u},[...t.map(([h,f])=>j.createElement(h,f)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Y("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Y("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Y("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Y("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Y("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Y("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),gv=()=>{const[e,t]=j.useState(""),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,c]=j.useState(!1),[o,u]=j.useState(!1),[d,h]=j.useState(!1),[f,g]=j.useState(""),[v,b]=j.useState(""),[k,x]=j.useState(!1),[p,m]=j.useState(!1),{login:y,resetPassword:_}=Jt(),S=async C=>{C.preventDefault(),i(""),c(!0);try{await y(e,s)||i("Invalid email or password. Please check your credentials and try again.")}catch(O){console.error("Login error:",O),i("Login failed. Please try again.")}finally{c(!1)}},w=async C=>{C.preventDefault(),b(""),x(!1),m(!0);try{if(!f)throw new Error("Please enter your email address");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f))throw new Error("Please enter a valid email address");const q=await _(f);b(q.message),x(q.success),q.success&&g("")}catch(O){console.error("Password reset error:",O),b(O instanceof Error?O.message:"Failed to send reset email. Please try again."),x(!1)}finally{m(!1)}},E=()=>{const C=new Date().getHours();let O="Good morning";return C>=12&&C<17&&(O="Good afternoon"),C>=17&&(O="Good evening"),`${O}!`},F=()=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",children:r.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Reset Password"}),r.jsx("button",{onClick:()=>{h(!1),b(""),g(""),x(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Re,{className:"h-6 w-6"})})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Enter your email address and we'll send you instructions to reset your password."}),r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"resetEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(fo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"resetEmail",name:"resetEmail",type:"email",required:!0,value:f,onChange:C=>g(C.target.value),className:"block w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter your email address",disabled:p})]})]}),v&&r.jsx("div",{className:`p-4 rounded-xl border ${k?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[k?r.jsx(mo,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}):r.jsx(ho,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:`text-sm ${k?"text-green-700":"text-red-700"}`,children:v})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),b(""),g(""),x(!1)},className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",disabled:p,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:p||k,className:"flex-1 py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending..."]}):k?"Email Sent!":"Send Reset Link"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(si,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("p",{className:"font-medium mb-1",children:"Demo Mode"}),r.jsx("p",{children:"This is a demo system. In production, you would need to:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsx("li",{children:"Configure Supabase Auth with email templates"}),r.jsx("li",{children:"Set up SMTP settings in your Supabase project"}),r.jsx("li",{children:"Use real email addresses for password reset"})]})]})]})})]})});return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center px-4 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse animation-delay-2000"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-indigo-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse animation-delay-4000"})]}),r.jsx("div",{className:"relative z-10 w-full max-w-6xl mx-auto",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[r.jsxs("div",{className:"text-white space-y-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-white bg-opacity-20 rounded-2xl backdrop-blur-sm",children:r.jsx(ne,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold",children:"SCRSA Sports"}),r.jsx("p",{className:"text-blue-200",children:"Sports Club Management System"})]})]}),r.jsxs("p",{className:"text-xl text-blue-100 leading-relaxed",children:[E()," Streamline your sports club operations with our comprehensive management platform. Track teams, manage events, and analyze performance all in one place."]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 border border-white border-opacity-20",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(de,{className:"h-5 w-5 text-blue-300"}),r.jsx("span",{className:"font-semibold",children:"Team Management"})]}),r.jsx("p",{className:"text-sm text-blue-200",children:"Organize teams, players, and coaching staff efficiently"})]}),r.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 border border-white border-opacity-20",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(le,{className:"h-5 w-5 text-green-300"}),r.jsx("span",{className:"font-semibold",children:"Event Scheduling"})]}),r.jsx("p",{className:"text-sm text-blue-200",children:"Schedule matches, training sessions, and tournaments"})]}),r.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 border border-white border-opacity-20",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(ne,{className:"h-5 w-5 text-yellow-300"}),r.jsx("span",{className:"font-semibold",children:"Performance Tracking"})]}),r.jsx("p",{className:"text-sm text-blue-200",children:"Monitor team and individual player statistics"})]}),r.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 border border-white border-opacity-20",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(si,{className:"h-5 w-5 text-purple-300"}),r.jsx("span",{className:"font-semibold",children:"Role-Based Access"})]}),r.jsx("p",{className:"text-sm text-blue-200",children:"Secure access control for different user types"})]})]})]}),r.jsx("div",{className:"w-full max-w-md mx-auto lg:mx-0",children:r.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white border-opacity-20 p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg",children:r.jsx(Zd,{className:"h-8 w-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome Back"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to access your dashboard"})]}),r.jsxs("form",{onSubmit:S,className:"space-y-6",children:[a&&r.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsx(ho,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:a})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(fo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:C=>t(C.target.value),className:"block w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter your email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(hv,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:C=>n(C.target.value),className:"block w-full pl-12 pr-12 py-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter your password"}),r.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:o?r.jsx(iv,{className:"h-5 w-5"}):r.jsx(lv,{className:"h-5 w-5"})})]})]})]}),r.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:l?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Signing in..."]}):r.jsxs("span",{className:"flex items-center",children:[r.jsx(Zd,{className:"h-5 w-5 mr-2 group-hover:translate-x-1 transition-transform"}),"Sign In"]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-700 transition-colors font-medium hover:underline",children:"Forgot your password?"})})]})})]})}),d&&r.jsx(F,{})]})},xv=()=>{const{user:e,logout:t}=Jt(),s=Mr(),[n,a]=j.useState(!0),l=(()=>{const o=[{icon:uv,label:"Dashboard",path:"/dashboard"}];switch(e==null?void 0:e.role){case"admin":return[...o,{icon:de,label:"User Management",path:"/users"},{icon:si,label:"Committee",path:"/committee"},{icon:sf,label:"Sports",path:"/sports"},{icon:ne,label:"Teams",path:"/teams"},{icon:ys,label:"Players",path:"/players"},{icon:le,label:"Events",path:"/events"},{icon:Hs,label:"Analytics",path:"/analytics"},{icon:ef,label:"Settings",path:"/settings"}];case"committee":return[...o,{icon:ne,label:"Teams",path:"/teams"},{icon:ys,label:"Players",path:"/players"},{icon:le,label:"Events",path:"/events"},{icon:Hs,label:"Reports",path:"/reports"}];case"coach":return[...o,{icon:ne,label:"My Teams",path:"/my-teams"},{icon:ys,label:"My Players",path:"/my-players"},{icon:le,label:"My Events",path:"/my-events"},{icon:Ee,label:"Performance",path:"/performance"}];case"player":return[...o,{icon:cv,label:"My Profile",path:"/profile"},{icon:le,label:"Schedule",path:"/schedule"},{icon:Ee,label:"Performance",path:"/my-performance"},{icon:ne,label:"Achievements",path:"/achievements"}];default:return o}})(),c=o=>s.pathname===o;return r.jsxs("div",{className:`bg-white min-h-screen shadow-lg flex flex-col transition-all duration-300 ease-in-out ${n?"w-20":"w-64"}`,children:[r.jsx("div",{className:`p-6 border-b border-gray-200 ${n?"px-4":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`flex items-center space-x-3 ${n?"justify-center":""}`,children:[r.jsx("div",{className:"h-10 w-10 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(ne,{className:"h-6 w-6 text-white"})}),!n&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"SCRSA"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Sports Club"})]})]}),r.jsx("button",{onClick:()=>a(!n),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:n?"Expand sidebar":"Collapse sidebar",children:n?r.jsx(fv,{className:"h-5 w-5 text-gray-600"}):r.jsx(Re,{className:"h-5 w-5 text-gray-600"})})]})}),r.jsx("div",{className:`p-4 ${n?"px-2":""}`,children:r.jsxs("div",{className:`flex items-center space-x-3 p-3 bg-gray-50 rounded-lg ${n?"justify-center":""}`,children:[r.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:e==null?void 0:e.name.charAt(0).toUpperCase()})}),!n&&r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e==null?void 0:e.name}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e==null?void 0:e.role})]})]})}),r.jsx("div",{className:"flex-1 px-4",children:r.jsx("nav",{className:"space-y-2",children:l.map((o,u)=>r.jsxs(Sm,{to:o.path,className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg transition-all duration-200 group ${c(o.path)?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-700 hover:bg-blue-50 hover:text-blue-600"} ${n?"justify-center":""}`,title:n?o.label:"",children:[r.jsx(o.icon,{className:`h-5 w-5 flex-shrink-0 ${c(o.path)?"text-blue-600":"text-gray-500 group-hover:text-blue-600"}`}),!n&&r.jsx("span",{className:"text-sm font-medium truncate",children:o.label})]},u))})}),r.jsx("div",{className:`p-4 border-t border-gray-200 ${n?"px-2":""}`,children:r.jsxs("button",{onClick:t,className:`w-full flex items-center space-x-3 px-3 py-3 text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-200 group ${n?"justify-center":""}`,title:n?"Logout":"",children:[r.jsx(mv,{className:"h-5 w-5 flex-shrink-0 text-gray-500 group-hover:text-red-600"}),!n&&r.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})}),n&&r.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:r.jsx("div",{className:"w-1 h-8 bg-gray-300 rounded-full"})})]})},Ae=({children:e})=>r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(xv,{}),r.jsx("main",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"p-6",children:e})})]}),Ir=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),l=async()=>{try{n(!0),i(null),console.log(" Fetching users...");const{data:d,error:h}=await U.from("users").select("*").order("created_at",{ascending:!1});if(h)throw console.error(" Fetch error:",h),h;console.log(" Users fetched successfully:",(d==null?void 0:d.length)||0,"users"),t(d||[])}catch(d){console.error(" Error fetching users:",d),i(d instanceof Error?d.message:"An error occurred while fetching users")}finally{n(!1)}},c=async d=>{try{if(i(null),!d.name||!d.email||!d.role)throw new Error("Name, email, and role are required");console.log(" Adding user with data:",d);const{data:h}=await U.from("users").select("email").eq("email",d.email.trim().toLowerCase()).maybeSingle();if(h)throw new Error("A user with this email already exists");const f={name:d.name.trim(),email:d.email.trim().toLowerCase(),role:d.role,is_active:d.is_active??!0,avatar_url:d.avatar_url||null};console.log(" Insert data:",f);const{data:g,error:v}=await U.from("users").insert([f]).select().single();if(v)throw console.error(" Insert error:",v),console.error("Error details:",{message:v.message,details:v.details,hint:v.hint,code:v.code}),v;if(g)return t(b=>[g,...b]),console.log(" User added successfully:",g),g}catch(h){console.error(" Error adding user:",h);const f=h instanceof Error?h.message:"Failed to add user";throw i(f),new Error(f)}},o=async(d,h)=>{try{i(null),console.log(" Updating user:",d,h);const{data:f,error:g}=await U.from("users").update(h).eq("id",d).select().single();if(g)throw console.error(" Update error:",g),g;if(f)return t(v=>v.map(b=>b.id===d?f:b)),console.log(" User updated successfully:",f),f}catch(f){console.error(" Error updating user:",f);const g=f instanceof Error?f.message:"Failed to update user";throw i(g),new Error(g)}},u=async d=>{try{i(null),console.log(" Deleting user:",d);const{error:h}=await U.from("users").delete().eq("id",d);if(h)throw console.error(" Delete error:",h),h;t(f=>f.filter(g=>g.id!==d)),console.log(" User deleted successfully")}catch(h){console.error(" Error deleting user:",h);const f=h instanceof Error?h.message:"Failed to delete user";throw i(f),new Error(f)}};return j.useEffect(()=>{l()},[]),{users:e,loading:s,error:a,addUser:c,updateUser:o,deleteUser:u,refetch:l}},Qt=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),l=async()=>{try{n(!0),i(null);const{data:d,error:h}=await U.from("teams").select(`
          *,
          sports(name),
          users(name)
        `).order("created_at",{ascending:!1});if(h)throw console.error("Fetch teams error:",h),h;t(d||[])}catch(d){console.error("Error fetching teams:",d),i(d instanceof Error?d.message:"An error occurred while fetching teams")}finally{n(!1)}},c=async d=>{try{i(null);const{data:h,error:f}=await U.from("teams").insert([d]).select(`
          *,
          sports(name),
          users(name)
        `).single();if(f)throw console.error("Insert team error:",f),f;if(h)return t(g=>[h,...g]),h}catch(h){console.error("Error adding team:",h);const f=h instanceof Error?h.message:"Failed to add team";throw i(f),new Error(f)}},o=async(d,h)=>{try{i(null);const{data:f,error:g}=await U.from("teams").update(h).eq("id",d).select(`
          *,
          sports(name),
          users(name)
        `).single();if(g)throw console.error("Update team error:",g),g;if(f)return t(v=>v.map(b=>b.id===d?f:b)),f}catch(f){console.error("Error updating team:",f);const g=f instanceof Error?f.message:"Failed to update team";throw i(g),new Error(g)}},u=async d=>{try{i(null);const{error:h}=await U.from("teams").delete().eq("id",d);if(h)throw console.error("Delete team error:",h),h;t(f=>f.filter(g=>g.id!==d))}catch(h){console.error("Error deleting team:",h);const f=h instanceof Error?h.message:"Failed to delete team";throw i(f),new Error(f)}};return j.useEffect(()=>{l()},[]),{teams:e,loading:s,error:a,addTeam:c,updateTeam:o,deleteTeam:u,refetch:l}},Bn=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),l=async()=>{try{n(!0),i(null);const{data:d,error:h}=await U.from("players").select(`
          *,
          users(name, email),
          player_teams(teams(name))
        `).order("created_at",{ascending:!1});if(h)throw console.error("Fetch players error:",h),h;t(d||[])}catch(d){console.error("Error fetching players:",d),i(d instanceof Error?d.message:"An error occurred while fetching players")}finally{n(!1)}},c=async d=>{try{i(null);const{data:h,error:f}=await U.from("players").insert([d]).select(`
          *,
          users(name, email),
          player_teams(teams(name))
        `).single();if(f)throw console.error("Insert player error:",f),f;if(h)return t(g=>[h,...g]),h}catch(h){console.error("Error adding player:",h);const f=h instanceof Error?h.message:"Failed to add player";throw i(f),new Error(f)}},o=async(d,h)=>{try{i(null);const{data:f,error:g}=await U.from("players").update(h).eq("id",d).select(`
          *,
          users(name, email),
          player_teams(teams(name))
        `).single();if(g)throw console.error("Update player error:",g),g;if(f)return t(v=>v.map(b=>b.id===d?f:b)),f}catch(f){console.error("Error updating player:",f);const g=f instanceof Error?f.message:"Failed to update player";throw i(g),new Error(g)}},u=async d=>{try{i(null);const{error:h}=await U.from("players").delete().eq("id",d);if(h)throw console.error("Delete player error:",h),h;t(f=>f.filter(g=>g.id!==d))}catch(h){console.error("Error deleting player:",h);const f=h instanceof Error?h.message:"Failed to delete player";throw i(f),new Error(f)}};return j.useEffect(()=>{l()},[]),{players:e,loading:s,error:a,addPlayer:c,updatePlayer:o,deletePlayer:u,refetch:l}},Dr=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),l=async()=>{try{n(!0),i(null);const{data:d,error:h}=await U.from("events").select(`
          *,
          sports(name),
          event_teams(teams(name))
        `).order("event_date",{ascending:!1});if(h)throw console.error("Fetch events error:",h),h;t(d||[])}catch(d){console.error("Error fetching events:",d),i(d instanceof Error?d.message:"An error occurred while fetching events")}finally{n(!1)}},c=async d=>{try{i(null);const{data:h,error:f}=await U.from("events").insert([d]).select(`
          *,
          sports(name),
          event_teams(teams(name))
        `).single();if(f)throw console.error("Insert event error:",f),f;if(h)return t(g=>[h,...g]),h}catch(h){console.error("Error adding event:",h);const f=h instanceof Error?h.message:"Failed to add event";throw i(f),new Error(f)}},o=async(d,h)=>{try{i(null);const{data:f,error:g}=await U.from("events").update(h).eq("id",d).select(`
          *,
          sports(name),
          event_teams(teams(name))
        `).single();if(g)throw console.error("Update event error:",g),g;if(f)return t(v=>v.map(b=>b.id===d?f:b)),f}catch(f){console.error("Error updating event:",f);const g=f instanceof Error?f.message:"Failed to update event";throw i(g),new Error(g)}},u=async d=>{try{i(null);const{error:h}=await U.from("events").delete().eq("id",d);if(h)throw console.error("Delete event error:",h),h;t(f=>f.filter(g=>g.id!==d))}catch(h){console.error("Error deleting event:",h);const f=h instanceof Error?h.message:"Failed to delete event";throw i(f),new Error(f)}};return j.useEffect(()=>{l()},[]),{events:e,loading:s,error:a,addEvent:c,updateEvent:o,deleteEvent:u,refetch:l}},yv=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),l=async()=>{try{n(!0),i(null);const{data:d,error:h}=await U.from("committee_members").select(`
          *,
          users(name, email)
        `).order("created_at",{ascending:!1});if(h)throw console.error("Fetch committee members error:",h),h;t(d||[])}catch(d){console.error("Error fetching committee members:",d),i(d instanceof Error?d.message:"An error occurred while fetching committee members")}finally{n(!1)}},c=async d=>{try{i(null);const{data:h,error:f}=await U.from("committee_members").insert([d]).select(`
          *,
          users(name, email)
        `).single();if(f)throw console.error("Insert committee member error:",f),f;if(h)return t(g=>[h,...g]),h}catch(h){console.error("Error adding committee member:",h);const f=h instanceof Error?h.message:"Failed to add committee member";throw i(f),new Error(f)}},o=async(d,h)=>{try{i(null);const{data:f,error:g}=await U.from("committee_members").update(h).eq("id",d).select(`
          *,
          users(name, email)
        `).single();if(g)throw console.error("Update committee member error:",g),g;if(f)return t(v=>v.map(b=>b.id===d?f:b)),f}catch(f){console.error("Error updating committee member:",f);const g=f instanceof Error?f.message:"Failed to update committee member";throw i(g),new Error(g)}},u=async d=>{try{i(null);const{error:h}=await U.from("committee_members").delete().eq("id",d);if(h)throw console.error("Delete committee member error:",h),h;t(f=>f.filter(g=>g.id!==d))}catch(h){console.error("Error deleting committee member:",h);const f=h instanceof Error?h.message:"Failed to delete committee member";throw i(f),new Error(f)}};return j.useEffect(()=>{l()},[]),{members:e,loading:s,error:a,addMember:c,updateMember:o,deleteMember:u,refetch:l}},vv=({title:e,value:t,icon:s,color:n,trend:a,description:i,isLoading:l=!1})=>r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-all duration-200 hover:scale-105 group",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),r.jsx("div",{className:`p-2 rounded-xl ${n} group-hover:scale-110 transition-transform`,children:r.jsx(s,{className:"h-5 w-5 text-white"})})]}),l?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-16 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:t}),i&&r.jsx("p",{className:"text-xs text-gray-500",children:i}),a&&r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsx(Ge,{className:"h-4 w-4 text-green-500 mr-1"}),r.jsx("span",{className:"text-sm text-green-600 font-medium",children:a})]})]})]})})}),wv=({userRole:e})=>{const{users:t,loading:s}=Ir(),{teams:n,loading:a}=Qt(),{players:i,loading:l}=Bn(),{events:c,loading:o}=Dr(),u=s||a||l||o,h=(()=>{const f=t.filter(m=>m.is_active).length,g=n.filter(m=>m.is_active).length,v=i.filter(m=>m.is_active).length,b=c.filter(m=>m.status==="scheduled").length;c.filter(m=>m.status==="completed").length;const k=n.reduce((m,y)=>m+y.wins+y.losses+y.draws,0),x=n.reduce((m,y)=>m+y.wins,0),p=k>0?Math.round(x/k*100):0;switch(e){case"admin":return[{title:"Total Users",value:t.length,icon:de,color:"bg-blue-500",trend:`${f} active`,description:"Registered members"},{title:"Active Teams",value:g,icon:ne,color:"bg-green-500",trend:`${n.length} total`,description:"Competing teams"},{title:"Upcoming Events",value:b,icon:le,color:"bg-orange-500",description:"Scheduled events"},{title:"System Health",value:"98%",icon:ev,color:"bg-purple-500",description:"Platform uptime"}];case"committee":return[{title:"Teams Managed",value:g,icon:ne,color:"bg-blue-500",description:"Active teams"},{title:"Active Players",value:v,icon:de,color:"bg-green-500",description:"Registered players"},{title:"Events This Month",value:b,icon:le,color:"bg-orange-500",description:"Scheduled events"},{title:"Overall Win Rate",value:`${p}%`,icon:Ge,color:"bg-purple-500",description:"Across all teams"}];case"coach":const m=Math.min(g,3),y=Math.floor(v/2);return[{title:"My Teams",value:m,icon:ne,color:"bg-blue-500",description:"Teams coached"},{title:"My Players",value:y,icon:de,color:"bg-green-500",description:"Under coaching"},{title:"Training Sessions",value:12,icon:Ee,color:"bg-orange-500",description:"This month"},{title:"Team Win Rate",value:`${p}%`,icon:Ge,color:"bg-purple-500",description:"Average performance"}];case"player":const _=k>0?Math.floor(k/Math.max(v,1)):0;return[{title:"Teams Joined",value:2,icon:ne,color:"bg-blue-500",description:"Active memberships"},{title:"Matches Played",value:_,icon:le,color:"bg-green-500",description:"This season"},{title:"Win Rate",value:`${p}%`,icon:Ge,color:"bg-orange-500",description:"Personal performance"},{title:"Achievements",value:5,icon:zn,color:"bg-purple-500",description:"Earned badges"}];default:return[]}})();return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((f,g)=>r.jsx(vv,{...f,isLoading:u},g))})},jv=()=>{const{events:e,loading:t}=Dr(),{teams:s,loading:n}=Qt(),{players:a,loading:i}=Bn(),{users:l,loading:c}=Ir(),o=t||n||i||c,u=g=>{const v=new Date(g),k=Math.floor((new Date().getTime()-v.getTime())/(1e3*60*60));if(k<1)return"Just now";if(k<24)return`${k} hour${k>1?"s":""} ago`;const x=Math.floor(k/24);if(x<7)return`${x} day${x>1?"s":""} ago`;const p=Math.floor(x/7);return p<4?`${p} week${p>1?"s":""} ago`:v.toLocaleDateString()},d=()=>{const g=[];return e.filter(m=>{const y=new Date(m.created_at),_=new Date;return _.setDate(_.getDate()-7),y>=_}).sort((m,y)=>new Date(y.created_at).getTime()-new Date(m.created_at).getTime()).slice(0,3).forEach(m=>{var S;const y=m.status==="completed",_=m.status==="scheduled";g.push({id:`event-${m.id}`,type:"event",title:y?"Match Completed":_?"Event Scheduled":"Event Updated",description:`${m.name} - ${((S=m.sports)==null?void 0:S.name)||"Unknown Sport"}`,timestamp:m.created_at,icon:y?mo:le,color:y?"bg-green-100 text-green-600 border-green-200":"bg-blue-100 text-blue-600 border-blue-200",priority:_?"high":"medium",relativeTime:u(m.created_at)})}),s.filter(m=>{const y=new Date(m.created_at),_=new Date;return _.setDate(_.getDate()-7),y>=_}).sort((m,y)=>new Date(y.created_at).getTime()-new Date(m.created_at).getTime()).slice(0,2).forEach(m=>{var y;g.push({id:`team-${m.id}`,type:"team",title:"New Team Created",description:`${m.name} (${((y=m.sports)==null?void 0:y.name)||"Unknown Sport"}) - ${m.gender}`,timestamp:m.created_at,icon:ne,color:"bg-green-100 text-green-600 border-green-200",priority:"medium",relativeTime:u(m.created_at)})}),a.filter(m=>{const y=new Date(m.created_at),_=new Date;return _.setDate(_.getDate()-7),y>=_}).sort((m,y)=>new Date(y.created_at).getTime()-new Date(m.created_at).getTime()).slice(0,2).forEach(m=>{var y;g.push({id:`player-${m.id}`,type:"player",title:"Player Registration",description:`${((y=m.users)==null?void 0:y.name)||"Unknown Player"} joined the club`,timestamp:m.created_at,icon:de,color:"bg-purple-100 text-purple-600 border-purple-200",priority:"medium",relativeTime:u(m.created_at)})}),l.filter(m=>{const y=new Date(m.created_at),_=new Date;return _.setDate(_.getDate()-7),y>=_&&m.role!=="admin"}).sort((m,y)=>new Date(y.created_at).getTime()-new Date(m.created_at).getTime()).slice(0,2).forEach(m=>{g.push({id:`user-${m.id}`,type:"player",title:"New Member Joined",description:`${m.name} registered as ${m.role}`,timestamp:m.created_at,icon:Cs,color:"bg-blue-100 text-blue-600 border-blue-200",priority:"low",relativeTime:u(m.created_at)})}),s.filter(m=>{const y=m.wins+m.losses+m.draws;return(y>0?m.wins/y*100:0)>=70&&y>=3}).slice(0,1).forEach(m=>{const y=m.wins+m.losses+m.draws,_=Math.round(m.wins/y*100);g.push({id:`achievement-${m.id}`,type:"achievement",title:"Team Achievement",description:`${m.name} reached ${_}% win rate milestone`,timestamp:m.updated_at,icon:Ge,color:"bg-yellow-100 text-yellow-600 border-yellow-200",priority:"medium",relativeTime:u(m.updated_at)})}),g.sort((m,y)=>new Date(y.timestamp).getTime()-new Date(m.timestamp).getTime()).slice(0,5)},h=g=>{switch(g){case"high":return r.jsx(ho,{className:"h-3 w-3 text-red-500"});case"medium":return r.jsx(lt,{className:"h-3 w-3 text-yellow-500"});default:return r.jsx(mo,{className:"h-3 w-3 text-green-500"})}},f=d();return o?r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(lt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Recent Activity"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Loading..."})]}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(g=>r.jsx("div",{className:"animate-pulse",children:r.jsxs("div",{className:"flex items-start space-x-4 p-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})},g))})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(lt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Recent Activity"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Last 7 days"})]}),r.jsx("div",{className:"space-y-4",children:f.length>0?f.map(g=>r.jsx("div",{className:"group",children:r.jsxs("div",{className:"flex items-start space-x-4 p-4 hover:bg-gray-50 rounded-xl transition-all duration-200 border border-transparent hover:border-gray-200",children:[r.jsx("div",{className:`p-2 rounded-xl border ${g.color} group-hover:scale-110 transition-transform`,children:r.jsx(g.icon,{className:"h-4 w-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:g.title}),r.jsxs("div",{className:"flex items-center space-x-1",children:[h(g.priority),r.jsx("span",{className:"text-xs text-gray-400",children:g.relativeTime})]})]}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:g.description})]})]})},g.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(lt,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No recent activity"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Activity will appear here as you use the system"})]})}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:r.jsx("button",{className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium py-2 px-4 rounded-lg hover:bg-blue-50 transition-colors",children:"View All Activity"})})]})},bv=()=>{const{events:e,loading:t}=Dr(),s=()=>{const o=new Date,u=new Date;return u.setDate(o.getDate()+14),e.filter(d=>{if(d.status!=="scheduled")return!1;const h=new Date(d.event_date);return h>=o&&h<=u}).map(d=>{var b,k;const h=new Date(d.event_date),f=Math.ceil((h.getTime()-o.getTime())/(1e3*60*60*24));let g="low";f<=3?g="high":f<=7&&(g="medium");const v=((b=d.event_teams)==null?void 0:b.map(x=>{var p;return(p=x.teams)==null?void 0:p.name}).filter(Boolean))||[];return{id:d.id,name:d.name,sport:((k=d.sports)==null?void 0:k.name)||"Unknown Sport",date:h.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),time:d.event_time,location:d.location,teams:v,type:d.type,priority:g,daysUntil:f,status:d.status}}).sort((d,h)=>d.daysUntil-h.daysUntil).slice(0,4)},n=o=>{switch(o){case"tournament":return"bg-red-100 text-red-700 border-red-200";case"league":return"bg-blue-100 text-blue-700 border-blue-200";case"friendly":return"bg-green-100 text-green-700 border-green-200";case"training":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},a=o=>{switch(o){case"tournament":return ne;case"league":return Ee;case"friendly":return de;case"training":return sf;default:return le}},i=o=>{switch(o){case"high":return"border-l-4 border-l-red-500";case"medium":return"border-l-4 border-l-yellow-500";default:return"border-l-4 border-l-green-500"}},l=o=>{switch(o.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";default:return""}},c=s();return t?r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(le,{className:"h-5 w-5 mr-2 text-blue-600"}),"Upcoming Events"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Loading..."})]}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(o=>r.jsx("div",{className:"animate-pulse",children:r.jsxs("div",{className:"border border-gray-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-1"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]}),r.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},o))})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(le,{className:"h-5 w-5 mr-2 text-blue-600"}),"Upcoming Events"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Next 2 weeks"})]}),r.jsx("div",{className:"space-y-4",children:c.length>0?c.map(o=>{const u=a(o.type);return r.jsx("div",{className:"group",children:r.jsxs("div",{className:`border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all duration-200 hover:scale-[1.02] ${i(o.priority)}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-2xl",children:l(o.sport)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:o.name}),r.jsx("p",{className:"text-sm text-gray-500",children:o.sport})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full border capitalize ${n(o.type)}`,children:[r.jsx(u,{className:"h-3 w-3 inline mr-1"}),o.type]}),o.daysUntil<=5&&r.jsxs("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full font-medium",children:[o.daysUntil,"d"]})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(lt,{className:"h-4 w-4 text-blue-500"}),r.jsxs("span",{className:"font-medium",children:[o.date," at ",o.time]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Is,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{children:o.location})]}),o.teams.length>0?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(de,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{children:o.teams.join(" vs ")})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(yc,{className:"h-4 w-4 text-orange-500"}),r.jsx("span",{className:"text-orange-600",children:"No teams assigned"})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsx("span",{children:"Days until event"}),r.jsx("span",{className:"font-medium",children:o.daysUntil===0?"Today":o.daysUntil===1?"Tomorrow":`${o.daysUntil} days`})]}),r.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${o.daysUntil<=3?"bg-red-500":o.daysUntil<=7?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.max(10,100-o.daysUntil*5)}%`}})})]})]})},o.id)}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(le,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No upcoming events"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Events scheduled for the next 2 weeks will appear here"})]})}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:r.jsx("button",{className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium py-2 px-4 rounded-lg hover:bg-blue-50 transition-colors",children:"View All Events"})})]})},Nv=({userRole:e})=>{const s=(()=>{switch(e){case"admin":return[{icon:tf,label:"Add User",path:"/users",color:"bg-blue-500 hover:bg-blue-600"},{icon:ne,label:"Create Team",path:"/teams",color:"bg-green-500 hover:bg-green-600"},{icon:le,label:"Schedule Event",path:"/events",color:"bg-orange-500 hover:bg-orange-600"},{icon:Hs,label:"View Analytics",path:"/analytics",color:"bg-purple-500 hover:bg-purple-600"},{icon:ef,label:"System Settings",path:"/settings",color:"bg-gray-500 hover:bg-gray-600"}];case"committee":return[{icon:ne,label:"Manage Teams",path:"/teams",color:"bg-blue-500 hover:bg-blue-600"},{icon:de,label:"Manage Players",path:"/players",color:"bg-green-500 hover:bg-green-600"},{icon:le,label:"Create Event",path:"/events",color:"bg-orange-500 hover:bg-orange-600"},{icon:ov,label:"View Reports",path:"/reports",color:"bg-purple-500 hover:bg-purple-600"}];case"coach":return[{icon:ne,label:"My Teams",path:"/my-teams",color:"bg-blue-500 hover:bg-blue-600"},{icon:de,label:"My Players",path:"/my-players",color:"bg-green-500 hover:bg-green-600"},{icon:Ee,label:"Performance",path:"/performance",color:"bg-orange-500 hover:bg-orange-600"},{icon:le,label:"Schedule",path:"/schedule",color:"bg-purple-500 hover:bg-purple-600"}];case"player":return[{icon:de,label:"My Profile",path:"/profile",color:"bg-blue-500 hover:bg-blue-600"},{icon:le,label:"My Schedule",path:"/schedule",color:"bg-green-500 hover:bg-green-600"},{icon:Ee,label:"Performance",path:"/my-performance",color:"bg-orange-500 hover:bg-orange-600"},{icon:zn,label:"Achievements",path:"/achievements",color:"bg-purple-500 hover:bg-purple-600"}];default:return[]}})();return s.length===0?null:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Cs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Quick Actions"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:s.map((n,a)=>r.jsx(Sm,{to:n.path,className:`${n.color} text-white p-4 rounded-xl transition-all duration-200 hover:scale-105 hover:shadow-lg group`,children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx(n.icon,{className:"h-8 w-8 mb-2 group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-medium",children:n.label})]})},a))})]})},_v=()=>{const{teams:e}=Qt(),{players:t}=Bn(),{events:s}=Dr(),n=e.reduce((d,h)=>d+h.wins+h.losses+h.draws,0),a=e.reduce((d,h)=>d+h.wins,0),i=n>0?Math.round(a/n*100):0,l=t.filter(d=>d.is_active).length,c=s.filter(d=>d.status==="scheduled").length,o={winRate:{value:i,change:5,isPositive:!0},activePlayers:{value:l,change:8,isPositive:!0},events:{value:c,change:-2,isPositive:!1},engagement:{value:87,change:12,isPositive:!0}},u=[{title:"Overall Win Rate",value:`${o.winRate.value}%`,change:o.winRate.change,isPositive:o.winRate.isPositive,icon:ne,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Across all teams"},{title:"Active Players",value:o.activePlayers.value,change:o.activePlayers.change,isPositive:o.activePlayers.isPositive,icon:de,color:"text-blue-600",bgColor:"bg-blue-50",description:"Currently registered"},{title:"Upcoming Events",value:o.events.value,change:o.events.change,isPositive:o.events.isPositive,icon:Ee,color:"text-green-600",bgColor:"bg-green-50",description:"This month"},{title:"Engagement Score",value:`${o.engagement.value}%`,change:o.engagement.change,isPositive:o.engagement.isPositive,icon:Ge,color:"text-purple-600",bgColor:"bg-purple-50",description:"Player participation"}];return r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Hs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Performance Overview"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Last 30 days"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((d,h)=>r.jsx("div",{className:"relative group",children:r.jsxs("div",{className:`${d.bgColor} rounded-xl p-4 transition-all duration-200 group-hover:scale-105`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:`p-2 rounded-lg bg-white ${d.color}`,children:r.jsx(d.icon,{className:"h-5 w-5"})}),r.jsxs("div",{className:`flex items-center text-sm font-medium ${d.isPositive?"text-green-600":"text-red-600"}`,children:[d.isPositive?r.jsx(rv,{className:"h-4 w-4 mr-1"}):r.jsx(tv,{className:"h-4 w-4 mr-1"}),Math.abs(d.change),"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:d.value}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:d.title}),r.jsx("p",{className:"text-xs text-gray-500",children:d.description})]})]})},h))}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Key Insights"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Strong Performance"})]}),r.jsxs("p",{className:"text-xs text-green-700",children:["Win rate has improved by ",o.winRate.change,"% this month, indicating strong team performance across all sports."]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),r.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Growing Community"})]}),r.jsxs("p",{className:"text-xs text-blue-700",children:["Player registration has increased by ",o.activePlayers.change,"%, showing growing interest in club activities."]})]})]})]})]})},kv=({userRole:e})=>{var l;const{teams:t}=Qt(),s=t.map(c=>{const o=c.wins+c.losses+c.draws,u=o>0?Math.round(c.wins/o*100):0;return{...c,totalMatches:o,winRate:u}}).sort((c,o)=>o.winRate-c.winRate),n=s[0],a=s.slice(0,3),i=c=>{switch(c==null?void 0:c.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";default:return""}};return n?r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[r.jsx(at,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Team Spotlight"]}),r.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-4xl",children:i(((l=n.sports)==null?void 0:l.name)||"")}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-bold text-gray-900",children:n.name}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top Performing Team"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center text-yellow-600 mb-1",children:[r.jsx(ne,{className:"h-5 w-5 mr-1"}),r.jsxs("span",{className:"font-bold text-lg",children:[n.winRate,"%"]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Win Rate"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.wins}),r.jsx("p",{className:"text-xs text-gray-600",children:"Wins"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:n.losses}),r.jsx("p",{className:"text-xs text-gray-600",children:"Losses"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:n.draws}),r.jsx("p",{className:"text-xs text-gray-600",children:"Draws"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[r.jsx(Ge,{className:"h-4 w-4 mr-2 text-blue-600"}),"Top Performers"]}),r.jsx("div",{className:"space-y-3",children:a.map((c,o)=>{var u,d;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white rounded-full border-2 border-gray-200",children:r.jsxs("span",{className:"text-sm font-bold text-gray-600",children:["#",o+1]})}),r.jsx("div",{className:"text-2xl",children:i(((u=c.sports)==null?void 0:u.name)||"")}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:c.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(d=c.sports)==null?void 0:d.name,"  ",c.gender]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.winRate>=70?"bg-green-100 text-green-700":c.winRate>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[c.winRate,"% Win Rate"]})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.wins,"W - ",c.losses,"L - ",c.draws,"D"]})]})]},c.id)})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(Ee,{className:"h-4 w-4 text-blue-600 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Performance Tip"})]}),r.jsx("p",{className:"text-xs text-blue-700",children:e==="coach"?"Focus on consistent training and team coordination to improve win rates. Regular practice sessions show significant impact on performance.":"Teams with regular training schedules and active player participation tend to have higher win rates and better team cohesion."})]})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(at,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Team Spotlight"]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ne,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No teams available yet"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Teams will appear here once they're created"})]})]})},Sv=()=>{const{user:e}=Jt(),t=()=>{switch(e==null?void 0:e.role){case"admin":return"Admin Dashboard";case"committee":return"Committee Dashboard";case"coach":return"Coach Dashboard";case"player":return"Player Dashboard";default:return"Dashboard"}},s=()=>{const n=new Date().getHours();let a="Good morning";return n>=12&&n<17&&(a="Good afternoon"),n>=17&&(a="Good evening"),`${a}, ${e==null?void 0:e.name}!`};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 rounded-2xl p-8 text-white",children:[r.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),r.jsx("div",{className:"absolute top-0 right-0 transform translate-x-16 -translate-y-8",children:r.jsx("div",{className:"w-64 h-64 bg-white opacity-5 rounded-full"})}),r.jsx("div",{className:"absolute bottom-0 left-0 transform -translate-x-16 translate-y-8",children:r.jsx("div",{className:"w-48 h-48 bg-white opacity-5 rounded-full"})}),r.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:t()}),r.jsx("p",{className:"text-blue-100 text-lg",children:s()}),r.jsx("p",{className:"text-blue-200 text-sm mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-blue-200",children:"Your Role"}),r.jsx("p",{className:"text-xl font-semibold capitalize",children:e==null?void 0:e.role})]}),r.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-2xl font-bold",children:e==null?void 0:e.name.charAt(0).toUpperCase()})})]})]})]}),r.jsx(Nv,{userRole:(e==null?void 0:e.role)||""}),r.jsx(wv,{userRole:(e==null?void 0:e.role)||""}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="committee")&&r.jsx(_v,{}),((e==null?void 0:e.role)==="coach"||(e==null?void 0:e.role)==="player")&&r.jsx(kv,{userRole:e==null?void 0:e.role}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx(jv,{}),r.jsx(bv,{})]})]})},Ev=()=>{const{users:e,loading:t,error:s,addUser:n,updateUser:a,deleteUser:i}=Ir(),{teams:l}=Qt(),[c,o]=j.useState(""),[u,d]=j.useState("all"),[h,f]=j.useState(!1),[g,v]=j.useState(!1),[b,k]=j.useState(!1),[x,p]=j.useState(null),[m,y]=j.useState({name:"",email:"",role:"player",team_ids:[]}),[_,S]=j.useState(!1),w=e.filter(A=>{const N=A.name.toLowerCase().includes(c.toLowerCase())||A.email.toLowerCase().includes(c.toLowerCase()),P=u==="all"||A.role===u;return N&&P}),E=async A=>{A.preventDefault(),S(!0);try{const N=await n({name:m.name,email:m.email,role:m.role,is_active:!0});if(m.role==="coach"&&m.team_ids.length>0&&N){const{supabase:P}=await Bt(async()=>{const{supabase:B}=await Promise.resolve().then(()=>ma);return{supabase:B}},void 0);for(const B of m.team_ids)await P.from("teams").update({coach_id:N.id}).eq("id",B)}y({name:"",email:"",role:"player",team_ids:[]}),f(!1)}catch(N){console.error("Failed to add user:",N)}finally{S(!1)}},F=async A=>{if(A.preventDefault(),!!x){S(!0);try{if(await a(x.id,{name:m.name,email:m.email,role:m.role}),m.role==="coach"){const{supabase:N}=await Bt(async()=>{const{supabase:P}=await Promise.resolve().then(()=>ma);return{supabase:P}},void 0);await N.from("teams").update({coach_id:null}).eq("coach_id",x.id);for(const P of m.team_ids)await N.from("teams").update({coach_id:x.id}).eq("id",P)}y({name:"",email:"",role:"player",team_ids:[]}),v(!1),p(null)}catch(N){console.error("Failed to update user:",N)}finally{S(!1)}}},C=async()=>{if(x){S(!0);try{if(x.role==="coach"){const{supabase:A}=await Bt(async()=>{const{supabase:N}=await Promise.resolve().then(()=>ma);return{supabase:N}},void 0);await A.from("teams").update({coach_id:null}).eq("coach_id",x.id)}await i(x.id),k(!1),p(null)}catch(A){console.error("Failed to delete user:",A)}finally{S(!1)}}},O=async(A,N)=>{try{await a(A,{is_active:!N})}catch(P){console.error("Failed to toggle user status:",P)}},q=async A=>{p(A);let N=[];if(A.role==="coach"){const{supabase:P}=await Bt(async()=>{const{supabase:T}=await Promise.resolve().then(()=>ma);return{supabase:T}},void 0),{data:B}=await P.from("teams").select("id").eq("coach_id",A.id);N=(B==null?void 0:B.map(T=>T.id))||[]}y({name:A.name,email:A.email,role:A.role,team_ids:N}),v(!0)},$=A=>{p(A),k(!0)},J=A=>{switch(A){case"admin":return"bg-red-100 text-red-700";case"committee":return"bg-blue-100 text-blue-700";case"coach":return"bg-green-100 text-green-700";case"player":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},R=({isEdit:A=!1})=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:A?"Edit User":"Add New User"}),r.jsx("button",{onClick:()=>{f(!1),v(!1),y({name:"",email:"",role:"player",team_ids:[]})},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:A?F:E,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),r.jsx("input",{type:"text",required:!0,value:m.name,onChange:N=>y(P=>({...P,name:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",required:!0,value:m.email,onChange:N=>y(P=>({...P,email:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsxs("select",{value:m.role,onChange:N=>y(P=>({...P,role:N.target.value,team_ids:[]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"player",children:"Player"}),r.jsx("option",{value:"coach",children:"Coach"}),r.jsx("option",{value:"committee",children:"Committee"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),m.role==="coach"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ne,{className:"h-4 w-4"}),r.jsx("span",{children:"Assign Teams to Coach"})]})}),r.jsx("select",{multiple:!0,value:m.team_ids,onChange:N=>y(P=>({...P,team_ids:Array.from(N.target.selectedOptions,B=>B.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",size:Math.min(l.length,6),children:l.filter(N=>N.is_active).map(N=>{var P;return r.jsxs("option",{value:N.id,children:[N.name," (",((P=N.sports)==null?void 0:P.name)||"Unknown Sport",")"]},N.id)})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple teams. This coach will be assigned to manage these teams."}),l.filter(N=>N.is_active).length===0&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No active teams available. Create teams first in Teams Management."})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{f(!1),v(!1),y({name:"",email:"",role:"player",team_ids:[]})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:_?"Saving...":A?"Update User":"Add User"})]})]})]})}),W=()=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"}),r.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:x==null?void 0:x.name}),"? This action cannot be undone.",(x==null?void 0:x.role)==="coach"&&r.jsx("span",{className:"block mt-2 text-orange-600 text-sm",children:" This coach will be removed from all assigned teams."})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:C,disabled:_,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:_?"Deleting...":"Delete User"})]})]})});return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading users: ",s]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their roles"})]}),r.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add User"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:u,onChange:A=>d(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Roles"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"committee",children:"Committee"}),r.jsx("option",{value:"coach",children:"Coach"}),r.jsx("option",{value:"player",children:"Player"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(A=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:A.name.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),r.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize ${J(A.role)}`,children:A.role})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[A.is_active?r.jsx(ys,{className:"h-5 w-5 text-green-500 mr-2"}):r.jsx(tu,{className:"h-5 w-5 text-red-500 mr-2"}),r.jsx("span",{className:`text-sm ${A.is_active?"text-green-700":"text-red-700"}`,children:A.is_active?"Active":"Inactive"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(A.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>O(A.id,A.is_active),className:`p-2 rounded-lg transition-colors ${A.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:A.is_active?"Deactivate user":"Activate user",children:A.is_active?r.jsx(tu,{className:"h-4 w-4"}):r.jsx(ys,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>q(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>$(A),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})})]},A.id))})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(de,{className:"h-8 w-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Statistics"}),r.jsxs("div",{className:"flex items-center space-x-6 mt-2 text-sm text-gray-600",children:[r.jsxs("span",{children:["Total Users: ",e.length]}),r.jsxs("span",{children:["Active: ",e.filter(A=>A.is_active).length]}),r.jsxs("span",{children:["Coaches: ",e.filter(A=>A.role==="coach").length]}),r.jsxs("span",{children:["Players: ",e.filter(A=>A.role==="player").length]})]})]})]})}),h&&r.jsx(R,{}),g&&r.jsx(R,{isEdit:!0}),b&&r.jsx(W,{})]})},Cv=()=>{const{members:e,loading:t,error:s,addMember:n,updateMember:a,deleteMember:i}=yv(),{users:l}=Ir(),[c,o]=j.useState(""),[u,d]=j.useState("all"),[h,f]=j.useState(!1),[g,v]=j.useState(!1),[b,k]=j.useState(!1),[x,p]=j.useState(null),[m,y]=j.useState({user_id:"",position:"executive",start_date:"",end_date:""}),[_,S]=j.useState(!1),w=e.filter(N=>{var Q,ee;const P=((Q=N.users)==null?void 0:Q.name)||"",B=((ee=N.users)==null?void 0:ee.email)||"",T=P.toLowerCase().includes(c.toLowerCase())||B.toLowerCase().includes(c.toLowerCase()),H=u==="all"||N.position===u;return T&&H}),E=async N=>{N.preventDefault(),S(!0);try{await n({user_id:m.user_id,position:m.position,start_date:m.start_date,end_date:m.end_date||void 0,is_active:!0}),y({user_id:"",position:"executive",start_date:"",end_date:""}),f(!1)}catch(P){console.error("Failed to add member:",P)}finally{S(!1)}},F=async N=>{if(N.preventDefault(),!!x){S(!0);try{await a(x.id,{user_id:m.user_id,position:m.position,start_date:m.start_date,end_date:m.end_date||void 0}),y({user_id:"",position:"executive",start_date:"",end_date:""}),v(!1),p(null)}catch(P){console.error("Failed to update member:",P)}finally{S(!1)}}},C=async()=>{if(x){S(!0);try{await i(x.id),k(!1),p(null)}catch(N){console.error("Failed to delete member:",N)}finally{S(!1)}}},O=N=>{p(N),y({user_id:N.user_id,position:N.position,start_date:N.start_date,end_date:N.end_date||""}),v(!0)},q=N=>{p(N),k(!0)},$=N=>{switch(N){case"president":return"bg-red-100 text-red-700";case"secretary":return"bg-blue-100 text-blue-700";case"treasurer":return"bg-green-100 text-green-700";case"sports_officer":return"bg-orange-100 text-orange-700";case"executive":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},J=N=>{switch(N){case"president":return"";case"secretary":return"";case"treasurer":return"";case"sports_officer":return"";case"executive":return"";default:return""}},R=N=>{switch(N){case"sports_officer":return"Sports Officer";default:return N.charAt(0).toUpperCase()+N.slice(1)}},W=({isEdit:N=!1})=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N?"Edit Committee Member":"Add Committee Member"}),r.jsx("button",{onClick:()=>{f(!1),v(!1),y({user_id:"",position:"executive",start_date:"",end_date:""})},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:N?F:E,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),r.jsxs("select",{required:!0,value:m.user_id,onChange:P=>y({...m,user_id:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a user"}),l.map(P=>r.jsxs("option",{value:P.id,children:[P.name," (",P.email,")"]},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),r.jsxs("select",{value:m.position,onChange:P=>y({...m,position:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"executive",children:"Executive"}),r.jsx("option",{value:"sports_officer",children:"Sports Officer"}),r.jsx("option",{value:"treasurer",children:"Treasurer"}),r.jsx("option",{value:"secretary",children:"Secretary"}),r.jsx("option",{value:"president",children:"President"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",required:!0,value:m.start_date,onChange:P=>y({...m,start_date:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date (Optional)"}),r.jsx("input",{type:"date",value:m.end_date,onChange:P=>y({...m,end_date:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{f(!1),v(!1),y({user_id:"",position:"executive",start_date:"",end_date:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:_?"Saving...":N?"Update Member":"Add Member"})]})]})]})}),A=()=>{var N;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remove Committee Member"}),r.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to remove ",r.jsx("strong",{children:(N=x==null?void 0:x.users)==null?void 0:N.name})," from the committee? This action cannot be undone."]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:C,disabled:_,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:_?"Removing...":"Remove Member"})]})]})})};return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading committee members: ",s]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Committee Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage organizing committee members and their positions"})]}),r.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Member"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search committee members...",value:c,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:u,onChange:N=>d(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Positions"}),r.jsx("option",{value:"president",children:"President"}),r.jsx("option",{value:"secretary",children:"Secretary"}),r.jsx("option",{value:"treasurer",children:"Treasurer"}),r.jsx("option",{value:"sports_officer",children:"Sports Officer"}),r.jsx("option",{value:"executive",children:"Executive"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:w.map(N=>{var P,B;return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"text-2xl",children:J(N.position)}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>O(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>q(N),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:(P=N.users)==null?void 0:P.name}),r.jsx("p",{className:"text-sm text-gray-500",children:(B=N.users)==null?void 0:B.email})]}),r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${$(N.position)}`,children:R(N.position)}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(le,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:["Since ",new Date(N.start_date).toLocaleDateString()]})]}),r.jsxs("div",{className:`flex items-center text-sm ${N.is_active?"text-green-600":"text-red-600"}`,children:[r.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${N.is_active?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{children:N.is_active?"Active":"Inactive"})]})]})]},N.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"President"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(N=>N.position==="president"&&N.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Secretary"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(N=>N.position==="secretary"&&N.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Treasurer"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(N=>N.position==="treasurer"&&N.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sports Officer"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(N=>N.position==="sports_officer"&&N.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Executive"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(N=>N.position==="executive"&&N.is_active).length})]})]})})]}),h&&r.jsx(W,{}),g&&r.jsx(W,{isEdit:!0}),b&&r.jsx(A,{})]})},ll={football:"",soccer:"",basketball:"",volleyball:"",tennis:"",baseball:"",softball:"",cricket:"",rugby:"",american_football:"",ping_pong:"",table_tennis:"",badminton:"",handball:"",water_polo:"",golf:"",swimming:"",diving:"",surfing:"",rowing:"",sailing:"",kayaking:"",canoeing:"",cycling:"",mountain_biking:"",running:"",marathon:"",athletics:"",track_field:"",hurdles:"",long_jump:"",high_jump:"",pole_vault:"",shot_put:"",discus:"",javelin:"",hammer_throw:"",decathlon:"",heptathlon:"",triathlon:"",gymnastics:"",artistic_gymnastics:"",rhythmic_gymnastics:"",trampoline:"",acrobatics:"",cheerleading:"",parkour:"",boxing:"",wrestling:"",judo:"",karate:"",taekwondo:"",kung_fu:"",martial_arts:"",kickboxing:"",mma:"",fencing:"",kendo:"",aikido:"",brazilian_jiu_jitsu:"",muay_thai:"",skiing:"",snowboarding:"",ice_skating:"",figure_skating:"",speed_skating:"",ice_hockey:"",curling:"",bobsled:"",luge:"",skeleton:"",biathlon:"",cross_country_skiing:"",alpine_skiing:"",ski_jumping:"",freestyle_skiing:"",snowboard_cross:"",horse_racing:"",equestrian:"",dressage:"",show_jumping:"",eventing:"",polo:"",formula_1:"",racing:"",motocross:"",motorcycle_racing:"",rally:"",go_karting:"",nascar:"",skateboarding:"",bmx:"",rock_climbing:"",mountaineering:"",bouldering:"",base_jumping:"",skydiving:"",paragliding:"",hang_gliding:"",bungee_jumping:"",wingsuit_flying:"",archery:"",shooting:"",darts:"",billiards:"",pool:"",snooker:"",bowling:"",weightlifting:"",powerlifting:"",bodybuilding:"",strongman:"",crossfit:"",dance:"",ballroom_dance:"",latin_dance:"",ballet:"",hip_hop:"",breakdancing:"",contemporary:"",jazz_dance:"",tap_dance:"",chess:"",checkers:"",go:"",poker:"",bridge:"",esports:"",video_games:"",hiking:"",trekking:"",orienteering:"",geocaching:"",camping:"",fishing:"",hunting:"",water_skiing:"",wakeboarding:"",jet_skiing:"",windsurfing:"",kitesurfing:"",stand_up_paddle:"",scuba_diving:"",snorkeling:"",synchronized_swimming:"",open_water_swimming:"",lacrosse:"",field_hockey:"",ice_hockey:"",floorball:"",bandy:"",netball:"",korfball:"",ultimate_frisbee:"",disc_golf:"",quidditch:"",sumo:"",kabaddi:"",sepak_takraw:"",hurling:"",gaelic_football:"",australian_football:"",capoeira:"",yoga:"",pilates:"",meditation:"",tai_chi:"",qigong:"",aerobics:"",zumba:"",spinning:"",trophy:"",medal:"",sports:"",competition:"",championship:"",tournament:"",league:"",olympics:"",paralympics:""},Pv=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),[l,c]=j.useState(""),[o,u]=j.useState("all"),[d,h]=j.useState(!1),[f,g]=j.useState(!1),[v,b]=j.useState(!1),[k,x]=j.useState(null),[p,m]=j.useState({name:"",category:"team",icon:"trophy"}),[y,_]=j.useState(!1),[S,w]=j.useState("");j.useEffect(()=>{E()},[]);const E=async()=>{try{n(!0),i(null);const{data:T,error:H}=await U.from("sports").select("*").order("name",{ascending:!0});if(H)throw H;t(T||[])}catch(T){console.error("Error fetching sports:",T),i(T instanceof Error?T.message:"Failed to load sports")}finally{n(!1)}},F=e.filter(T=>{const H=T.name.toLowerCase().includes(l.toLowerCase()),Q=o==="all"||T.category===o;return H&&Q}),C=Object.entries(ll).filter(([T,H])=>S?T.toLowerCase().includes(S.toLowerCase())||H.includes(S):!0),O=async T=>{T.preventDefault(),_(!0);try{const{data:H,error:Q}=await U.from("sports").insert([{name:p.name.trim(),category:p.category,icon:p.icon,is_active:!0}]).select().single();if(Q)throw Q;H&&(t(ee=>[H,...ee]),m({name:"",category:"team",icon:"trophy"}),h(!1),w(""))}catch(H){console.error("Failed to add sport:",H),alert("Failed to add sport. Please check if the sport name already exists.")}finally{_(!1)}},q=async T=>{if(T.preventDefault(),!!k){_(!0);try{const{data:H,error:Q}=await U.from("sports").update({name:p.name.trim(),category:p.category,icon:p.icon}).eq("id",k.id).select().single();if(Q)throw Q;H&&(t(ee=>ee.map(be=>be.id===k.id?H:be)),m({name:"",category:"team",icon:"trophy"}),g(!1),x(null),w(""))}catch(H){console.error("Failed to update sport:",H),alert("Failed to update sport. Please try again.")}finally{_(!1)}}},$=async()=>{if(k){_(!0);try{const{error:T}=await U.from("sports").delete().eq("id",k.id);if(T)throw T;t(H=>H.filter(Q=>Q.id!==k.id)),b(!1),x(null)}catch(T){console.error("Failed to delete sport:",T),alert("Failed to delete sport. This sport may be in use by teams.")}finally{_(!1)}}},J=async(T,H)=>{try{const{data:Q,error:ee}=await U.from("sports").update({is_active:!H}).eq("id",T).select().single();if(ee)throw ee;Q&&t(be=>be.map(me=>me.id===T?Q:me))}catch(Q){console.error("Failed to toggle sport status:",Q),alert("Failed to update sport status.")}},R=T=>{x(T),m({name:T.name,category:T.category,icon:T.icon}),g(!0)},W=T=>{x(T),b(!0)},A=T=>ll[T.toLowerCase()]||ll.trophy,N=T=>T.split("_").map(H=>H.charAt(0).toUpperCase()+H.slice(1)).join(" "),P=({isEdit:T=!1})=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T?"Edit Sport":"Add New Sport"}),r.jsx("button",{onClick:()=>{h(!1),g(!1),m({name:"",category:"team",icon:"trophy"}),w("")},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:T?q:O,className:"flex flex-col h-full",children:[r.jsxs("div",{className:"space-y-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sport Name"}),r.jsx("input",{type:"text",required:!0,value:p.name,onChange:H=>m({...p,name:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter sport name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:p.category,onChange:H=>m({...p,category:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"team",children:"Team Sport"}),r.jsx("option",{value:"individual",children:"Individual Sport"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-300 rounded-lg bg-gray-50",children:[r.jsx("span",{className:"text-2xl",children:A(p.icon)}),r.jsx("span",{className:"font-medium text-gray-900",children:N(p.icon)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search icons...",value:S,onChange:H=>w(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:r.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 gap-2 max-h-64",children:C.map(([H,Q])=>r.jsx("button",{type:"button",onClick:()=>m({...p,icon:H}),className:`p-3 rounded-lg border-2 transition-all hover:scale-110 ${p.icon===H?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:N(H),children:r.jsx("span",{className:"text-xl",children:Q})},H))})}),r.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),g(!1),m({name:"",category:"team",icon:"trophy"}),w("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:y?"Saving...":T?"Update Sport":"Add Sport"})]})]})]})}),B=()=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Sport"}),r.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:k==null?void 0:k.name}),"? This action cannot be undone and may affect existing teams."]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:$,disabled:y,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:y?"Deleting...":"Delete Sport"})]})]})});return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading sports: ",a]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sports Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage available sports and their categories"})]}),r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Sport"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search sports...",value:l,onChange:T=>c(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:o,onChange:T=>u(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Categories"}),r.jsx("option",{value:"team",children:"Team Sports"}),r.jsx("option",{value:"individual",children:"Individual Sports"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:F.map(T=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"text-3xl",children:A(T.icon)}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>J(T.id,T.is_active),className:`p-2 rounded-lg transition-colors ${T.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:T.is_active?"Deactivate sport":"Activate sport",children:T.is_active?"":""}),r.jsx("button",{onClick:()=>R(T),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>W(T),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:T.name}),r.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[T.category," Sport"]})]}),r.jsxs("div",{className:`flex items-center text-sm ${T.is_active?"text-green-600":"text-red-600"}`,children:[r.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${T.is_active?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{children:T.is_active?"Active":"Inactive"})]})]})]},T.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sports"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx("span",{className:"text-xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team Sports"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(T=>T.category==="team").length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx("span",{className:"text-xl",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Individual Sports"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(T=>T.category==="individual").length})]})]})})]}),d&&r.jsx(P,{}),f&&r.jsx(P,{isEdit:!0}),v&&r.jsx(B,{})]})},Tv=()=>{const{teams:e,loading:t,error:s,addTeam:n,updateTeam:a,deleteTeam:i}=Qt(),{users:l}=Ir(),[c,o]=j.useState([]),[u,d]=j.useState(""),[h,f]=j.useState("all"),[g,v]=j.useState("all"),[b,k]=j.useState(!1),[x,p]=j.useState(!1),[m,y]=j.useState(!1),[_,S]=j.useState(null),[w,E]=j.useState({name:"",sport_id:"",gender:"men",coach_id:"",founded_year:new Date().getFullYear()}),[F,C]=j.useState(!1),[O,q]=j.useState({}),[$,J]=j.useState("");j.useEffect(()=>{(async()=>{const{data:G}=await U.from("sports").select("id, name");o(G||[])})()},[]),j.useEffect(()=>{const L=async()=>{try{console.log(" Fetching team player counts...");const{data:G,error:we}=await U.from("player_teams").select(`
            team_id,
            player_id,
            is_active,
            players!inner(is_active),
            teams!inner(name)
          `).eq("is_active",!0).eq("players.is_active",!0);if(we){console.error(" Error fetching team player counts:",we),J(`Error fetching player counts: ${we.message}`);return}console.log(" Player-team data:",G);const ie={};G==null||G.forEach(Qe=>{Qe.team_id&&(ie[Qe.team_id]=(ie[Qe.team_id]||0)+1)}),console.log(" Team player counts:",ie),q(ie);const Ne=Object.values(ie).reduce((Qe,M)=>Qe+M,0);J(`Loaded player counts for ${Object.keys(ie).length} teams. Total player assignments: ${Ne}`)}catch(G){console.error(" Exception fetching team player counts:",G),J(`Exception: ${G instanceof Error?G.message:"Unknown error"}`)}};e.length>0&&L()},[e]);const R=l.filter(L=>L.role==="coach"),W=e.filter(L=>{var Ne;const G=L.name.toLowerCase().includes(u.toLowerCase())||(((Ne=L.users)==null?void 0:Ne.name)||"").toLowerCase().includes(u.toLowerCase()),we=h==="all"||L.sport_id===h,ie=g==="all"||L.gender===g;return G&&we&&ie}),A=async L=>{L.preventDefault(),C(!0);try{await n({name:w.name,sport_id:w.sport_id,gender:w.gender,coach_id:w.coach_id,founded_year:w.founded_year,is_active:!0,wins:0,losses:0,draws:0}),E({name:"",sport_id:"",gender:"men",coach_id:"",founded_year:new Date().getFullYear()}),k(!1)}catch(G){console.error("Failed to add team:",G)}finally{C(!1)}},N=async L=>{if(L.preventDefault(),!!_){C(!0);try{await a(_.id,{name:w.name,sport_id:w.sport_id,gender:w.gender,coach_id:w.coach_id,founded_year:w.founded_year}),E({name:"",sport_id:"",gender:"men",coach_id:"",founded_year:new Date().getFullYear()}),p(!1),S(null)}catch(G){console.error("Failed to update team:",G)}finally{C(!1)}}},P=async()=>{if(_){C(!0);try{await i(_.id),y(!1),S(null)}catch(L){console.error("Failed to delete team:",L)}finally{C(!1)}}},B=L=>{S(L),E({name:L.name,sport_id:L.sport_id,gender:L.gender,coach_id:L.coach_id,founded_year:L.founded_year}),p(!0)},T=L=>{S(L),y(!0)},H=L=>{switch(L==null?void 0:L.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";default:return""}},Q=L=>{switch(L){case"men":return"bg-blue-100 text-blue-700";case"women":return"bg-pink-100 text-pink-700";case"mixed":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},ee=(L,G,we)=>{const ie=L+G+we;return ie>0?Math.round(L/ie*100):0},be=L=>O[L]||0,me=()=>Object.values(O).reduce((L,G)=>L+G,0),I=({isEdit:L=!1})=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L?"Edit Team":"Add New Team"}),r.jsx("button",{onClick:()=>{k(!1),p(!1),E({name:"",sport_id:"",gender:"men",coach_id:"",founded_year:new Date().getFullYear()})},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:L?N:A,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Name"}),r.jsx("input",{type:"text",required:!0,value:w.name,onChange:G=>E({...w,name:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sport"}),r.jsxs("select",{required:!0,value:w.sport_id,onChange:G=>E({...w,sport_id:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a sport"}),c.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender Category"}),r.jsxs("select",{value:w.gender,onChange:G=>E({...w,gender:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"men",children:"Men"}),r.jsx("option",{value:"women",children:"Women"}),r.jsx("option",{value:"mixed",children:"Mixed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coach"}),r.jsxs("select",{required:!0,value:w.coach_id,onChange:G=>E({...w,coach_id:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a coach"}),R.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Founded Year"}),r.jsx("input",{type:"number",required:!0,min:"1900",max:new Date().getFullYear(),value:w.founded_year,onChange:G=>E({...w,founded_year:parseInt(G.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{k(!1),p(!1),E({name:"",sport_id:"",gender:"men",coach_id:"",founded_year:new Date().getFullYear()})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:F,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:F?"Saving...":L?"Update Team":"Add Team"})]})]})]})}),z=()=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Team"}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:_==null?void 0:_.name}),"? This action cannot be undone and will remove all associated data."]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:P,disabled:F,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:F?"Deleting...":"Delete Team"})]})]})});return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading teams: ",s]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teams Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage sports teams and their performance"}),$&&r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:$})]}),r.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Team"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search teams...",value:u,onChange:L=>d(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:h,onChange:L=>f(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Sports"}),c.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]}),r.jsxs("select",{value:g,onChange:L=>v(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Genders"}),r.jsx("option",{value:"men",children:"Men"}),r.jsx("option",{value:"women",children:"Women"}),r.jsx("option",{value:"mixed",children:"Mixed"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:W.map(L=>{var we,ie;const G=be(L.id);return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"text-3xl",children:H(((we=L.sports)==null?void 0:we.name)||"")}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>B(L),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>T(L),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:L.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Coach: ",(ie=L.users)==null?void 0:ie.name]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize ${Q(L.gender)}`,children:L.gender}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Founded ",L.founded_year]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(de,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{className:G>0?"text-green-600 font-medium":"text-gray-600",children:[G," player",G!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(Ee,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[ee(L.wins,L.losses,L.draws),"% win rate"]})]})]}),G===0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:" No Players Assigned"}),r.jsx("p",{className:"text-xs text-yellow-600",children:"Add players in Players Management"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[r.jsxs("div",{className:"bg-green-100 text-green-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:L.wins}),r.jsx("div",{children:"Wins"})]}),r.jsxs("div",{className:"bg-red-100 text-red-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:L.losses}),r.jsx("div",{children:"Losses"})]}),r.jsxs("div",{className:"bg-yellow-100 text-yellow-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:L.draws}),r.jsx("div",{children:"Draws"})]})]}),r.jsxs("div",{className:`flex items-center text-sm ${L.is_active?"text-green-600":"text-red-600"}`,children:[r.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${L.is_active?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{children:L.is_active?"Active":"Inactive"})]})]})]},L.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(de,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:me()}),r.jsx("p",{className:"text-xs text-gray-500",children:"Across all teams"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:r.jsx(Ee,{className:"h-6 w-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(L=>L.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(le,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sports"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]})]})})]}),b&&r.jsx(I,{}),x&&r.jsx(I,{isEdit:!0}),m&&r.jsx(z,{})]})},Rv=()=>{const{players:e,loading:t,error:s,addPlayer:n,updatePlayer:a,deletePlayer:i}=Bn(),{users:l}=Ir(),{teams:c}=Qt(),[o,u]=j.useState(""),[d,h]=j.useState("all"),[f,g]=j.useState("all"),[v,b]=j.useState(!1),[k,x]=j.useState(!1),[p,m]=j.useState(!1),[y,_]=j.useState(null),[S,w]=j.useState({user_id:"",position:"",jersey_number:1,date_joined:new Date().toISOString().split("T")[0],team_ids:[]}),[E,F]=j.useState(!1),[C,O]=j.useState([]),[q,$]=j.useState(""),J=l.filter(I=>I.role==="player");j.useEffect(()=>{(async()=>{try{console.log(" Fetching player-team relationships...");const{data:z,error:L}=await U.from("player_teams").select(`
            player_id,
            team_id,
            is_active,
            teams(id, name, sports(name))
          `);L?(console.error(" Error fetching player-teams:",L),$(`Error fetching player-teams: ${L.message}`)):(console.log(" Player-team relationships loaded:",(z==null?void 0:z.length)||0),O(z||[]),$(`Loaded ${(z==null?void 0:z.length)||0} player-team relationships`))}catch(z){console.error(" Exception fetching player-teams:",z),$(`Exception: ${z instanceof Error?z.message:"Unknown error"}`)}})()},[]);const R=e.filter(I=>{var Ne,Qe;const z=((Ne=I.users)==null?void 0:Ne.name)||"",L=((Qe=I.users)==null?void 0:Qe.email)||"",G=z.toLowerCase().includes(o.toLowerCase())||L.toLowerCase().includes(o.toLowerCase()),we=f==="all"||f==="active"&&I.is_active||f==="inactive"&&!I.is_active;let ie=d==="all";return d!=="all"&&(ie=C.filter(K=>K.player_id===I.id&&K.is_active).map(K=>K.team_id).includes(d)),G&&we&&ie}),W=async I=>{I.preventDefault(),F(!0);try{if(console.log(" Starting player creation process..."),console.log(" Form data:",S),!S.user_id||!S.date_joined)throw new Error("User and date joined are required");if(S.team_ids.length===0)throw new Error("At least one team must be selected");console.log(" Creating player record...");const z=await n({user_id:S.user_id,position:S.position||null,jersey_number:S.jersey_number||null,date_joined:S.date_joined,is_active:!0,matches_played:0,wins:0,losses:0,draws:0,personal_best:null});if(!z)throw new Error("Failed to create player record");console.log(" Player created successfully:",z.id),console.log(" Creating player-team relationships..."),console.log(" Selected teams:",S.team_ids);const L=S.team_ids.map(M=>({player_id:z.id,team_id:M,joined_date:S.date_joined,is_active:!0}));console.log(" Player-team inserts:",L);const{data:G,error:we}=await U.from("player_teams").insert(L).select(`
          id,
          player_id,
          team_id,
          is_active,
          teams(name, sports(name))
        `);if(we)throw console.error(" Error creating player-team relationships:",we),await U.from("players").delete().eq("id",z.id),new Error(`Failed to assign player to teams: ${we.message}`);console.log(" Player-team relationships created:",G),console.log(" Refreshing player-team data...");const{data:ie,error:Ne}=await U.from("player_teams").select(`
          player_id,
          team_id,
          is_active,
          teams(id, name, sports(name))
        `);Ne?console.error(" Error refreshing player-teams:",Ne):(O(ie||[]),console.log(" Player-team data refreshed"));const Qe=S.team_ids.map(M=>{var K;return(K=c.find(oe=>oe.id===M))==null?void 0:K.name}).filter(Boolean).join(", ");$(` Successfully created player and assigned to teams: ${Qe}`),w({user_id:"",position:"",jersey_number:1,date_joined:new Date().toISOString().split("T")[0],team_ids:[]}),b(!1)}catch(z){console.error(" Failed to add player:",z);const L=z instanceof Error?z.message:"Unknown error occurred";$(` Error: ${L}`),alert(`Failed to add player: ${L}`)}finally{F(!1)}},A=async I=>{if(I.preventDefault(),!!y){F(!0);try{await a(y.id,{user_id:S.user_id,position:S.position,jersey_number:S.jersey_number,date_joined:S.date_joined}),w({user_id:"",position:"",jersey_number:1,date_joined:new Date().toISOString().split("T")[0],team_ids:[]}),x(!1),_(null)}catch(z){console.error("Failed to update player:",z)}finally{F(!1)}}},N=async()=>{if(y){F(!0);try{await i(y.id),m(!1),_(null)}catch(I){console.error("Failed to delete player:",I)}finally{F(!1)}}},P=async(I,z)=>{try{await a(I,{is_active:!z})}catch(L){console.error("Failed to toggle player status:",L)}},B=I=>{_(I),w({user_id:I.user_id,position:I.position||"",jersey_number:I.jersey_number||1,date_joined:I.date_joined,team_ids:[]}),x(!0)},T=I=>{_(I),m(!0)},H=(I,z)=>{const L=I+z;return L>0?Math.round(I/L*100):0},Q=I=>C.filter(z=>z.player_id===I&&z.is_active).map(z=>{var L;return(L=z.teams)==null?void 0:L.name}).filter(Boolean).join(", "),ee=I=>C.filter(z=>z.player_id===I&&z.is_active).length,be=({isEdit:I=!1})=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I?"Edit Player":"Add New Player"}),r.jsx("button",{onClick:()=>{b(!1),x(!1),w({user_id:"",position:"",jersey_number:1,date_joined:new Date().toISOString().split("T")[0],team_ids:[]})},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),q&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-blue-700",children:q})}),r.jsxs("form",{onSubmit:I?A:W,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["User ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{required:!0,value:S.user_id,onChange:z=>w({...S,user_id:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a user"}),J.map(z=>r.jsxs("option",{value:z.id,children:[z.name," (",z.email,")"]},z.id))]}),J.length===0&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No users with 'player' role found. Create users first."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),r.jsx("input",{type:"text",value:S.position,onChange:z=>w({...S,position:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Batsman, Forward, Spiker"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jersey Number"}),r.jsx("input",{type:"number",min:"1",max:"99",value:S.jersey_number,onChange:z=>w({...S,jersey_number:parseInt(z.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date Joined ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"date",required:!0,value:S.date_joined,onChange:z=>w({...S,date_joined:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!I&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Teams ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{multiple:!0,required:!0,value:S.team_ids,onChange:z=>w({...S,team_ids:Array.from(z.target.selectedOptions,L=>L.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",size:Math.min(c.length,6),children:c.filter(z=>z.is_active).map(z=>{var L;return r.jsxs("option",{value:z.id,children:[z.name," (",((L=z.sports)==null?void 0:L.name)||"Unknown Sport",")"]},z.id)})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hold Ctrl/Cmd to select multiple teams. ",r.jsx("strong",{children:"You must select at least one team."})]}),c.filter(z=>z.is_active).length===0&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No active teams available. Create teams first in Teams Management."}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Available teams: ",c.filter(z=>z.is_active).length]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{b(!1),x(!1),w({user_id:"",position:"",jersey_number:1,date_joined:new Date().toISOString().split("T")[0],team_ids:[]})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:E||!I&&S.team_ids.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:E?"Saving...":I?"Update Player":"Add Player"})]})]})]})}),me=()=>{var I;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Player"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:(I=y==null?void 0:y.users)==null?void 0:I.name}),"? This action cannot be undone and will remove all associated performance data."]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:E,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:E?"Deleting...":"Delete Player"})]})]})})};return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading players: ",s]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Players Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage players and their performance across all teams"}),q&&r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:q})]}),r.jsxs("button",{onClick:()=>b(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Player"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search players...",value:o,onChange:I=>u(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:d,onChange:I=>h(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Teams"}),c.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))]}),r.jsxs("select",{value:f,onChange:I=>g(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:R.map(I=>{var z,L,G;return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-medium text-blue-600",children:(((z=I.users)==null?void 0:z.name)||"").charAt(0).toUpperCase()})}),I.jersey_number&&r.jsxs("div",{className:"bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded",children:["#",I.jersey_number]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>P(I.id,I.is_active),className:`p-2 rounded-lg transition-colors ${I.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,children:r.jsx(ys,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>B(I),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>T(I),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:(L=I.users)==null?void 0:L.name}),r.jsx("p",{className:"text-sm text-gray-500",children:(G=I.users)==null?void 0:G.email}),I.position&&r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:I.position})]}),Q(I.id)&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[r.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["Teams (",ee(I.id),")"]}),r.jsx("p",{className:"text-sm text-blue-800",children:Q(I.id)})]}),!Q(I.id)&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:" No Teams Assigned"}),r.jsx("p",{className:"text-xs text-yellow-600",children:"This player is not assigned to any team"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(ne,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[I.matches_played," matches"]})]}),r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(Ee,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[H(I.wins,I.losses),"% win rate"]})]})]}),I.personal_best&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2",children:[r.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:"Personal Best"}),r.jsx("p",{className:"text-sm text-yellow-800",children:I.personal_best})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(le,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:["Joined ",new Date(I.date_joined).toLocaleDateString()]})]}),r.jsxs("div",{className:`flex items-center ${I.is_active?"text-green-600":"text-red-600"}`,children:[r.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${I.is_active?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs",children:I.is_active?"Active":"Inactive"})]})]})]})]},I.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ys,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(I=>I.is_active).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:r.jsx(Ee,{className:"h-6 w-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Assigned Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(I=>ee(I.id)>0).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(le,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Matches"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((I,z)=>I+z.matches_played,0)})]})]})})]}),v&&r.jsx(be,{}),k&&r.jsx(be,{isEdit:!0}),p&&r.jsx(me,{})]})},Av=({eventId:e,eventName:t,teamIds:s,onClose:n})=>{var E,F;const[a,i]=j.useState([]),[l,c]=j.useState([]),[o,u]=j.useState(""),[d,h]=j.useState(!0),[f,g]=j.useState(!1),[v,b]=j.useState(""),[k,x]=j.useState(!1),[p,m]=j.useState(null);j.useEffect(()=>{y()},[e,s]);const y=async()=>{var C;try{if(h(!0),b(" Loading event details and players..."),console.log(" Fetching event details for:",e),!e)throw new Error("Event ID is required");const{data:O,error:q}=await U.from("events").select(`
          id,
          name,
          sport_id,
          sports(name),
          event_teams(
            team_id,
            teams(id, name, sports(name))
          )
        `).eq("id",e).single();if(q)throw console.error(" Error fetching event:",q),new Error(`Failed to fetch event details: ${q.message}`);console.log(" Event details:",O),m(O);const $=((C=O.event_teams)==null?void 0:C.map(T=>T.team_id))||[];console.log(" Event team IDs from database:",$),console.log(" Team IDs from props:",s);const J=$.length>0?$:s;if(!J||J.length===0){b(" No teams assigned to this event. Please assign teams first in Events Management."),i([]),c([]),h(!1);return}console.log(" Using team IDs:",J),console.log(" Fetching players from teams...");const{data:R,error:W}=await U.from("player_teams").select(`
          player_id,
          team_id,
          is_active,
          players!inner(
            id,
            user_id,
            position,
            jersey_number,
            is_active,
            users(name, email)
          ),
          teams!inner(id, name, sports(name))
        `).in("team_id",J).eq("is_active",!0).eq("players.is_active",!0);if(W)throw console.error(" Error fetching player-teams:",W),new Error(`Failed to fetch players: ${W.message}`);console.log(" Player-team data found:",(R==null?void 0:R.length)||0);const A=[],N=new Set;R==null||R.forEach(T=>{T.players&&!N.has(T.players.id)&&(N.add(T.players.id),A.push({id:T.players.id,user_id:T.players.user_id,position:T.players.position,jersey_number:T.players.jersey_number,users:T.players.users}))}),console.log(" Unique players found:",A.length),i(A),console.log(" Fetching current player selections...");const{data:P,error:B}=await U.from("event_players").select("player_id").eq("event_id",e);if(B)console.error(" Error fetching current selections:",B),console.log(" Continuing without current selections..."),c([]);else{const T=(P==null?void 0:P.map(H=>H.player_id))||[];console.log(" Currently selected players:",T.length),c(T)}A.length===0?b(" No players found in the assigned teams. Teams may not have players assigned yet."):b(` Found ${A.length} players from ${J.length} teams. ${(P==null?void 0:P.length)||0} currently selected.`)}catch(O){console.error(" Error in fetchEventDetailsAndPlayers:",O),b(` Error: ${O instanceof Error?O.message:"Unknown error"}`)}finally{h(!1)}},_=C=>{c(O=>O.includes(C)?O.filter(q=>q!==C):[...O,C])},S=async()=>{g(!0),x(!1);try{console.log(" Starting save process..."),console.log(" Event ID:",e),console.log(" Selected players:",l),console.log(" Removing existing player selections...");const{error:C}=await U.from("event_players").delete().eq("event_id",e);if(C)throw console.error(" Delete error:",C),new Error(`Failed to clear existing selections: ${C.message}`);if(console.log(" Existing selections cleared"),l.length>0){console.log(" Adding new player selections...");const O=l.map(J=>({event_id:e,player_id:J}));console.log(" Inserting:",O);const{data:q,error:$}=await U.from("event_players").insert(O).select("id, event_id, player_id");if($)throw console.error(" Insert error:",$),console.error("Insert error details:",{message:$.message,details:$.details,hint:$.hint,code:$.code}),new Error(`Failed to save player selections: ${$.message}`);console.log(" Player selections saved:",(q==null?void 0:q.length)||0),b(` Successfully saved ${l.length} player selections`)}else console.log(" No players selected, only cleared existing selections"),b(" Successfully cleared all player selections");x(!0),setTimeout(()=>{n()},1e3)}catch(C){console.error(" Save error:",C);const O=C instanceof Error?C.message:"Unknown error occurred";b(` Save failed: ${O}`),alert(`Failed to save player selections: ${O}`)}finally{g(!1)}},w=a.filter(C=>{var O,q,$;return((O=C.users)==null?void 0:O.name.toLowerCase().includes(o.toLowerCase()))||((q=C.users)==null?void 0:q.email.toLowerCase().includes(o.toLowerCase()))||(($=C.position)==null?void 0:$.toLowerCase().includes(o.toLowerCase()))});return d?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md mx-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-center mt-4",children:"Loading players..."}),r.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:v})]})}):r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Players"}),r.jsx("p",{className:"text-sm text-gray-500",children:t}),p&&r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Sport: ",(E=p.sports)==null?void 0:E.name,"  Teams: ",((F=p.event_teams)==null?void 0:F.length)||0]}),v&&r.jsx("p",{className:`text-xs mt-1 ${v.startsWith("")?"text-green-600":v.startsWith("")||v.startsWith("")?"text-red-600":"text-blue-600"}`,children:v})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:y,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Refresh data",disabled:d,children:r.jsx(eu,{className:`h-4 w-4 ${d?"animate-spin":""}`})}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]})]}),(!(p!=null&&p.event_teams)||p.event_teams.length===0)&&r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx(yc,{className:"h-16 w-16 mx-auto text-orange-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Teams Assigned"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"This event doesn't have any teams assigned yet. You need to assign teams before you can select players."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left mb-6",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:" How to fix this:"}),r.jsxs("ol",{className:"text-sm text-blue-700 space-y-2 list-decimal list-inside",children:[r.jsx("li",{children:"Close this dialog"}),r.jsx("li",{children:'Click the "Edit" button on the event card'}),r.jsx("li",{children:'In the "Teams" section, select one or more teams for this event'}),r.jsx("li",{children:"Save the event"}),r.jsx("li",{children:"Then try selecting players again"})]})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(sv,{className:"h-4 w-4"}),r.jsx("span",{children:"Go Back to Fix Event"})]})})]})}),(p==null?void 0:p.event_teams)&&p.event_teams.length>0&&a.length===0&&r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx(de,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Players Available"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The teams assigned to this event don't have any players yet."}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-6",children:[r.jsx("h4",{className:"font-medium text-yellow-800 mb-3",children:" How to add players:"}),r.jsxs("ol",{className:"text-sm text-yellow-700 space-y-2 list-decimal list-inside",children:[r.jsx("li",{children:"Go to Players Management"}),r.jsx("li",{children:"Add new players or edit existing ones"}),r.jsxs("li",{children:["Assign players to the teams used in this event:",r.jsx("ul",{className:"mt-2 ml-4 space-y-1",children:p.event_teams.map((C,O)=>{var q;return r.jsxs("li",{className:"text-xs",children:[" ",(q=C.teams)==null?void 0:q.name]},O)})})]}),r.jsx("li",{children:"Return here to select players"})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),r.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(eu,{className:"h-4 w-4"}),r.jsx("span",{children:"Refresh"})]})]})]})}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search players...",value:o,onChange:C=>u(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:r.jsx("div",{className:"space-y-2",children:w.map(C=>{var O,q;return r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors ${l.includes(C.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>_(C.id),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:(O=C.users)==null?void 0:O.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:(q=C.users)==null?void 0:q.name}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[C.position&&r.jsx("span",{children:C.position}),C.jersey_number&&r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:["#",C.jersey_number]})]})]})]}),r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${l.includes(C.id)?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:l.includes(C.id)&&r.jsx(Xd,{className:"h-3 w-3 text-white"})})]},C.id)})})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[l.length," player",l.length!==1?"s":""," selected"]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),r.jsx("button",{onClick:S,disabled:f||k,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 ${k?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Saving..."})]}):k?r.jsxs(r.Fragment,{children:[r.jsx(Xd,{className:"h-4 w-4"}),r.jsx("span",{children:"Saved!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Er,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Selection"})]})})]})]})]})]})})},Mv=({eventId:e,eventName:t,teams:s,onClose:n})=>{const[a,i]=j.useState([]),[l,c]=j.useState({}),[o,u]=j.useState({}),[d,h]=j.useState(!0),[f,g]=j.useState(!1);j.useEffect(()=>{v(),b()},[e]);const v=async()=>{try{const{data:m,error:y}=await U.from("event_players").select(`
          player_id,
          players!inner(
            id,
            user_id,
            position,
            jersey_number,
            users(name)
          )
        `).eq("event_id",e);if(y)throw y;const _=(m==null?void 0:m.map(E=>E.players))||[];i(_);const S={};_.forEach(E=>{S[E.id]={player_id:E.id,score:void 0,position:void 0,notes:"",metrics:{}}}),c(S);const w={};s.forEach(E=>{w[E.id]={position:void 0,score:void 0,notes:""}}),u(w)}catch(m){console.error("Error fetching event players:",m)}finally{h(!1)}},b=async()=>{try{const{data:m,error:y}=await U.from("performances").select("*").eq("event_id",e);if(y)throw y;const _={},S={};m==null||m.forEach(w=>{w.player_id&&(_[w.player_id]={player_id:w.player_id,score:w.score,position:w.position,notes:w.notes||"",metrics:w.metrics||{}}),w.team_id&&!w.player_id&&(S[w.team_id]={position:w.position,score:w.score,notes:w.notes||""})}),c(w=>({...w,..._})),u(w=>({...w,...S}))}catch(m){console.error("Error fetching existing performances:",m)}},k=(m,y,_)=>{c(S=>({...S,[m]:{...S[m],[y]:_}}))},x=(m,y,_)=>{u(S=>({...S,[m]:{...S[m],[y]:_}}))},p=async()=>{g(!0);try{await U.from("performances").delete().eq("event_id",e);const m=[];if(Object.values(l).forEach(y=>{(y.score!==void 0||y.position!==void 0||y.notes)&&m.push({event_id:e,player_id:y.player_id,team_id:null,score:y.score||null,position:y.position||null,notes:y.notes||null,metrics:y.metrics||{}})}),Object.entries(o).forEach(([y,_])=>{(_.score!==void 0||_.position!==void 0||_.notes)&&m.push({event_id:e,player_id:null,team_id:y,score:_.score||null,position:_.position||null,notes:_.notes||null,metrics:{}})}),m.length>0){const{error:y}=await U.from("performances").insert(m);if(y)throw y}n()}catch(m){console.error("Error saving performances:",m)}finally{g(!1)}};return d?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-center mt-4",children:"Loading performance data..."})]})}):r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Capture Performance"}),r.jsx("p",{className:"text-sm text-gray-500",children:t})]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(ne,{className:"h-5 w-5 mr-2 text-blue-600"}),"Team Performance"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(m=>{var y,_,S;return r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:m.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Position"}),r.jsx("input",{type:"number",min:"1",value:((y=o[m.id])==null?void 0:y.position)||"",onChange:w=>x(m.id,"position",parseInt(w.target.value)||void 0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"1st, 2nd..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Score"}),r.jsx("input",{type:"number",value:((_=o[m.id])==null?void 0:_.score)||"",onChange:w=>x(m.id,"score",parseFloat(w.target.value)||void 0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Points/Goals"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:((S=o[m.id])==null?void 0:S.notes)||"",onChange:w=>x(m.id,"notes",w.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:2,placeholder:"Team performance notes..."})]})]},m.id)})})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(at,{className:"h-5 w-5 mr-2 text-green-600"}),"Individual Player Performance"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(m=>{var y,_,S,w,E;return r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-blue-600",children:(y=m.users)==null?void 0:y.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-gray-900",children:(_=m.users)==null?void 0:_.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[m.position," ",m.jersey_number&&`#${m.jersey_number}`]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Score"}),r.jsx("input",{type:"number",value:((S=l[m.id])==null?void 0:S.score)||"",onChange:F=>k(m.id,"score",parseFloat(F.target.value)||void 0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Points"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Position"}),r.jsx("input",{type:"number",min:"1",value:((w=l[m.id])==null?void 0:w.position)||"",onChange:F=>k(m.id,"position",parseInt(F.target.value)||void 0),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Rank"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:((E=l[m.id])==null?void 0:E.notes)||"",onChange:F=>k(m.id,"notes",F.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:2,placeholder:"Performance notes..."})]})]},m.id)})}),a.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ee,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No players selected for this event"}),r.jsx("p",{className:"text-sm",children:"Select players first to capture their performance."})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:p,disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Er,{className:"h-4 w-4"}),r.jsx("span",{children:f?"Saving...":"Save Performance"})]})]})]})})},Ov=()=>{const{events:e,loading:t,error:s,addEvent:n,updateEvent:a,deleteEvent:i}=Dr(),{teams:l}=Qt(),[c,o]=j.useState([]),[u,d]=j.useState(""),[h,f]=j.useState("all"),[g,v]=j.useState("all"),[b,k]=j.useState("all"),[x,p]=j.useState(!1),[m,y]=j.useState(!1),[_,S]=j.useState(!1),[w,E]=j.useState(!1),[F,C]=j.useState(!1),[O,q]=j.useState(null),[$,J]=j.useState({name:"",sport_id:"",event_date:"",event_time:"",location:"",type:"training",status:"scheduled",result:"",team_ids:[]}),[R,W]=j.useState(!1),[A,N]=j.useState("");j.useEffect(()=>{(async()=>{const{data:K}=await U.from("sports").select("id, name");o(K||[])})()},[]);const P=M=>M?l.filter(K=>K.sport_id===M&&K.is_active):l.filter(K=>K.is_active),B=e.filter(M=>{const K=M.name.toLowerCase().includes(u.toLowerCase())||M.location.toLowerCase().includes(u.toLowerCase()),oe=h==="all"||M.sport_id===h,X=g==="all"||M.type===g,te=b==="all"||M.status===b;return K&&oe&&X&&te}),T=async M=>{M.preventDefault(),W(!0);try{if(console.log(" Creating event with data:",$),!$.sport_id)throw new Error("Please select a sport");if($.team_ids.length===0)throw new Error("Please select at least one team");const K=await n({name:$.name,sport_id:$.sport_id,event_date:$.event_date,event_time:$.event_time,location:$.location,type:$.type,status:$.status,result:$.result||void 0});if(!K)throw new Error("Failed to create event");if(console.log(" Event created:",K.id),$.team_ids.length>0){console.log(" Creating event-team relationships for teams:",$.team_ids);const oe=$.team_ids.map(Ct=>({event_id:K.id,team_id:Ct}));console.log(" Event-team inserts:",oe);const{data:X,error:te}=await U.from("event_teams").insert(oe).select(`
            id,
            event_id,
            team_id,
            teams(name, sports(name))
          `);if(te)throw console.error(" Error creating event-team relationships:",te),await U.from("events").delete().eq("id",K.id),new Error(`Failed to assign teams to event: ${te.message}`);console.log(" Event-team relationships created:",X);const Lt=$.team_ids.map(Ct=>{var Wn;return(Wn=l.find(Ur=>Ur.id===Ct))==null?void 0:Wn.name}).filter(Boolean).join(", ");N(` Event created and assigned to teams: ${Lt}`)}else N(" Event created (no teams assigned)");z(),p(!1)}catch(K){console.error(" Failed to add event:",K);const oe=K instanceof Error?K.message:"Unknown error occurred";N(` Error: ${oe}`),alert(`Failed to create event: ${oe}`)}finally{W(!1)}},H=async M=>{if(M.preventDefault(),!!O){W(!0);try{if(console.log(" Updating event with data:",$),await a(O.id,{name:$.name,sport_id:$.sport_id,event_date:$.event_date,event_time:$.event_time,location:$.location,type:$.type,status:$.status,result:$.result||void 0}),$.team_ids.length>0){console.log(" Updating event-team relationships..."),await U.from("event_teams").delete().eq("event_id",O.id);const K=$.team_ids.map(te=>({event_id:O.id,team_id:te})),{error:oe}=await U.from("event_teams").insert(K);if(oe)throw console.error(" Error updating event-team relationships:",oe),new Error(`Failed to update team assignments: ${oe.message}`);const X=$.team_ids.map(te=>{var Lt;return(Lt=l.find(Ct=>Ct.id===te))==null?void 0:Lt.name}).filter(Boolean).join(", ");N(` Event updated and assigned to teams: ${X}`)}z(),y(!1),q(null)}catch(K){console.error(" Failed to update event:",K);const oe=K instanceof Error?K.message:"Unknown error occurred";N(` Error: ${oe}`),alert(`Failed to update event: ${oe}`)}finally{W(!1)}}},Q=async()=>{if(O){W(!0);try{await i(O.id),S(!1),q(null)}catch(M){console.error("Failed to delete event:",M)}finally{W(!1)}}},ee=async M=>{q(M);const{data:K}=await U.from("event_teams").select("team_id").eq("event_id",M.id),oe=(K==null?void 0:K.map(X=>X.team_id))||[];J({name:M.name,sport_id:M.sport_id,event_date:M.event_date,event_time:M.event_time,location:M.location,type:M.type,status:M.status,result:M.result||"",team_ids:oe}),y(!0)},be=M=>{q(M),S(!0)},me=M=>{q(M),E(!0)},I=M=>{q(M),C(!0)},z=()=>{J({name:"",sport_id:"",event_date:"",event_time:"",location:"",type:"training",status:"scheduled",result:"",team_ids:[]}),N("")},L=async(M,K)=>{var oe,X;try{console.log(" Fixing event-team relationship for:",K);const{data:te,error:Lt}=await U.from("events").select("*, sports(name)").eq("id",M).single();if(Lt||!te){console.error(" Error fetching event:",Lt);return}console.log(" Event details:",te);const Ct=l.filter(Yt=>Yt.sport_id===te.sport_id);if(console.log(" Matching teams for sport:",Ct),Ct.length===0){alert(`No teams found for sport: ${(oe=te.sports)==null?void 0:oe.name}. Please create a team for this sport first.`);return}const Wn=Ct.map(Yt=>`${Yt.name} (${Yt.gender})`).join(`
`),Ur=prompt(`Select a team for event "${K}":

Available teams for ${(X=te.sports)==null?void 0:X.name}:
${Wn}

Enter the exact team name:`);if(!Ur)return;const qn=Ct.find(Yt=>Yt.name.toLowerCase()===Ur.toLowerCase()||`${Yt.name} (${Yt.gender})`.toLowerCase()===Ur.toLowerCase());if(!qn){alert("Team not found. Please enter the exact team name.");return}const{data:rf}=await U.from("event_teams").select("id").eq("event_id",M).eq("team_id",qn.id).single();if(rf){alert("This team is already assigned to this event.");return}const{error:Ei}=await U.from("event_teams").insert({event_id:M,team_id:qn.id});if(Ei){console.error(" Error creating event-team relationship:",Ei),alert(`Failed to assign team: ${Ei.message}`);return}console.log(" Event-team relationship created successfully"),alert(`Successfully assigned "${qn.name}" to event "${K}"`),window.location.reload()}catch(te){console.error(" Error fixing event-team relationship:",te),alert("An error occurred while fixing the event-team relationship.")}},G=M=>{switch(M){case"tournament":return"bg-red-100 text-red-700";case"league":return"bg-blue-100 text-blue-700";case"friendly":return"bg-green-100 text-green-700";case"training":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},we=M=>{switch(M){case"scheduled":return"bg-blue-100 text-blue-700";case"ongoing":return"bg-orange-100 text-orange-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ie=M=>{switch(M==null?void 0:M.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"foot ball":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";default:return""}},Ne=({isEdit:M=!1})=>{var K,oe;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M?"Edit Event":"Add New Event"}),r.jsx("button",{onClick:()=>{p(!1),y(!1),z()},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),A&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-blue-700",children:A})}),r.jsxs("form",{onSubmit:M?H:T,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Event Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:$.name,onChange:X=>J(te=>({...te,name:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter event name"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sport ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{required:!0,value:$.sport_id,onChange:X=>J(te=>({...te,sport_id:X.target.value,team_ids:[]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a sport"}),c.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"date",required:!0,value:$.event_date,onChange:X=>J(te=>({...te,event_date:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"time",required:!0,value:$.event_time,onChange:X=>J(te=>({...te,event_time:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:$.location,onChange:X=>J(te=>({...te,location:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter location"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Teams ",r.jsx("span",{className:"text-red-500",children:"*"}),$.sport_id&&r.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["(for ",(K=c.find(X=>X.id===$.sport_id))==null?void 0:K.name,")"]})]}),$.sport_id?P($.sport_id).length===0?r.jsxs("div",{className:"w-full px-3 py-2 border border-red-300 rounded-lg bg-red-50 text-red-600",children:["No teams available for ",(oe=c.find(X=>X.id===$.sport_id))==null?void 0:oe.name,".",r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Create teams first in Teams Management."})]}):r.jsxs(r.Fragment,{children:[r.jsx("select",{multiple:!0,required:!0,value:$.team_ids,onChange:X=>J(te=>({...te,team_ids:Array.from(X.target.selectedOptions,Lt=>Lt.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",size:Math.min(P($.sport_id).length,4),children:P($.sport_id).map(X=>r.jsxs("option",{value:X.id,children:[X.name," (",X.gender,")"]},X.id))}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hold Ctrl/Cmd to select multiple teams. ",r.jsx("strong",{children:"You must select at least one team."})]}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Available teams: ",P($.sport_id).length]})]}):r.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"Please select a sport first to see available teams"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:$.type,onChange:X=>J(te=>({...te,type:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"training",children:"Training"}),r.jsx("option",{value:"friendly",children:"Friendly"}),r.jsx("option",{value:"league",children:"League"}),r.jsx("option",{value:"tournament",children:"Tournament"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:$.status,onChange:X=>J(te=>({...te,status:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"scheduled",children:"Scheduled"}),r.jsx("option",{value:"ongoing",children:"Ongoing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),$.status==="completed"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Result"}),r.jsx("input",{type:"text",value:$.result,onChange:X=>J(te=>({...te,result:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter match result"})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{p(!1),y(!1),z()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:R||!M&&($.team_ids.length===0||!$.sport_id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:R?"Saving...":M?"Update Event":"Add Event"})]})]})]})})},Qe=()=>r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Event"}),r.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:O==null?void 0:O.name}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:Q,disabled:R,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:R?"Deleting...":"Delete Event"})]})]})});return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading events: ",s]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule and manage sports events and competitions"}),A&&r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:A})]}),r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Event"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search events...",value:u,onChange:M=>d(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:h,onChange:M=>f(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Sports"}),c.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]}),r.jsxs("select",{value:g,onChange:M=>v(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"tournament",children:"Tournament"}),r.jsx("option",{value:"league",children:"League"}),r.jsx("option",{value:"friendly",children:"Friendly"}),r.jsx("option",{value:"training",children:"Training"})]}),r.jsxs("select",{value:b,onChange:M=>k(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"scheduled",children:"Scheduled"}),r.jsx("option",{value:"ongoing",children:"Ongoing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:B.map(M=>{var K,oe;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-2xl",children:ie(((K=M.sports)==null?void 0:K.name)||"")}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:M.name}),r.jsx("p",{className:"text-sm text-gray-500",children:(oe=M.sports)==null?void 0:oe.name})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${G(M.type)}`,children:M.type}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${we(M.status)}`,children:M.status})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:[new Date(M.event_date).toLocaleDateString()," at ",M.event_time]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:M.location})]}),M.event_teams&&M.event_teams.length>0?r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:M.event_teams.map(X=>{var te;return(te=X.teams)==null?void 0:te.name}).filter(Boolean).join(" vs ")})]}):r.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"No teams assigned"}),r.jsx("button",{onClick:()=>L(M.id,M.name),className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded hover:bg-red-200 transition-colors",children:"Fix"})]}),M.result&&r.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[r.jsx(ne,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:M.result})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[M.event_teams&&M.event_teams.length>0&&r.jsxs("button",{onClick:()=>me(M),className:"flex items-center space-x-1 px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors",children:[r.jsx(tf,{className:"h-3 w-3"}),r.jsx("span",{children:"Select Players"})]}),(M.status==="completed"||M.status==="ongoing")&&r.jsxs("button",{onClick:()=>I(M),className:"flex items-center space-x-1 px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors",children:[r.jsx(Ee,{className:"h-3 w-3"}),r.jsx("span",{children:"Performance"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>ee(M),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(Ot,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>be(M),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx($r,{className:"h-4 w-4"})})]})]})]},M.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(le,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsx(lt,{className:"h-6 w-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(M=>M.status==="scheduled").length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(M=>M.status==="completed").length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx(de,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tournaments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(M=>M.type==="tournament").length})]})]})})]}),x&&r.jsx(Ne,{}),m&&r.jsx(Ne,{isEdit:!0}),_&&r.jsx(Qe,{}),w&&O&&O.event_teams&&r.jsx(Av,{eventId:O.id,eventName:O.name,teamIds:O.event_teams.map(M=>{var K;return(K=M.teams)==null?void 0:K.id}).filter(M=>M!=null),onClose:()=>E(!1)}),F&&O&&O.event_teams&&r.jsx(Mv,{eventId:O.id,eventName:O.name,teams:O.event_teams.filter(M=>{var K,oe;return((K=M.teams)==null?void 0:K.id)&&((oe=M.teams)==null?void 0:oe.name)}).map(M=>({id:M.teams.id,name:M.teams.name})),onClose:()=>C(!1)})]})},su=()=>{const{teams:e}=Qt(),{players:t}=Bn(),{events:s}=Dr(),n=e.reduce((g,v)=>g+v.wins,0),a=e.reduce((g,v)=>g+v.losses,0),i=e.reduce((g,v)=>g+v.draws,0),l=n+a+i,c=l>0?Math.round(n/l*100):0,o=t.filter(g=>g.is_active).length,u=s.filter(g=>g.status==="scheduled").length,d=s.filter(g=>g.status==="completed").length,h=e.map(g=>{const v=g.wins+g.losses+g.draws,b=v>0?Math.round(g.wins/v*100):0;return{...g,totalMatches:v,winRate:b}}).sort((g,v)=>v.winRate-g.winRate),f=g=>{switch(g==null?void 0:g.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";default:return""}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics & Reports"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Performance insights and statistical analysis"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Wins"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[c,"% win rate"]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(de,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[t.length," total players"]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsx(le,{className:"h-6 w-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Events This Month"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[u," upcoming"]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(Ee,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overall Win Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c,"%"]}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Across all teams"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Performance"}),r.jsx(Hs,{className:"h-5 w-5 text-gray-400"})]}),r.jsxs("div",{className:"space-y-4",children:[h.slice(0,5).map(g=>{var v;return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:f(((v=g.sports)==null?void 0:v.name)||"")}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:g.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[g.wins,"W - ",g.losses,"L - ",g.draws,"D"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-semibold ${g.winRate>=60?"text-green-600":g.winRate>=40?"text-yellow-600":"text-red-600"}`,children:[g.winRate,"% Win Rate"]}),r.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2 mt-1",children:r.jsx("div",{className:`h-2 rounded-full ${g.winRate>=60?"bg-green-500":g.winRate>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g.winRate}%`}})})]})]},g.id)}),h.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ne,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No team performance data available yet."}),r.jsx("p",{className:"text-sm",children:"Teams will appear here once they start playing matches."})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Trends"}),r.jsx(Ge,{className:"h-5 w-5 text-gray-400"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Player Registrations"}),r.jsx("p",{className:"text-sm text-gray-500",children:"New members joined"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",t.length]}),r.jsx("p",{className:"text-xs text-green-600",children:" Total registered"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Events Completed"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This period"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d}),r.jsx("p",{className:"text-xs text-blue-600",children:" Events finished"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Active Teams"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Currently competing"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:e.filter(g=>g.is_active).length}),r.jsx("p",{className:"text-xs text-orange-600",children:" Teams active"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Performance Rating System"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[r.jsx("div",{className:"text-4xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Excellent"}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Win Rate: 70%+"}),r.jsx("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map(g=>r.jsx(at,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},g))}),r.jsx("p",{className:"text-lg font-bold text-yellow-600 mt-2",children:"5 Stars"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("div",{className:"text-4xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Good"}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Win Rate: 50-69%"}),r.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[[1,2,3,4].map(g=>r.jsx(at,{className:"h-4 w-4 fill-blue-400 text-blue-400"},g)),r.jsx(at,{className:"h-4 w-4 text-gray-300"})]}),r.jsx("p",{className:"text-lg font-bold text-blue-600 mt-2",children:"4 Stars"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("div",{className:"text-4xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Average"}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Win Rate: 30-49%"}),r.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[[1,2,3].map(g=>r.jsx(at,{className:"h-4 w-4 fill-green-400 text-green-400"},g)),[4,5].map(g=>r.jsx(at,{className:"h-4 w-4 text-gray-300"},g))]}),r.jsx("p",{className:"text-lg font-bold text-green-600 mt-2",children:"3 Stars"})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"How Win Percentage is Calculated"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Formula:"}),r.jsx("code",{className:"bg-white px-2 py-1 rounded border",children:"Win Rate = (Wins  Total Matches)  100"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Example:"}),r.jsx("p",{className:"text-gray-600",children:"Team with 15 wins out of 20 matches = (15  20)  100 = 75% win rate"})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded border border-blue-200",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx(zn,{className:"h-4 w-4 inline mr-1"}),r.jsx("strong",{children:"Current Overall Win Rate:"})," ",c,"% across all ",e.length," teams"]})})]})]})]})},Lv=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings and configurations"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(nv,{className:"h-6 w-6 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Email Notifications"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Receive updates via email"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Event Reminders"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about upcoming events"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Performance Reports"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Weekly performance summaries"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(si,{className:"h-6 w-6 text-green-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add extra security to your account"})]}),r.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Enable"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Session Timeout"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Auto logout after inactivity"})]}),r.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{children:"30 minutes"}),r.jsx("option",{children:"1 hour"}),r.jsx("option",{children:"2 hours"}),r.jsx("option",{children:"Never"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Password Policy"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enforce strong passwords"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(av,{className:"h-6 w-6 text-purple-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Management"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{className:"w-full flex items-center justify-between p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Export Data"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Download all system data"})]}),r.jsx("span",{className:"text-blue-600",children:""})]}),r.jsxs("button",{className:"w-full flex items-center justify-between p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Backup Settings"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configure automatic backups"})]}),r.jsx("span",{className:"text-blue-600",children:""})]}),r.jsxs("button",{className:"w-full flex items-center justify-between p-3 border border-red-300 rounded-lg hover:bg-red-50 transition-colors text-red-600",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-medium",children:"Clear All Data"}),r.jsx("p",{className:"text-sm text-red-500",children:"Permanently delete all records"})]}),r.jsx("span",{children:""})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(dv,{className:"h-6 w-6 text-orange-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Preferences"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Language"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{children:"English"}),r.jsx("option",{children:"Spanish"}),r.jsx("option",{children:"French"}),r.jsx("option",{children:"German"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{children:"UTC-5 (Eastern Time)"}),r.jsx("option",{children:"UTC-6 (Central Time)"}),r.jsx("option",{children:"UTC-7 (Mountain Time)"}),r.jsx("option",{children:"UTC-8 (Pacific Time)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),r.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{children:"MM/DD/YYYY"}),r.jsx("option",{children:"DD/MM/YYYY"}),r.jsx("option",{children:"YYYY-MM-DD"})]})]})]})]})]})]}),$v=()=>{const{user:e}=Jt(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[i,l]=j.useState(null);j.useEffect(()=>{e!=null&&e.id&&c()},[e==null?void 0:e.id]);const c=async()=>{try{a(!0),l(null);const{data:f,error:g}=await U.from("teams").select(`
          id,
          name,
          sport_id,
          gender,
          founded_year,
          is_active,
          wins,
          losses,
          draws,
          sports(name)
        `).eq("coach_id",e==null?void 0:e.id).eq("is_active",!0);if(g)throw g;const v=await Promise.all((f||[]).map(async b=>{const{count:k}=await U.from("player_teams").select("*",{count:"exact",head:!0}).eq("team_id",b.id).eq("is_active",!0),x=b.wins+b.losses+b.draws,p=x>0?Math.round(b.wins/x*100):0;let m="No matches";return x>0&&(p>=70?m="Excellent":p>=50?m="Good":p>=30?m="Average":m="Needs Improvement"),{...b,player_count:k||0,recent_performance:m}}));s(v)}catch(f){console.error("Error fetching coach teams:",f),l(f instanceof Error?f.message:"Failed to load teams")}finally{a(!1)}},o=f=>{switch(f==null?void 0:f.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";case"basketball":return"";case"tennis":return"";case"swimming":return"";default:return""}},u=f=>{switch(f){case"men":return"bg-blue-100 text-blue-700";case"women":return"bg-pink-100 text-pink-700";case"mixed":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},d=f=>{switch(f){case"Excellent":return"text-green-600 bg-green-50";case"Good":return"text-blue-600 bg-blue-50";case"Average":return"text-yellow-600 bg-yellow-50";case"Needs Improvement":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},h=(f,g,v)=>{const b=f+g+v;return b>0?Math.round(f/b*100):0};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading teams: ",i]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Teams"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Teams under your coaching"})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[t.length," team",t.length!==1?"s":""," assigned"]})]}),t.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx(ne,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Teams Assigned"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't been assigned to coach any teams yet. Contact your administrator to get assigned to teams."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"How to get assigned to teams:"}),r.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Contact your club administrator"}),r.jsx("li",{children:"Ask them to edit existing teams in Teams Management"}),r.jsx("li",{children:"Request to be assigned as the coach for specific teams"}),r.jsx("li",{children:"Once assigned, your teams will appear here"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(f=>{var g,v;return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"text-3xl",children:o(((g=f.sports)==null?void 0:g.name)||"")}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize ${u(f.gender)}`,children:f.gender})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:f.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(v=f.sports)==null?void 0:v.name,"  Founded ",f.founded_year]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(de,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{className:f.player_count>0?"text-green-600 font-medium":"text-gray-600",children:[f.player_count," player",f.player_count!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(Ee,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[h(f.wins,f.losses,f.draws),"% win rate"]})]})]}),r.jsx("div",{className:`px-3 py-2 rounded-lg text-center ${d(f.recent_performance)}`,children:r.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[r.jsx(Ge,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:f.recent_performance})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[r.jsxs("div",{className:"bg-green-100 text-green-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:f.wins}),r.jsx("div",{children:"Wins"})]}),r.jsxs("div",{className:"bg-red-100 text-red-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:f.losses}),r.jsx("div",{children:"Losses"})]}),r.jsxs("div",{className:"bg-yellow-100 text-yellow-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:f.draws}),r.jsx("div",{children:"Draws"})]})]})]})]},f.id)})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ge,{className:"h-5 w-5 mr-2 text-blue-600"}),"Overall Coaching Performance"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Teams Coached"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.reduce((f,g)=>f+g.player_count,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Players"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.reduce((f,g)=>f+g.wins,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Wins"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.length>0?Math.round(t.reduce((f,g)=>{const v=g.wins+g.losses+g.draws;return f+(v>0?g.wins/v*100:0)},0)/t.length):0,"%"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Avg Win Rate"})]})]})]})]})]})},Iv=()=>{const{user:e}=Jt(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[i,l]=j.useState(null),[c,o]=j.useState(null),[u,d]=j.useState({}),[h,f]=j.useState(null);j.useEffect(()=>{e!=null&&e.id&&g()},[e==null?void 0:e.id]);const g=async()=>{try{a(!0),l(null);const{data:p,error:m}=await U.from("teams").select("id, name, sports(name)").eq("coach_id",e==null?void 0:e.id).eq("is_active",!0);if(m)throw m;if(!p||p.length===0){s([]),a(!1);return}const y=p.map(O=>O.id),{data:_,error:S}=await U.from("player_teams").select(`
          player_id,
          team_id,
          players!inner(
            id,
            user_id,
            position,
            jersey_number,
            date_joined,
            is_active,
            matches_played,
            wins,
            losses,
            draws,
            personal_best,
            users(name, email)
          ),
          teams!inner(id, name, sports(name))
        `).in("team_id",y).eq("is_active",!0).eq("players.is_active",!0);if(S)throw S;const w=new Map;_==null||_.forEach(O=>{const q=O.players,$=O.teams;w.has(q.id)||w.set(q.id,{...q,teams:[]});const J=w.get(q.id);J.teams.find(R=>R.id===$.id)||J.teams.push($)});const E=Array.from(w.values()),{data:F}=await U.from("player_stats").select("player_id, stats").in("player_id",E.map(O=>O.id)).eq("season_year",new Date().getFullYear()),C={};E.forEach(O=>{const q=F==null?void 0:F.find(J=>J.player_id===O.id),$=q==null?void 0:q.stats;C[O.id]={player_id:O.id,rating:($==null?void 0:$.coach_rating)||0,notes:($==null?void 0:$.coach_notes)||""}}),d(C),s(E)}catch(p){console.error("Error fetching coach players:",p),l(p instanceof Error?p.message:"Failed to load players")}finally{a(!1)}},v=(p,m,y)=>{d(_=>({..._,[p]:{..._[p],[m]:y}}))},b=async p=>{var m;try{f(p);const y=u[p],{data:_,error:S}=await U.from("player_stats").select("id, stats").eq("player_id",p).eq("season_year",new Date().getFullYear()).single(),w={...(_==null?void 0:_.stats)||{},coach_rating:y.rating,coach_notes:y.notes,last_updated:new Date().toISOString()};if(_){const{error:E}=await U.from("player_stats").update({stats:w}).eq("id",_.id);if(E)throw E}else{const E=t.find(q=>q.id===p),F=(m=E==null?void 0:E.teams[0])==null?void 0:m.id;if(!F)throw new Error("Unable to determine sport for player");const{data:C}=await U.from("teams").select("sport_id").eq("id",F).single(),{error:O}=await U.from("player_stats").insert({player_id:p,sport_id:C==null?void 0:C.sport_id,season_year:new Date().getFullYear(),stats:w});if(O)throw O}o(null)}catch(y){console.error("Error saving player rating:",y),alert("Failed to save rating. Please try again.")}finally{f(null)}},k=(p,m)=>{const y=p+m;return y>0?Math.round(p/y*100):0},x=({rating:p,onChange:m,readonly:y=!1})=>r.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(_=>r.jsx("button",{type:"button",disabled:y,onClick:()=>m&&m(_),className:`${y?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,children:r.jsx(at,{className:`h-5 w-5 ${_<=p?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},_))});return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading players: ",i]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Players"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Players under your coaching"})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[t.length," player",t.length!==1?"s":""]})]}),t.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx(ys,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Players Found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"No players are assigned to your teams yet."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"To see players here:"}),r.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Ensure you are assigned as a coach to teams"}),r.jsx("li",{children:"Players must be assigned to your teams"}),r.jsx("li",{children:'Both you and the players must be marked as "Active"'})]})]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>{var S,w;const m=c===p.id,y=h===p.id,_=u[p.id]||{rating:0,notes:""};return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-medium text-blue-600",children:(((S=p.users)==null?void 0:S.name)||"").charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:(w=p.users)==null?void 0:w.name}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[p.position&&r.jsx("span",{children:p.position}),p.jersey_number&&r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:["#",p.jersey_number]})]})]}),r.jsx("button",{onClick:()=>o(m?null:p.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",disabled:y,children:m?r.jsx(Re,{className:"h-4 w-4"}):r.jsx(Ot,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Teams"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.teams.map(E=>r.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:E.name},E.id))})]}),r.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Matches:"}),r.jsx("span",{className:"font-medium",children:p.matches_played})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Win Rate:"}),r.jsxs("span",{className:"font-medium text-green-600",children:[k(p.wins,p.losses),"%"]})]}),p.personal_best&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Best:"}),r.jsx("span",{className:"font-medium text-blue-600",children:p.personal_best})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Coach Rating"}),m&&r.jsxs("button",{onClick:()=>b(p.id),disabled:y,className:"flex items-center space-x-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Er,{className:"h-3 w-3"}),r.jsx("span",{children:y?"Saving...":"Save"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(x,{rating:_.rating,onChange:m?E=>v(p.id,"rating",E):void 0,readonly:!m}),m?r.jsx("textarea",{value:_.notes,onChange:E=>v(p.id,"notes",E.target.value),placeholder:"Add notes about player performance...",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:3}):_.notes?r.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded",children:_.notes}):r.jsx("p",{className:"text-xs text-gray-400 italic",children:"No notes yet"})]})]})]},p.id)})}),t.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ge,{className:"h-5 w-5 mr-2 text-blue-600"}),"Player Development Overview"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Players"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(p=>k(p.wins,p.losses)>=60).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"High Performers"}),r.jsx("div",{className:"text-xs text-gray-500",children:"60%+ win rate"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Object.values(u).filter(p=>p.rating>=4).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Top Rated"}),r.jsx("div",{className:"text-xs text-gray-500",children:"4+ stars"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Math.round(t.reduce((p,m)=>p+m.matches_played,0)/t.length)||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Avg Matches"}),r.jsx("div",{className:"text-xs text-gray-500",children:"per player"})]})]})]})]})},Dv=()=>{const{user:e}=Jt(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[i,l]=j.useState(null),[c,o]=j.useState(null),[u,d]=j.useState(!1),[h,f]=j.useState({}),[g,v]=j.useState(!1);j.useEffect(()=>{e!=null&&e.id&&b()},[e==null?void 0:e.id]);const b=async()=>{try{a(!0),l(null),console.log(" Fetching events for coach:",e==null?void 0:e.id);const{data:w,error:E}=await U.from("teams").select("id, name").eq("coach_id",e==null?void 0:e.id).eq("is_active",!0);if(E)throw E;if(!w||w.length===0){console.log(" No teams found for coach"),s([]),a(!1);return}const F=w.map(W=>W.id);console.log(" Coach teams:",F);const{data:C,error:O}=await U.from("event_teams").select("event_id").in("team_id",F);if(O)throw O;const q=(C==null?void 0:C.map(W=>W.event_id))||[];if(console.log(" Event IDs:",q),q.length===0){console.log(" No events found for coach teams"),s([]),a(!1);return}const{data:$,error:J}=await U.from("events").select(`
          id,
          name,
          sport_id,
          event_date,
          event_time,
          location,
          type,
          status,
          result,
          sports(name),
          event_teams(
            teams(id, name)
          ),
          event_players(
            player_id,
            players(
              id,
              users(name)
            )
          )
        `).in("id",q).order("event_date",{ascending:!0});if(J)throw J;console.log(" Events loaded:",($==null?void 0:$.length)||0);const R=await Promise.all(($||[]).map(async W=>{const{data:A}=await U.from("performances").select("id").eq("event_id",W.id).limit(1);return{...W,performance_captured:((A==null?void 0:A.length)||0)>0}}));s(R)}catch(w){console.error(" Error fetching coach events:",w),l(w instanceof Error?w.message:"Failed to load events")}finally{a(!1)}},k=async w=>{o(w);const E={};if(w.event_players){const{data:F}=await U.from("performances").select("player_id, score, notes, metrics").eq("event_id",w.id);w.event_players.forEach(C=>{const O=F==null?void 0:F.find(q=>q.player_id===C.player_id);E[C.player_id]={player_id:C.player_id,rating:(O==null?void 0:O.score)||3,notes:(O==null?void 0:O.notes)||""}})}f(E),d(!0)},x=(w,E,F)=>{f(C=>({...C,[w]:{...C[w],[E]:F}}))},p=async()=>{if(c)try{v(!0),await U.from("performances").delete().eq("event_id",c.id);const w=Object.values(h).map(E=>({event_id:c.id,player_id:E.player_id,team_id:null,score:E.rating,position:null,notes:E.notes,metrics:{coach_rating:E.rating}}));if(w.length>0){const{error:E}=await U.from("performances").insert(w);if(E)throw E}c.status==="ongoing"&&await U.from("events").update({status:"completed"}).eq("id",c.id),await b(),d(!1),o(null)}catch(w){console.error("Error saving performances:",w),alert("Failed to save performances. Please try again.")}finally{v(!1)}},m=w=>{switch(w){case"scheduled":return"bg-blue-100 text-blue-700";case"ongoing":return"bg-orange-100 text-orange-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},y=w=>{switch(w){case"tournament":return"bg-red-100 text-red-700";case"league":return"bg-blue-100 text-blue-700";case"friendly":return"bg-green-100 text-green-700";case"training":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},_=w=>{switch(w==null?void 0:w.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";case"basketball":return"";case"tennis":return"";case"swimming":return"";default:return""}},S=({rating:w,onChange:E,readonly:F=!1})=>r.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(C=>r.jsx("button",{type:"button",disabled:F,onClick:()=>E&&E(C),className:`${F?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,children:r.jsx(at,{className:`h-5 w-5 ${C<=w?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},C))});return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading events: ",i]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Events"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Events where your teams are participating"})]}),t.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx(le,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Events Found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"No events are scheduled for your teams yet."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"To see events here:"}),r.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Ensure you are assigned as a coach to teams"}),r.jsx("li",{children:"Events must be created and your teams assigned to them"}),r.jsx("li",{children:"Events will appear here once they're scheduled"})]})]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(w=>{var O,q;const E=new Date(w.event_date),F=E>new Date,C=w.status==="ongoing"||w.status==="completed";return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-2xl",children:_(((O=w.sports)==null?void 0:O.name)||"")}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:w.name}),r.jsx("p",{className:"text-sm text-gray-500",children:(q=w.sports)==null?void 0:q.name})]})]}),r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${y(w.type)}`,children:w.type}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${m(w.status)}`,children:w.status})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:[E.toLocaleDateString()," at ",w.event_time]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:w.location})]}),w.event_teams&&w.event_teams.length>0&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:w.event_teams.map($=>$.teams.name).join(" vs ")})]}),w.event_players&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(ne,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:[w.event_players.length," players selected"]})]})]}),r.jsx("div",{className:"border-t pt-4",children:w.performance_captured?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(Ee,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Performance Captured"})]}),r.jsx("button",{onClick:()=>k(w),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View/Edit"})]}):C?r.jsxs("button",{onClick:()=>k(w),className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ee,{className:"h-4 w-4"}),r.jsx("span",{children:"Capture Performance"})]}):w.event_players&&w.event_players.length===0?r.jsxs("div",{className:"flex items-center text-orange-600",children:[r.jsx(yc,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"No players selected"})]}):r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx(lt,{className:"h-4 w-4 mx-auto mb-1"}),r.jsx("span",{className:"text-sm",children:F?"Performance capture available after event":"Waiting for event to start"})]})})]},w.id)})}),u&&c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Capture Performance"}),r.jsx("p",{className:"text-sm text-gray-500",children:c.name})]}),r.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Re,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:c.event_players&&c.event_players.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.event_players.map(w=>{const E=h[w.player_id]||{rating:3,notes:""};return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:w.players.users.name.charAt(0).toUpperCase()})}),r.jsx("div",{children:r.jsx("h4",{className:"font-medium text-gray-900",children:w.players.users.name})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Performance Rating"}),r.jsx(S,{rating:E.rating,onChange:F=>x(w.player_id,"rating",F)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:E.notes,onChange:F=>x(w.player_id,"notes",F.target.value),placeholder:"Add performance notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]})]},w.player_id)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(de,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No players selected for this event"})]})}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:p,disabled:g||!c.event_players||c.event_players.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Er,{className:"h-4 w-4"}),r.jsx("span",{children:g?"Saving...":"Save Performance"})]})]})]})})]})},Uv=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Schedule"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Your upcoming events and training sessions"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"This Week"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Cricket Training"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Team Practice Session"})]}),r.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full",children:"Training"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Today at 5:00 PM"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Practice Ground"})]})]})]}),r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Inter-Club Championship"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Cricket Match"})]}),r.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full",children:"Tournament"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"March 15 at 10:00 AM"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Central Sports Ground"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"SCRSA vs City Club"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Next Week"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Weekly Training"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Regular Practice"})]}),r.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full",children:"Training"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"March 18 at 6:00 PM"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Indoor Sports Hall"})]})]})]}),r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Football Friendly"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Friendly Match"})]}),r.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full",children:"Friendly"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(lt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"March 20 at 4:00 PM"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Is,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"University Ground"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"SCRSA vs University FC"})]})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Calendar View"}),r.jsx(le,{className:"h-5 w-5 text-gray-400"})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 text-center text-sm",children:[r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Sun"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Mon"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Tue"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Wed"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Thu"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Fri"}),r.jsx("div",{className:"font-medium text-gray-500 py-2",children:"Sat"}),Array.from({length:35},(e,t)=>{const s=t-6,n=s===12,a=[15,18,20].includes(s);return r.jsx("div",{className:`py-2 rounded ${s<1||s>31?"text-gray-300":n?"bg-blue-600 text-white":a?"bg-blue-100 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:s>0&&s<=31?s:""},t)})]})]})]}),Fv=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Performance Analytics"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and analyze performance metrics"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Matches Played"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"25"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(Ee,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"72%"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsx(Ge,{className:"h-6 w-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Performance Score"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8.2"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(Hs,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Improvement"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"+15%"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"vs City Club"}),r.jsx("p",{className:"text-sm text-gray-500",children:"March 10, 2024"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-green-600",children:"Won"}),r.jsx("p",{className:"text-sm text-gray-500",children:"85 runs"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"vs University"}),r.jsx("p",{className:"text-sm text-gray-500",children:"March 5, 2024"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-green-600",children:"Won"}),r.jsx("p",{className:"text-sm text-gray-500",children:"67 runs"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"vs Sports Club"}),r.jsx("p",{className:"text-sm text-gray-500",children:"February 28, 2024"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-red-600",children:"Lost"}),r.jsx("p",{className:"text-sm text-gray-500",children:"23 runs"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Trends"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Batting Average"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"75%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"45.2"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Strike Rate"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"82%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"128.5"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Consistency"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"68%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"68%"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Bests"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"text-3xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Highest Score"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:"95"}),r.jsx("p",{className:"text-sm text-gray-500",children:"vs Regional Club"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-3xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Best Strike Rate"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:"156.8"}),r.jsx("p",{className:"text-sm text-gray-500",children:"vs City Club"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-3xl mb-2",children:""}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Most Boundaries"}),r.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:"12"}),r.jsx("p",{className:"text-sm text-gray-500",children:"vs University"})]})]})]})]}),zv=()=>{const{user:e}=Jt(),[t,s]=j.useState([]),[n,a]=j.useState([]),[i,l]=j.useState(!0),[c,o]=j.useState(null),[u,d]=j.useState("month"),[h,f]=j.useState(null),[g,v]=j.useState(null),[b,k]=j.useState(null);j.useEffect(()=>{e!=null&&e.id&&x()},[e==null?void 0:e.id,u]);const x=async()=>{try{l(!0),o(null);const{data:R,error:W}=await U.from("teams").select(`
          id,
          name,
          wins,
          losses,
          draws,
          sports(name)
        `).eq("coach_id",e==null?void 0:e.id).eq("is_active",!0);if(W)throw W;if(!R||R.length===0){s([]),a([]),l(!1);return}const A=R.map(Q=>Q.id),N=await Promise.all(R.map(async Q=>{const{count:ee}=await U.from("player_teams").select("*",{count:"exact",head:!0}).eq("team_id",Q.id).eq("is_active",!0),{data:be}=await U.from("player_teams").select("player_id").eq("team_id",Q.id).eq("is_active",!0),me=(be==null?void 0:be.map(ie=>ie.player_id))||[],{data:I}=await U.from("player_stats").select("stats").eq("season_year",new Date().getFullYear()).in("player_id",me),z=(I==null?void 0:I.map(ie=>{var Ne;return((Ne=ie.stats)==null?void 0:Ne.coach_rating)||0}).filter(ie=>ie>0))||[],L=z.length>0?z.reduce((ie,Ne)=>ie+Ne,0)/z.length:0;return{...Q,player_count:ee||0,avg_rating:Math.round(L*10)/10,team_rating:3,team_notes:"Click edit to add performance notes for this team."}}));s(N);const{data:P}=await U.from("player_teams").select(`
          player_id,
          team_id,
          players!inner(
            id,
            matches_played,
            wins,
            losses,
            users(name)
          ),
          teams!inner(name)
        `).in("team_id",A).eq("is_active",!0).eq("players.is_active",!0),B=(P==null?void 0:P.map(Q=>Q.players.id))||[],{data:T}=await U.from("player_stats").select("player_id, stats").in("player_id",B).eq("season_year",new Date().getFullYear()),H=(P==null?void 0:P.map(Q=>{var we,ie,Ne;const ee=Q.players,be=Q.teams,me=T==null?void 0:T.find(Qe=>Qe.player_id===ee.id),I=((we=me==null?void 0:me.stats)==null?void 0:we.coach_rating)||3,z=((ie=me==null?void 0:me.stats)==null?void 0:ie.coach_notes)||"Click edit to add performance notes.",L=ee.wins+ee.losses>0?ee.wins/(ee.wins+ee.losses):0;let G="stable";return L>.6?G="up":L<.4&&(G="down"),{id:ee.id,name:((Ne=ee.users)==null?void 0:Ne.name)||"Unknown",matches_played:ee.matches_played,wins:ee.wins,losses:ee.losses,coach_rating:I,coach_notes:z,team_name:be.name,improvement_trend:G}}))||[];a(H.sort((Q,ee)=>ee.coach_rating-Q.coach_rating))}catch(R){console.error("Error fetching performance data:",R),o(R instanceof Error?R.message:"Failed to load performance data")}finally{l(!1)}},p=(R,W,A)=>{s(N=>N.map(P=>P.id===R?{...P,team_rating:W,team_notes:A!==void 0?A:P.team_notes}:P))},m=(R,W,A)=>{a(N=>N.map(P=>P.id===R?{...P,coach_rating:W,coach_notes:A!==void 0?A:P.coach_notes}:P))},y=async R=>{try{k(R);const W=t.find(A=>A.id===R);if(!W)return;await new Promise(A=>setTimeout(A,500)),console.log("Team rating saved:",{teamId:R,rating:W.team_rating,notes:W.team_notes}),f(null)}catch(W){console.error("Error saving team rating:",W),alert("Failed to save team rating. Please try again.")}finally{k(null)}},_=async R=>{var W;try{k(R);const A=n.find(T=>T.id===R);if(!A)return;const{data:N,error:P}=await U.from("player_stats").select("id, stats").eq("player_id",R).eq("season_year",new Date().getFullYear()).maybeSingle(),B={...(N==null?void 0:N.stats)||{},coach_rating:A.coach_rating,coach_notes:A.coach_notes,last_updated:new Date().toISOString()};if(N){const{error:T}=await U.from("player_stats").update({stats:B}).eq("id",N.id);if(T)throw T}else{const{data:T}=await U.from("player_teams").select("teams(sport_id)").eq("player_id",R).eq("is_active",!0).limit(1).single();if((W=T==null?void 0:T.teams)!=null&&W.sport_id){const{error:H}=await U.from("player_stats").insert({player_id:R,sport_id:T.teams.sport_id,season_year:new Date().getFullYear(),stats:B});if(H)throw H}}v(null)}catch(A){console.error("Error saving player rating:",A),alert("Failed to save rating. Please try again.")}finally{k(null)}},S=(R,W,A)=>{const N=R+W+A;return N>0?Math.round(R/N*100):0},w=R=>{switch(R){case"up":return r.jsx(Ge,{className:"h-4 w-4 text-green-500"});case"down":return r.jsx(Ge,{className:"h-4 w-4 text-red-500 transform rotate-180"});default:return r.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})}},E=R=>{switch(R==null?void 0:R.toLowerCase()){case"cricket":return"";case"volleyball":return"";case"football":return"";case"handball":return"";case"athletics":return"";case"gymnastics":return"";case"basketball":return"";case"tennis":return"";case"swimming":return"";default:return""}},F=({rating:R,onChange:W,readonly:A=!1,size:N="md"})=>{const P={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},B=T=>{!A&&W&&W(T)};return r.jsxs("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(T=>r.jsx("button",{type:"button",disabled:A,onClick:()=>B(T),className:`${A?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform focus:outline-none disabled:cursor-default`,tabIndex:A?-1:0,children:r.jsx(at,{className:`${P[N]} ${T<=R?"fill-yellow-400 text-yellow-400":A?"text-gray-300":"text-gray-300 hover:text-yellow-300"} transition-colors`})},T)),!A&&r.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[R,"/5"]})]})};if(i)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(c)return r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-600",children:["Error loading performance data: ",c]})});const C=t.reduce((R,W)=>R+W.wins+W.losses+W.draws,0),O=t.reduce((R,W)=>R+W.wins,0),q=C>0?Math.round(O/C*100):0,$=t.reduce((R,W)=>R+W.player_count,0),J=t.length>0?t.reduce((R,W)=>R+W.avg_rating,0)/t.length:0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Performance Analytics"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and analyze your teams' performance"})]}),r.jsxs("select",{value:u,onChange:R=>d(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"month",children:"This Month"}),r.jsx("option",{value:"quarter",children:"This Quarter"}),r.jsx("option",{value:"year",children:"This Year"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overall Win Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[q,"%"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[O," wins of ",C," matches"]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(de,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Across ",t.length," teams"]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:r.jsx(at,{className:"h-6 w-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Team Rating"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:J.toFixed(1)}),r.jsx("div",{className:"mt-1",children:r.jsx(F,{rating:Math.round(J),readonly:!0,size:"sm"})})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(Ge,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"High Performers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(R=>R.coach_rating>=4).length}),r.jsx("p",{className:"text-xs text-gray-500",children:"4+ star players"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[r.jsx(Hs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Team Performance Rating"]}),t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ne,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No teams assigned"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your administrator to get assigned to teams"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(R=>{var N,P;const W=h===R.id,A=b===R.id;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-2xl",children:E(((N=R.sports)==null?void 0:N.name)||"")}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:R.name}),r.jsx("p",{className:"text-sm text-gray-500",children:(P=R.sports)==null?void 0:P.name})]})]}),r.jsx("button",{onClick:()=>f(W?null:R.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",disabled:A,children:W?r.jsx(Re,{className:"h-4 w-4"}):r.jsx(Ot,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Win Rate:"}),r.jsxs("span",{className:"font-medium text-green-600",children:[S(R.wins,R.losses,R.draws),"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"font-medium",children:R.player_count})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Player Avg:"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(F,{rating:Math.round(R.avg_rating),readonly:!0,size:"sm"}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",R.avg_rating.toFixed(1),")"]})]})]})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Team Rating"}),W&&r.jsxs("button",{onClick:()=>y(R.id),disabled:A,className:"flex items-center space-x-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Er,{className:"h-3 w-3"}),r.jsx("span",{children:A?"Saving...":"Save"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{rating:R.team_rating,onChange:W?B=>p(R.id,B):void 0,readonly:!W}),W?r.jsx("textarea",{value:R.team_notes,onChange:B=>p(R.id,R.team_rating,B.target.value),placeholder:"Add notes about team performance...",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:3}):r.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded",children:R.team_notes})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-center text-xs",children:[r.jsxs("div",{className:"bg-green-100 text-green-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:R.wins}),r.jsx("div",{children:"Wins"})]}),r.jsxs("div",{className:"bg-red-100 text-red-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:R.losses}),r.jsx("div",{children:"Losses"})]}),r.jsxs("div",{className:"bg-yellow-100 text-yellow-700 py-1 rounded",children:[r.jsx("div",{className:"font-semibold",children:R.draws}),r.jsx("div",{children:"Draws"})]})]})]},R.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[r.jsx(zn,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Top Performing Players"]}),n.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(de,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No player data available"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Players will appear here once they're assigned to your teams"})]}):r.jsx("div",{className:"space-y-3",children:n.slice(0,10).map((R,W)=>{const A=g===R.id,N=b===R.id;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white rounded-full border-2 border-gray-200",children:r.jsxs("span",{className:"text-sm font-bold text-gray-600",children:["#",W+1]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:R.name}),r.jsx("p",{className:"text-sm text-gray-500",children:R.team_name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[R.wins,"W-",R.losses,"L (",R.matches_played," matches)"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-right",children:A?r.jsxs("div",{className:"space-y-2 min-w-[200px]",children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(F,{rating:R.coach_rating,onChange:P=>m(R.id,P)})}),r.jsx("textarea",{value:R.coach_notes,onChange:P=>m(R.id,R.coach_rating,P.target.value),placeholder:"Add performance notes...",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:2})]}):r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center justify-end space-x-1 mb-1",children:r.jsx(F,{rating:R.coach_rating,readonly:!0})}),R.coach_notes&&R.coach_notes!=="Click edit to add performance notes."&&r.jsx("div",{className:"text-xs text-gray-500 max-w-48 text-right",children:R.coach_notes})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[w(R.improvement_trend),A?r.jsxs("button",{onClick:()=>_(R.id),disabled:N,className:"flex items-center space-x-1 px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:[r.jsx(Er,{className:"h-3 w-3"}),r.jsx("span",{children:N?"Saving...":"Save"})]}):r.jsx("button",{onClick:()=>v(R.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit player rating",children:r.jsx(Ot,{className:"h-4 w-4"})})]})]})]},R.id)})})]})]})},Bv=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Profile"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your personal information and preferences"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"h-24 w-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-3xl font-medium text-blue-600",children:"MD"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Mike Davis"}),r.jsx("p",{className:"text-gray-500",children:"Cricket Player"}),r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsxs("button",{className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ot,{className:"h-4 w-4"}),r.jsx("span",{children:"Edit Profile"})]})})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Quick Stats"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Jersey Number"}),r.jsx("span",{className:"font-medium",children:"#10"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Position"}),r.jsx("span",{className:"font-medium",children:"Batsman"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Team"}),r.jsx("span",{className:"font-medium",children:"SCRSA Cricket Men"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Status"}),r.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(pv,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{children:"Mike Davis"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(fo,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{children:"mike.davis@email.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Joined"}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(le,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{children:"January 15, 2024"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:r.jsx("span",{children:"+1 (555) 123-4567"})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Performance Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(ne,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"25"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Matches Played"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Ee,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"72%"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Win Rate"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("span",{className:"text-2xl mb-2 block",children:""}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"95"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Highest Score"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recent Activity"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Match vs City Club"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Scored 85 runs - March 10, 2024"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Training Session"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Batting practice - March 8, 2024"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"h-2 w-2 bg-yellow-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Team Meeting"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Strategy discussion - March 5, 2024"})]})]})]})]})]})]})]}),Wv=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Achievements"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Your awards, milestones, and recognition"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Player of the Match"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Outstanding performance vs City Club"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"March 10, 2024"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Century Maker"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Scored 95 runs in a single match"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"February 28, 2024"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Team Captain"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Led the team to victory in 5 matches"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"January 2024"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Consistent Performer"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Maintained 70%+ win rate for 3 months"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"Q1 2024"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Winning Streak"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Won 8 consecutive matches"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"February 2024"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Most Improved"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"15% improvement in batting average"}),r.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[r.jsx(le,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:"March 2024"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Achievement Progress"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Matches Played"}),r.jsx("span",{className:"text-sm text-gray-500",children:"25/50"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"50%"}})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'25 more matches to unlock "Veteran Player" badge'})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Career Runs"}),r.jsx("span",{className:"text-sm text-gray-500",children:"1,250/2,000"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"62.5%"}})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'750 more runs to unlock "Run Machine" badge'})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Training Sessions"}),r.jsx("span",{className:"text-sm text-gray-500",children:"45/100"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"45%"}})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'55 more sessions to unlock "Dedicated Trainer" badge'})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistics Overview"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(ne,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"6"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Awards"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(zn,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"3"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Player of Match"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(at,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8.2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Avg Rating"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(Ee,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"72%"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"})]})]})]})]}),Me=({children:e,allowedRoles:t})=>{const{isAuthenticated:s,user:n,isLoading:a}=Jt();return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?t&&n&&!t.includes(n.role)?r.jsx(Za,{to:"/dashboard",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Za,{to:"/login",replace:!0})},qv=()=>{const{isAuthenticated:e,isLoading:t}=Jt();return t?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r.jsxs(_g,{children:[r.jsx(_e,{path:"/login",element:e?r.jsx(Za,{to:"/dashboard",replace:!0}):r.jsx(gv,{})}),r.jsx(_e,{path:"/",element:r.jsx(Za,{to:"/dashboard",replace:!0})}),r.jsx(_e,{path:"/dashboard",element:r.jsx(Me,{children:r.jsx(Ae,{children:r.jsx(Sv,{})})})}),r.jsx(_e,{path:"/users",element:r.jsx(Me,{allowedRoles:["admin"],children:r.jsx(Ae,{children:r.jsx(Ev,{})})})}),r.jsx(_e,{path:"/committee",element:r.jsx(Me,{allowedRoles:["admin"],children:r.jsx(Ae,{children:r.jsx(Cv,{})})})}),r.jsx(_e,{path:"/sports",element:r.jsx(Me,{allowedRoles:["admin"],children:r.jsx(Ae,{children:r.jsx(Pv,{})})})}),r.jsx(_e,{path:"/analytics",element:r.jsx(Me,{allowedRoles:["admin"],children:r.jsx(Ae,{children:r.jsx(su,{})})})}),r.jsx(_e,{path:"/settings",element:r.jsx(Me,{allowedRoles:["admin"],children:r.jsx(Ae,{children:r.jsx(Lv,{})})})}),r.jsx(_e,{path:"/teams",element:r.jsx(Me,{allowedRoles:["admin","committee"],children:r.jsx(Ae,{children:r.jsx(Tv,{})})})}),r.jsx(_e,{path:"/players",element:r.jsx(Me,{allowedRoles:["admin","committee"],children:r.jsx(Ae,{children:r.jsx(Rv,{})})})}),r.jsx(_e,{path:"/events",element:r.jsx(Me,{allowedRoles:["admin","committee"],children:r.jsx(Ae,{children:r.jsx(Ov,{})})})}),r.jsx(_e,{path:"/reports",element:r.jsx(Me,{allowedRoles:["committee"],children:r.jsx(Ae,{children:r.jsx(su,{})})})}),r.jsx(_e,{path:"/my-teams",element:r.jsx(Me,{allowedRoles:["coach"],children:r.jsx(Ae,{children:r.jsx($v,{})})})}),r.jsx(_e,{path:"/my-players",element:r.jsx(Me,{allowedRoles:["coach"],children:r.jsx(Ae,{children:r.jsx(Iv,{})})})}),r.jsx(_e,{path:"/my-events",element:r.jsx(Me,{allowedRoles:["coach"],children:r.jsx(Ae,{children:r.jsx(Dv,{})})})}),r.jsx(_e,{path:"/performance",element:r.jsx(Me,{allowedRoles:["coach"],children:r.jsx(Ae,{children:r.jsx(zv,{})})})}),r.jsx(_e,{path:"/profile",element:r.jsx(Me,{allowedRoles:["player"],children:r.jsx(Ae,{children:r.jsx(Bv,{})})})}),r.jsx(_e,{path:"/my-performance",element:r.jsx(Me,{allowedRoles:["player"],children:r.jsx(Ae,{children:r.jsx(Fv,{})})})}),r.jsx(_e,{path:"/achievements",element:r.jsx(Me,{allowedRoles:["player"],children:r.jsx(Ae,{children:r.jsx(Wv,{})})})}),r.jsx(_e,{path:"/schedule",element:r.jsx(Me,{allowedRoles:["coach","player"],children:r.jsx(Ae,{children:r.jsx(Uv,{})})})})]})};function Hv(){return r.jsx(Yy,{children:r.jsx(Rg,{children:r.jsx(qv,{})})})}pm(document.getElementById("root")).render(r.jsx(j.StrictMode,{children:r.jsx(Hv,{})}));
